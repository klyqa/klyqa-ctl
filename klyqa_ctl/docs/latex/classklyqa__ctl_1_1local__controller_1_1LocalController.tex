\hypertarget{classklyqa__ctl_1_1local__controller_1_1LocalController}{}\doxysection{klyqa\+\_\+ctl.\+local\+\_\+controller.\+Local\+Controller Class Reference}
\label{classklyqa__ctl_1_1local__controller_1_1LocalController}\index{klyqa\_ctl.local\_controller.LocalController@{klyqa\_ctl.local\_controller.LocalController}}


Collaboration diagram for klyqa\+\_\+ctl.\+local\+\_\+controller.\+Local\+Controller\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=259pt]{classklyqa__ctl_1_1local__controller_1_1LocalController__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
None \mbox{\hyperlink{classklyqa__ctl_1_1local__controller_1_1LocalController_ad820bb0d181aeb158a3177323ee35cdf}{\+\_\+\+\_\+init\+\_\+\+\_\+}} (self, \mbox{\hyperlink{classklyqa__ctl_1_1controller__data_1_1ControllerData}{Controller\+Data}} controller\+\_\+data)
\item 
\mbox{\hyperlink{classstr}{str}} \mbox{\hyperlink{classklyqa__ctl_1_1local__controller_1_1LocalController_a28a9d1dad1c73734dbadc5f08279c169}{send\+\_\+to\+\_\+device}} (self, \mbox{\hyperlink{classstr}{str}} unit\+\_\+id, \mbox{\hyperlink{classstr}{str}} key, \mbox{\hyperlink{classstr}{str}} command)
\item 
\mbox{\hyperlink{classstr}{str}} \mbox{\hyperlink{classklyqa__ctl_1_1local__controller_1_1LocalController_a5285a4922d736c63b83ae0626424d9aa}{send\+\_\+to\+\_\+device\+\_\+native}} (self, \mbox{\hyperlink{classklyqa__ctl_1_1general_1_1unit__id_1_1UnitId}{Unit\+Id}} unit\+\_\+id, \mbox{\hyperlink{classstr}{str}} key, \mbox{\hyperlink{classklyqa__ctl_1_1general_1_1general_1_1Command}{Command}} command)
\item 
None \mbox{\hyperlink{classklyqa__ctl_1_1local__controller_1_1LocalController_aa10e92996b98046d4414be75d2b93305}{shutdown}} (self)
\item 
\mbox{\hyperlink{classklyqa__ctl_1_1local__controller_1_1LocalController}{Local\+Controller}} \mbox{\hyperlink{classklyqa__ctl_1_1local__controller_1_1LocalController_a0d521d323172bec4e120f6968cd92450}{create\+\_\+default}} (Any cls, \mbox{\hyperlink{classklyqa__ctl_1_1controller__data_1_1ControllerData}{Controller\+Data}} controller\+\_\+data, \mbox{\hyperlink{classstr}{str}} server\+\_\+ip=\char`\"{}0.\+0.\+0.\+0\char`\"{}, \mbox{\hyperlink{classstr}{str}}$\vert$None network\+\_\+interface=None)
\item 
\mbox{\hyperlink{classklyqa__ctl_1_1local__controller_1_1LocalController}{Local\+Controller}} \mbox{\hyperlink{classklyqa__ctl_1_1local__controller_1_1LocalController_a109a225aaf7b2944bedd487a755ef4ab}{create\+\_\+standalone}} (Any cls, \mbox{\hyperlink{classstr}{str}} server\+\_\+ip=\char`\"{}0.\+0.\+0.\+0\char`\"{}, \mbox{\hyperlink{classstr}{str}}$\vert$None network\+\_\+interface=None, bool interactive\+\_\+prompts=False)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}Local controller.\end{DoxyVerb}
 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classklyqa__ctl_1_1local__controller_1_1LocalController_ad820bb0d181aeb158a3177323ee35cdf}\label{classklyqa__ctl_1_1local__controller_1_1LocalController_ad820bb0d181aeb158a3177323ee35cdf}} 
\index{klyqa\_ctl.local\_controller.LocalController@{klyqa\_ctl.local\_controller.LocalController}!\_\_init\_\_@{\_\_init\_\_}}
\index{\_\_init\_\_@{\_\_init\_\_}!klyqa\_ctl.local\_controller.LocalController@{klyqa\_ctl.local\_controller.LocalController}}
\doxysubsubsection{\texorpdfstring{\_\_init\_\_()}{\_\_init\_\_()}}
{\footnotesize\ttfamily  None klyqa\+\_\+ctl.\+local\+\_\+controller.\+Local\+Controller.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{\mbox{\hyperlink{classklyqa__ctl_1_1controller__data_1_1ControllerData}{Controller\+Data}}}]{controller\+\_\+data }\end{DoxyParamCaption})}

\begin{DoxyVerb}Initialize local controller.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{22     ) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{23         \textcolor{stringliteral}{"{}"{}"{}Initialize local controller."{}"{}"{}}}
\DoxyCodeLine{24 }
\DoxyCodeLine{25         self.connection\_hdl: LocalConnectionHandler | \textcolor{keywordtype}{None} = \textcolor{keywordtype}{None}}
\DoxyCodeLine{26         self.controller\_data: ControllerData = controller\_data}
\DoxyCodeLine{27 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1local__controller_1_1LocalController_ad820bb0d181aeb158a3177323ee35cdf_cgraph}
\end{center}
\end{figure}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classklyqa__ctl_1_1local__controller_1_1LocalController_a0d521d323172bec4e120f6968cd92450}\label{classklyqa__ctl_1_1local__controller_1_1LocalController_a0d521d323172bec4e120f6968cd92450}} 
\index{klyqa\_ctl.local\_controller.LocalController@{klyqa\_ctl.local\_controller.LocalController}!create\_default@{create\_default}}
\index{create\_default@{create\_default}!klyqa\_ctl.local\_controller.LocalController@{klyqa\_ctl.local\_controller.LocalController}}
\doxysubsubsection{\texorpdfstring{create\_default()}{create\_default()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classklyqa__ctl_1_1local__controller_1_1LocalController}{Local\+Controller}} klyqa\+\_\+ctl.\+local\+\_\+controller.\+Local\+Controller.\+create\+\_\+default (\begin{DoxyParamCaption}\item[{Any}]{cls,  }\item[{\mbox{\hyperlink{classklyqa__ctl_1_1controller__data_1_1ControllerData}{Controller\+Data}}}]{controller\+\_\+data,  }\item[{\mbox{\hyperlink{classstr}{str}} }]{server\+\_\+ip = {\ttfamily \char`\"{}0.0.0.0\char`\"{}},  }\item[{\mbox{\hyperlink{classstr}{str}} $\vert$ None }]{network\+\_\+interface = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Factory for local only controller.

Params:
    network_interface: leave it on None if you are unsure, else e. g.
        eth0, wlan0, etc.
    server_ip: The host IP to bind the server for incoming tcp
        connections on port 3333.
\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{83     ) -\/> LocalController:}
\DoxyCodeLine{84         \textcolor{stringliteral}{"{}"{}"{}Factory for local only controller.}}
\DoxyCodeLine{85 \textcolor{stringliteral}{}}
\DoxyCodeLine{86 \textcolor{stringliteral}{        Params:}}
\DoxyCodeLine{87 \textcolor{stringliteral}{            network\_interface: leave it on None if you are unsure, else e. g.}}
\DoxyCodeLine{88 \textcolor{stringliteral}{                eth0, wlan0, etc.}}
\DoxyCodeLine{89 \textcolor{stringliteral}{            server\_ip: The host IP to bind the server for incoming tcp}}
\DoxyCodeLine{90 \textcolor{stringliteral}{                connections on port 3333.}}
\DoxyCodeLine{91 \textcolor{stringliteral}{        "{}"{}"{}}}
\DoxyCodeLine{92 }
\DoxyCodeLine{93         lc\_hdl: LocalConnectionHandler = LocalConnectionHandler.create\_default(}
\DoxyCodeLine{94             controller\_data=controller\_data,}
\DoxyCodeLine{95             server\_ip=server\_ip,}
\DoxyCodeLine{96             network\_interface=network\_interface,}
\DoxyCodeLine{97         )}
\DoxyCodeLine{98 }
\DoxyCodeLine{99         lc: LocalController = LocalController(controller\_data)}
\DoxyCodeLine{100         lc.connection\_hdl = lc\_hdl}
\DoxyCodeLine{101 }
\DoxyCodeLine{102         \textcolor{keywordflow}{return} lc}
\DoxyCodeLine{103 }

\end{DoxyCode}
\mbox{\Hypertarget{classklyqa__ctl_1_1local__controller_1_1LocalController_a109a225aaf7b2944bedd487a755ef4ab}\label{classklyqa__ctl_1_1local__controller_1_1LocalController_a109a225aaf7b2944bedd487a755ef4ab}} 
\index{klyqa\_ctl.local\_controller.LocalController@{klyqa\_ctl.local\_controller.LocalController}!create\_standalone@{create\_standalone}}
\index{create\_standalone@{create\_standalone}!klyqa\_ctl.local\_controller.LocalController@{klyqa\_ctl.local\_controller.LocalController}}
\doxysubsubsection{\texorpdfstring{create\_standalone()}{create\_standalone()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classklyqa__ctl_1_1local__controller_1_1LocalController}{Local\+Controller}} klyqa\+\_\+ctl.\+local\+\_\+controller.\+Local\+Controller.\+create\+\_\+standalone (\begin{DoxyParamCaption}\item[{Any}]{cls,  }\item[{\mbox{\hyperlink{classstr}{str}} }]{server\+\_\+ip = {\ttfamily \char`\"{}0.0.0.0\char`\"{}},  }\item[{\mbox{\hyperlink{classstr}{str}} $\vert$ None }]{network\+\_\+interface = {\ttfamily None},  }\item[{bool }]{interactive\+\_\+prompts = {\ttfamily False} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Factory for local only controller.

param:
    network_interface: leave it on None if you are unsure, else e. g.
        eth0, wlan0, etc.
\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{110     ) -\/> LocalController:}
\DoxyCodeLine{111         \textcolor{stringliteral}{"{}"{}"{}Factory for local only controller.}}
\DoxyCodeLine{112 \textcolor{stringliteral}{}}
\DoxyCodeLine{113 \textcolor{stringliteral}{        param:}}
\DoxyCodeLine{114 \textcolor{stringliteral}{            network\_interface: leave it on None if you are unsure, else e. g.}}
\DoxyCodeLine{115 \textcolor{stringliteral}{                eth0, wlan0, etc.}}
\DoxyCodeLine{116 \textcolor{stringliteral}{        "{}"{}"{}}}
\DoxyCodeLine{117         controller\_data: ControllerData = await ControllerData.create\_default(}
\DoxyCodeLine{118             interactive\_prompts=interactive\_prompts, offline=\textcolor{keyword}{True}}
\DoxyCodeLine{119         )}
\DoxyCodeLine{120 }
\DoxyCodeLine{121         lc: LocalController = LocalController.create\_default(}
\DoxyCodeLine{122             controller\_data, server\_ip, network\_interface}
\DoxyCodeLine{123         )}
\DoxyCodeLine{124         \textcolor{keywordflow}{return} lc}

\end{DoxyCode}
\mbox{\Hypertarget{classklyqa__ctl_1_1local__controller_1_1LocalController_a28a9d1dad1c73734dbadc5f08279c169}\label{classklyqa__ctl_1_1local__controller_1_1LocalController_a28a9d1dad1c73734dbadc5f08279c169}} 
\index{klyqa\_ctl.local\_controller.LocalController@{klyqa\_ctl.local\_controller.LocalController}!send\_to\_device@{send\_to\_device}}
\index{send\_to\_device@{send\_to\_device}!klyqa\_ctl.local\_controller.LocalController@{klyqa\_ctl.local\_controller.LocalController}}
\doxysubsubsection{\texorpdfstring{send\_to\_device()}{send\_to\_device()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classstr}{str}} klyqa\+\_\+ctl.\+local\+\_\+controller.\+Local\+Controller.\+send\+\_\+to\+\_\+device (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{\mbox{\hyperlink{classstr}{str}}}]{unit\+\_\+id,  }\item[{\mbox{\hyperlink{classstr}{str}}}]{key,  }\item[{\mbox{\hyperlink{classstr}{str}}}]{command }\end{DoxyParamCaption})}

\begin{DoxyVerb}Send command string to device with unit id and aes key.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{28     \textcolor{keyword}{def }send\_to\_device(self, unit\_id: str, key: str, command: str) -\/> str:}
\DoxyCodeLine{29         \textcolor{stringliteral}{"{}"{}"{}Send command string to device with unit id and aes key."{}"{}"{}}}
\DoxyCodeLine{30 }
\DoxyCodeLine{31         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.connection\_hdl:}
\DoxyCodeLine{32             \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{33 }
\DoxyCodeLine{34         loop: asyncio.AbstractEventLoop = asyncio.get\_event\_loop()}
\DoxyCodeLine{35 }
\DoxyCodeLine{36         result: str = loop.run\_until\_complete(}
\DoxyCodeLine{37             self.send\_to\_device\_native(}
\DoxyCodeLine{38                 UnitId(unit\_id), key, Command(\_json=json.loads(command))}
\DoxyCodeLine{39             )}
\DoxyCodeLine{40         )}
\DoxyCodeLine{41 }
\DoxyCodeLine{42         \textcolor{keywordflow}{return} result}
\DoxyCodeLine{43 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1local__controller_1_1LocalController_a28a9d1dad1c73734dbadc5f08279c169_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1local__controller_1_1LocalController_a5285a4922d736c63b83ae0626424d9aa}\label{classklyqa__ctl_1_1local__controller_1_1LocalController_a5285a4922d736c63b83ae0626424d9aa}} 
\index{klyqa\_ctl.local\_controller.LocalController@{klyqa\_ctl.local\_controller.LocalController}!send\_to\_device\_native@{send\_to\_device\_native}}
\index{send\_to\_device\_native@{send\_to\_device\_native}!klyqa\_ctl.local\_controller.LocalController@{klyqa\_ctl.local\_controller.LocalController}}
\doxysubsubsection{\texorpdfstring{send\_to\_device\_native()}{send\_to\_device\_native()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classstr}{str}} klyqa\+\_\+ctl.\+local\+\_\+controller.\+Local\+Controller.\+send\+\_\+to\+\_\+device\+\_\+native (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{\mbox{\hyperlink{classklyqa__ctl_1_1general_1_1unit__id_1_1UnitId}{Unit\+Id}}}]{unit\+\_\+id,  }\item[{\mbox{\hyperlink{classstr}{str}}}]{key,  }\item[{\mbox{\hyperlink{classklyqa__ctl_1_1general_1_1general_1_1Command}{Command}}     }]{command }\end{DoxyParamCaption})}

\begin{DoxyVerb}Send json message from command object to device with unit id and
aes key.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{46     ) -\/> str:}
\DoxyCodeLine{47         \textcolor{stringliteral}{"{}"{}"{}Send json message from command object to device with unit id and}}
\DoxyCodeLine{48 \textcolor{stringliteral}{        aes key."{}"{}"{}}}
\DoxyCodeLine{49 }
\DoxyCodeLine{50         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.connection\_hdl:}
\DoxyCodeLine{51             \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{52 }
\DoxyCodeLine{53         self.connection\_hdl.controller\_data.aes\_keys[}
\DoxyCodeLine{54             \mbox{\hyperlink{classstr}{str}}(unit\_id)}
\DoxyCodeLine{55         ] = bytes.fromhex(key)}
\DoxyCodeLine{56 }
\DoxyCodeLine{57         msg\_answer: str = \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{58 }
\DoxyCodeLine{59         msg: Message | \textcolor{keywordtype}{None} = await self.connection\_hdl.send\_message(}
\DoxyCodeLine{60             send\_msgs=[command],}
\DoxyCodeLine{61             target\_device\_uid=unit\_id,}
\DoxyCodeLine{62             time\_to\_live\_secs=11111,}
\DoxyCodeLine{63         )}
\DoxyCodeLine{64         \textcolor{keywordflow}{if} msg:}
\DoxyCodeLine{65             \textcolor{keywordflow}{if} msg.exception:}
\DoxyCodeLine{66                 \textcolor{keywordflow}{raise} msg.exception}
\DoxyCodeLine{67             msg\_answer = msg.answer\_utf8}
\DoxyCodeLine{68 }
\DoxyCodeLine{69         \textcolor{keywordflow}{return} msg\_answer}
\DoxyCodeLine{70 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1local__controller_1_1LocalController_a5285a4922d736c63b83ae0626424d9aa_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1local__controller_1_1LocalController_aa10e92996b98046d4414be75d2b93305}\label{classklyqa__ctl_1_1local__controller_1_1LocalController_aa10e92996b98046d4414be75d2b93305}} 
\index{klyqa\_ctl.local\_controller.LocalController@{klyqa\_ctl.local\_controller.LocalController}!shutdown@{shutdown}}
\index{shutdown@{shutdown}!klyqa\_ctl.local\_controller.LocalController@{klyqa\_ctl.local\_controller.LocalController}}
\doxysubsubsection{\texorpdfstring{shutdown()}{shutdown()}}
{\footnotesize\ttfamily  None klyqa\+\_\+ctl.\+local\+\_\+controller.\+Local\+Controller.\+shutdown (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Shut down local controller.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{71     async \textcolor{keyword}{def }shutdown(self) -\/> None:}
\DoxyCodeLine{72         \textcolor{stringliteral}{"{}"{}"{}Shut down local controller."{}"{}"{}}}
\DoxyCodeLine{73 }
\DoxyCodeLine{74         \textcolor{keywordflow}{if} self.connection\_hdl:}
\DoxyCodeLine{75             await self.connection\_hdl.shutdown()}
\DoxyCodeLine{76 }

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{local__controller_8py}{local\+\_\+controller.\+py}}\end{DoxyCompactItemize}
