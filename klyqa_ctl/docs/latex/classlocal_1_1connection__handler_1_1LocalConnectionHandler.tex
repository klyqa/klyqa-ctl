\hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler}{}\doxysection{local.\+connection\+\_\+handler.\+Local\+Connection\+Handler Class Reference}
\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler}\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}


Inheritance diagram for local.\+connection\+\_\+handler.\+Local\+Connection\+Handler\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for local.\+connection\+\_\+handler.\+Local\+Connection\+Handler\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a0c713697632158651e042a125d3a5dc6}{\+\_\+\+\_\+init\+\_\+\+\_\+}} (self, \mbox{\hyperlink{classklyqa__ctl_1_1controller__data_1_1ControllerData}{Controller\+Data}} \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a8f938ae53b3c24bbdc02f377671cf263}{controller\+\_\+data}}, \mbox{\hyperlink{classstr}{str}} \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ab8a8460610614f6230bbf346fc532269}{server\+\_\+ip}}=\char`\"{}0.\+0.\+0.\+0\char`\"{}, \mbox{\hyperlink{classstr}{str}}$\vert$None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a159e60e3f78301ef89df33d9adaebbde}{network\+\_\+interface}}=None)
\item 
\mbox{\hyperlink{classstr}{str}}$\vert$None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a159e60e3f78301ef89df33d9adaebbde}{network\+\_\+interface}} (self)
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a6ef3ac8849218db44b014909d1f8146a}{network\+\_\+interface}} (self, \mbox{\hyperlink{classstr}{str}}$\vert$None network\+\_\+interface)
\item 
\mbox{\hyperlink{classklyqa__ctl_1_1controller__data_1_1ControllerData}{Controller\+Data}} \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a8f938ae53b3c24bbdc02f377671cf263}{controller\+\_\+data}} (self)
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ac7312a0c1fbe8ad9bcbd585e66e9e74c}{controller\+\_\+data}} (self, \mbox{\hyperlink{classklyqa__ctl_1_1controller__data_1_1ControllerData}{Controller\+Data}} controller\+\_\+data)
\item 
dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, \mbox{\hyperlink{classklyqa__ctl_1_1devices_1_1device_1_1Device}{Device}}\mbox{]} \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a4d307f6bd0b66f3cb9fac3057fc87972}{devices}} (self)
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a8d7418a9f89b4622dd814bd1c9ea4028}{devices}} (self, dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, \mbox{\hyperlink{classklyqa__ctl_1_1devices_1_1device_1_1Device}{Device}}\mbox{]} devices)
\item 
socket.\+socket$\vert$None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a00d69811c9433020eb1ec3b24383008e}{tcp}} (self)
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a0f8caa333a22c79922997c34d9d7b868}{tcp}} (self, socket.\+socket$\vert$None tcp)
\item 
socket.\+socket$\vert$None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a9ff5b865c574faa82b43f8578b0bd564}{udp}} (self)
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a577fb1c5fd541b50f25314acf0f9ee84}{udp}} (self, socket.\+socket$\vert$None udp)
\item 
\mbox{\hyperlink{classstr}{str}} \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ab8a8460610614f6230bbf346fc532269}{server\+\_\+ip}} (self)
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aebdf9201096932f18c4f28e1e084d267}{server\+\_\+ip}} (self, \mbox{\hyperlink{classstr}{str}} server\+\_\+ip)
\item 
dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, list\mbox{[}\mbox{\hyperlink{classklyqa__ctl_1_1general_1_1message_1_1Message}{Message}}\mbox{]}\mbox{]} \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a2c8ccb41ccfd636bd8a02042034375e8}{message\+\_\+queue}} (self)
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a1fc09795d2fca9fcaf4ef67f48810ce2}{message\+\_\+queue}} (self, dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, list\mbox{[}\mbox{\hyperlink{classklyqa__ctl_1_1general_1_1message_1_1Message}{Message}}\mbox{]}\mbox{]} message\+\_\+queue)
\item 
Task$\vert$None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a7e62dc20801dc3d832dbd1dd0373ba17}{handle\+\_\+connections\+\_\+task}} (self)
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a44ce408a0cb35854a4ac1dfe541090b4}{handle\+\_\+connections\+\_\+task}} (self, Task$\vert$None handle\+\_\+connections\+\_\+tasks)
\item 
bool \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_acf31322d19d937f12f736c7f4c3d9f22}{handle\+\_\+connections\+\_\+task\+\_\+end\+\_\+now}} (self)
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ac2ea1078fc435b2f80b549c4d17ab6d4}{handle\+\_\+connections\+\_\+task\+\_\+end\+\_\+now}} (self, bool handle\+\_\+connections\+\_\+task\+\_\+end\+\_\+now)
\item 
set\mbox{[}\mbox{\hyperlink{classstr}{str}}\mbox{]} \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a7e5e94d8da70d86c87eba78bcde9ff42}{current\+\_\+addr\+\_\+connections}} (self)
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a5c2443c4a93b9bfedd207119b0dbb9bc}{current\+\_\+addr\+\_\+connections}} (self, set\mbox{[}\mbox{\hyperlink{classstr}{str}}\mbox{]} current\+\_\+addr\+\_\+connections)
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a3510d32dbcb1a08fcd7796e2d8d2bdd6}{shutdown}} (self)
\item 
bool \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a28f05e11005dfc83e537f9e2e85f54d5}{bind\+\_\+ports}} (self)
\item 
Device\+Tcp\+Return \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a4ce11db96280d000941a91cb37df2842}{process\+\_\+device\+\_\+identity\+\_\+package}} (self, Tcp\+Connection connection, \mbox{\hyperlink{classbytes}{bytes}} data, \mbox{\hyperlink{classklyqa__ctl_1_1general_1_1general_1_1ReferencePass}{Reference\+Pass}} device\+\_\+ref)
\item 
Device\+Tcp\+Return \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ad1b4bfaedd513acfccbf1b12e36d5469}{process\+\_\+aes\+\_\+initial\+\_\+vector\+\_\+package}} (self, Tcp\+Connection connection, \mbox{\hyperlink{classbytes}{bytes}} data, \mbox{\hyperlink{classklyqa__ctl_1_1devices_1_1device_1_1Device}{Device}} device)
\item 
Device\+Tcp\+Return \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a46f68728bc59f0e5991bc390f67f2685}{process\+\_\+message\+\_\+answer\+\_\+package}} (self, Tcp\+Connection connection, \mbox{\hyperlink{classbytes}{bytes}} answer, \mbox{\hyperlink{classklyqa__ctl_1_1devices_1_1device_1_1Device}{Device}} device, \mbox{\hyperlink{classklyqa__ctl_1_1general_1_1message_1_1Message}{Message}}$\vert$None msg\+\_\+sent)
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a34b95b45332382bb830a3f1277878268}{remove\+\_\+msg\+\_\+from\+\_\+queue}} (self, \mbox{\hyperlink{classklyqa__ctl_1_1general_1_1message_1_1Message}{Message}} msg, \mbox{\hyperlink{classklyqa__ctl_1_1devices_1_1device_1_1Device}{Device}}$\vert$None device)
\item 
Device\+Tcp\+Return \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a900e05554022ee9ecb3ba5621369016d}{handle\+\_\+connection}} (self, \mbox{\hyperlink{classklyqa__ctl_1_1general_1_1general_1_1ReferencePass}{Reference\+Pass}} device\+\_\+ref, Tcp\+Connection connection, \mbox{\hyperlink{classklyqa__ctl_1_1general_1_1general_1_1ReferencePass}{Reference\+Pass}} msg\+\_\+sent\+\_\+r)
\item 
Device\+Tcp\+Return \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aaa28266e241c2e30e8acd468fab06fde}{process\+\_\+tcp\+\_\+package}} (self, Tcp\+Connection connection, \mbox{\hyperlink{classklyqa__ctl_1_1general_1_1general_1_1ReferencePass}{Reference\+Pass}} data\+\_\+ref, \mbox{\hyperlink{classklyqa__ctl_1_1general_1_1message_1_1Message}{Message}}$\vert$None msg\+\_\+sent, \mbox{\hyperlink{classklyqa__ctl_1_1general_1_1general_1_1ReferencePass}{Reference\+Pass}} device\+\_\+ref)
\item 
Device\+Tcp\+Return \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a0b582d0bf1523d1d0404867ab921539f}{device\+\_\+handle\+\_\+local\+\_\+tcp}} (self, \mbox{\hyperlink{classklyqa__ctl_1_1devices_1_1device_1_1Device}{Device}} device, Tcp\+Connection connection)
\item 
bool \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a69a2aabf1a7bc94f925f914df5ceae10}{send\+\_\+udp\+\_\+broadcast}} (self)
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aed3640a60ff23b9532ca91ebd2a9d01a}{standby}} (self)
\item 
tuple\mbox{[}list\mbox{[}Any\mbox{]}, list\mbox{[}Any\mbox{]}, list\mbox{[}Any\mbox{]}\mbox{]}$\vert$None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aa6b6ea4bb56f4c18b6906bab38c971a7}{read\+\_\+incoming\+\_\+tcp\+\_\+con\+\_\+task}} (self)
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a8b85c27ecdc845a205a4f36c38554ec8}{check\+\_\+messages\+\_\+time\+\_\+to\+\_\+live}} (self)
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aefd29b1e670e7076b749f7f21b0dc290}{connection\+\_\+tasks\+\_\+time\+\_\+to\+\_\+live}} (self, \mbox{\hyperlink{namespacelocal_1_1connection__handler_a41af5c536a6af4617df5c96742204c77}{int}} proc\+\_\+timeout\+\_\+secs=DEFAULT\+\_\+\+MAX\+\_\+\+COM\+\_\+\+PROC\+\_\+\+TIMEOUT\+\_\+\+SECS)
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a5e9277acd0b7bfa5a1e74417e0e10d86}{handle\+\_\+incoming\+\_\+tcp\+\_\+connection}} (self, \mbox{\hyperlink{namespacelocal_1_1connection__handler_a41af5c536a6af4617df5c96742204c77}{int}} proc\+\_\+timeout\+\_\+secs)
\item 
bool \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aa5d34422c7cb1784e408fef186a0b585}{handle\+\_\+connections}} (self, \mbox{\hyperlink{namespacelocal_1_1connection__handler_a41af5c536a6af4617df5c96742204c77}{int}} proc\+\_\+timeout\+\_\+secs=DEFAULT\+\_\+\+MAX\+\_\+\+COM\+\_\+\+PROC\+\_\+\+TIMEOUT\+\_\+\+SECS)
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aa780e39d1ce443d422a41064cc382d1f}{handle\+\_\+connections\+\_\+task\+\_\+stop}} (self)
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ae9be93d47c973e3c8afeed1b27fc7a4d}{search\+\_\+and\+\_\+send\+\_\+loop\+\_\+task\+\_\+alive}} (self)
\item 
\mbox{\hyperlink{classklyqa__ctl_1_1general_1_1message_1_1Message}{Message}}$\vert$None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aae9d106df606f3c68a146e0af7f60bba}{send\+\_\+message}} (self, list\mbox{[}\mbox{\hyperlink{classklyqa__ctl_1_1general_1_1general_1_1Command}{Command}}\mbox{]} send\+\_\+msgs, \mbox{\hyperlink{classklyqa__ctl_1_1general_1_1unit__id_1_1UnitId}{Unit\+Id}} target\+\_\+device\+\_\+uid, float time\+\_\+to\+\_\+live\+\_\+secs=-\/1.\+0, $\ast$$\ast$Any kwargs)
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_af714f4a1c0791c62d2d3990990a42cf4}{discover\+\_\+devices}} (self, float timeout\+\_\+secs=2.\+5)
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler}{Local\+Connection\+Handler}} \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ad2b49f5fff5ca621ba06840d5f550666}{create\+\_\+default}} (Any cls, \mbox{\hyperlink{classklyqa__ctl_1_1controller__data_1_1ControllerData}{Controller\+Data}} \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a8f938ae53b3c24bbdc02f377671cf263}{controller\+\_\+data}}, \mbox{\hyperlink{classstr}{str}} \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ab8a8460610614f6230bbf346fc532269}{server\+\_\+ip}}=\char`\"{}0.\+0.\+0.\+0\char`\"{}, \mbox{\hyperlink{classstr}{str}}$\vert$None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a159e60e3f78301ef89df33d9adaebbde}{network\+\_\+interface}}=None)
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a06a29b1bf1327ddeb687e4062ee1110d}{tcp}}
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a8707b5729524d2c0a4e5e1b2116d22c2}{udp}}
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aa8d21a3d613da986068dc05e8ea8c4a7}{message\+\_\+queue}}
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a828ca7aef56188a7dd4bd1b18b7cea85}{handle\+\_\+connections\+\_\+task\+\_\+end\+\_\+now}}
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ac3bb2f33c3dd9a46ba505569ec001ab3}{msg\+\_\+ttl\+\_\+task}}
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a1f5deccf8a67169afa7e67c53cd569e5}{handle\+\_\+connections\+\_\+task}}
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
Task$\vert$None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a68a3816075b8ed0c70771734a769c637}{\+\_\+\+\_\+send\+\_\+loop\+\_\+sleep}} (self)
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aaf4e9059c5e6eb4c022552d5e2b61393}{\+\_\+\+\_\+send\+\_\+loop\+\_\+sleep}} (self, Task$\vert$None send\+\_\+loop\+\_\+sleep)
\item 
list\mbox{[}tuple\mbox{[}Task, datetime.\+datetime, datetime.\+datetime\mbox{]}\mbox{]} \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ada6417ada8d133670d693cfc41524ace}{\+\_\+\+\_\+tasks\+\_\+done}} (self)
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ac9063fb97f6994d217bbf2de54e52284}{\+\_\+\+\_\+tasks\+\_\+done}} (self, list\mbox{[}tuple\mbox{[}Task, datetime.\+datetime, datetime.\+datetime\mbox{]}\mbox{]} tasks\+\_\+done)
\item 
list\mbox{[}tuple\mbox{[}Task, datetime.\+datetime\mbox{]}\mbox{]} \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a317b8c3b4d3ebaa16eeaed026c561426}{\+\_\+\+\_\+tasks\+\_\+undone}} (self)
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ac233ab5749ff539db60868d759194458}{\+\_\+\+\_\+tasks\+\_\+undone}} (self, list\mbox{[}tuple\mbox{[}Task, datetime.\+datetime\mbox{]}\mbox{]} tasks\+\_\+undone)
\item 
Task$\vert$None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a348da0cbea474b77e02a7960340aed36}{\+\_\+\+\_\+read\+\_\+tcp\+\_\+task}} (self)
\item 
None \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ab55d546556c0b8e39bd0f147765e233f}{\+\_\+\+\_\+read\+\_\+tcp\+\_\+task}} (self, Task$\vert$None read\+\_\+tcp\+\_\+task)
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a87b7dc39e44da267c0eefd59d2b2672e}{\+\_\+attr\+\_\+current\+\_\+addr\+\_\+connections}}
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_af3e5bcdcf6810250f40c567df909e41f}{\+\_\+attr\+\_\+network\+\_\+interface}}
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ae4afde55789d67ca141f32cd0f2c2493}{\+\_\+attr\+\_\+controller\+\_\+data}}
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a6493a246d69932bec84ca4e7b6b388fe}{\+\_\+attr\+\_\+devices}}
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a8a5ac8d6f4dea27c50196afd9652a346}{\+\_\+attr\+\_\+tcp}}
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ad5c7aa585d0caeb47f8faa346190a3a7}{\+\_\+attr\+\_\+udp}}
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aecb45be484a4b7c1ae8c1e9bca8c3ee7}{\+\_\+attr\+\_\+server\+\_\+ip}}
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a9743831efb2f611d2348a5602e7ef302}{\+\_\+attr\+\_\+message\+\_\+queue}}
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a3f66f22f149d55906c40fff1df106447}{\+\_\+\+\_\+attr\+\_\+send\+\_\+loop\+\_\+sleep}}
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a98999cb56a4b93a97541deaf9cb3cb35}{\+\_\+\+\_\+attr\+\_\+tasks\+\_\+done}}
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a129a15e834ca7f110952eb7e58ac0013}{\+\_\+\+\_\+attr\+\_\+tasks\+\_\+undone}}
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a34d28f73c88f0446897aa36b5c7b10ac}{\+\_\+attr\+\_\+handlec\+\_\+connections\+\_\+task}}
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_afab4cc85b5f9fa33a1e32e71433c3c2b}{\+\_\+attr\+\_\+handle\+\_\+connections\+\_\+task\+\_\+end\+\_\+now}}
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a1feda3b6377035d969d4e21b4540ef14}{\+\_\+\+\_\+attr\+\_\+read\+\_\+tcp\+\_\+task}}
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a2b51fa92e94e68a7ce1cfa9476beee3b}{\+\_\+\+\_\+send\+\_\+loop\+\_\+sleep}}
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aad755d50b86f166cc07d60a73be07d27}{\+\_\+\+\_\+tasks\+\_\+undone}}
\item 
\mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ab01f2e382ae425e5bc2818772d059a56}{\+\_\+\+\_\+read\+\_\+tcp\+\_\+task}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}Data communicator for local device connection.

Important: Call async function shutdown() after using send method,
or the send message loop will keep running.\end{DoxyVerb}
 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a0c713697632158651e042a125d3a5dc6}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a0c713697632158651e042a125d3a5dc6}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_\_init\_\_@{\_\_init\_\_}}
\index{\_\_init\_\_@{\_\_init\_\_}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_\_init\_\_()}{\_\_init\_\_()}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{\mbox{\hyperlink{classklyqa__ctl_1_1controller__data_1_1ControllerData}{Controller\+Data}}}]{controller\+\_\+data,  }\item[{\mbox{\hyperlink{classstr}{str}} }]{server\+\_\+ip = {\ttfamily \char`\"{}0.0.0.0\char`\"{}},  }\item[{\mbox{\hyperlink{classstr}{str}} $\vert$ None }]{network\+\_\+interface = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Initialize local connection handler.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{74     ) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{75         \textcolor{stringliteral}{"{}"{}"{}Initialize local connection handler."{}"{}"{}}}
\DoxyCodeLine{76 }
\DoxyCodeLine{77         self.\_attr\_controller\_data: ControllerData = controller\_data}
\DoxyCodeLine{78         self.\_attr\_devices: dict[str, Device] = controller\_data.devices}
\DoxyCodeLine{79         self.\_attr\_tcp: socket.socket | \textcolor{keywordtype}{None} = \textcolor{keywordtype}{None}}
\DoxyCodeLine{80         self.\_attr\_udp: socket.socket | \textcolor{keywordtype}{None} = \textcolor{keywordtype}{None}}
\DoxyCodeLine{81         self.\_attr\_server\_ip: str = server\_ip}
\DoxyCodeLine{82         \textcolor{comment}{\# here message queue key needs to be string not UnitId to be hashable}}
\DoxyCodeLine{83         \textcolor{comment}{\# for dictionaries and sets}}
\DoxyCodeLine{84         self.\_attr\_message\_queue: dict[str, list[Message]] = \{\}}
\DoxyCodeLine{85         self.\_\_attr\_send\_loop\_sleep: Task | \textcolor{keywordtype}{None} = \textcolor{keywordtype}{None}}
\DoxyCodeLine{86         self.\_\_attr\_tasks\_done: list[}
\DoxyCodeLine{87             tuple[Task, datetime.datetime, datetime.datetime]}
\DoxyCodeLine{88         ] = []}
\DoxyCodeLine{89         self.\_\_attr\_tasks\_undone: list[tuple[Task, datetime.datetime]] = []}
\DoxyCodeLine{90         self.\_attr\_handlec\_connections\_task: Task | \textcolor{keywordtype}{None} = \textcolor{keywordtype}{None}}
\DoxyCodeLine{91         self.\_attr\_handle\_connections\_task\_end\_now: bool = \textcolor{keyword}{False}}
\DoxyCodeLine{92         self.\_\_attr\_read\_tcp\_task: Task | \textcolor{keywordtype}{None} = \textcolor{keywordtype}{None}}
\DoxyCodeLine{93         self.msg\_ttl\_task: Task | \textcolor{keywordtype}{None} = \textcolor{keywordtype}{None}}
\DoxyCodeLine{94         self.\_attr\_current\_addr\_connections = set()}
\DoxyCodeLine{95         self.\_attr\_network\_interface: str | \textcolor{keywordtype}{None} = network\_interface}
\DoxyCodeLine{96 }

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a348da0cbea474b77e02a7960340aed36}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a348da0cbea474b77e02a7960340aed36}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_\_read\_tcp\_task@{\_\_read\_tcp\_task}}
\index{\_\_read\_tcp\_task@{\_\_read\_tcp\_task}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_\_read\_tcp\_task()}{\_\_read\_tcp\_task()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily  Task $\vert$ None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+\+\_\+read\+\_\+tcp\+\_\+task (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{207     \textcolor{keyword}{def }\_\_read\_tcp\_task(self) -\/> Task | None:}
\DoxyCodeLine{208         \textcolor{keywordflow}{return} self.\_\_attr\_read\_tcp\_task}
\DoxyCodeLine{209 }

\end{DoxyCode}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ab55d546556c0b8e39bd0f147765e233f}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ab55d546556c0b8e39bd0f147765e233f}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_\_read\_tcp\_task@{\_\_read\_tcp\_task}}
\index{\_\_read\_tcp\_task@{\_\_read\_tcp\_task}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_\_read\_tcp\_task()}{\_\_read\_tcp\_task()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+\+\_\+read\+\_\+tcp\+\_\+task (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{Task $\vert$ None}]{read\+\_\+tcp\+\_\+task }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{211     \textcolor{keyword}{def }\_\_read\_tcp\_task(self, read\_tcp\_task: Task | \textcolor{keywordtype}{None}) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{212         self.\_\_attr\_read\_tcp\_task = read\_tcp\_task}
\DoxyCodeLine{213 }

\end{DoxyCode}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a68a3816075b8ed0c70771734a769c637}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a68a3816075b8ed0c70771734a769c637}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_\_send\_loop\_sleep@{\_\_send\_loop\_sleep}}
\index{\_\_send\_loop\_sleep@{\_\_send\_loop\_sleep}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_\_send\_loop\_sleep()}{\_\_send\_loop\_sleep()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily  Task $\vert$ None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+\+\_\+send\+\_\+loop\+\_\+sleep (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{154     \textcolor{keyword}{def }\_\_send\_loop\_sleep(self) -\/> Task | None:}
\DoxyCodeLine{155         \textcolor{keywordflow}{return} self.\_\_attr\_send\_loop\_sleep}
\DoxyCodeLine{156 }

\end{DoxyCode}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aaf4e9059c5e6eb4c022552d5e2b61393}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aaf4e9059c5e6eb4c022552d5e2b61393}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_\_send\_loop\_sleep@{\_\_send\_loop\_sleep}}
\index{\_\_send\_loop\_sleep@{\_\_send\_loop\_sleep}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_\_send\_loop\_sleep()}{\_\_send\_loop\_sleep()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+\+\_\+send\+\_\+loop\+\_\+sleep (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{Task $\vert$ None}]{send\+\_\+loop\+\_\+sleep }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{158     \textcolor{keyword}{def }\_\_send\_loop\_sleep(self, send\_loop\_sleep: Task | \textcolor{keywordtype}{None}) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{159         self.\_\_attr\_send\_loop\_sleep = send\_loop\_sleep}
\DoxyCodeLine{160 }

\end{DoxyCode}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ada6417ada8d133670d693cfc41524ace}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ada6417ada8d133670d693cfc41524ace}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_\_tasks\_done@{\_\_tasks\_done}}
\index{\_\_tasks\_done@{\_\_tasks\_done}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_\_tasks\_done()}{\_\_tasks\_done()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily  list\mbox{[}tuple\mbox{[}Task, datetime.\+datetime, datetime.\+datetime\mbox{]}\mbox{]} local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+\+\_\+tasks\+\_\+done (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{164     ) -\/> list[tuple[Task, datetime.datetime, datetime.datetime]]:}
\DoxyCodeLine{165         \textcolor{keywordflow}{return} self.\_\_attr\_tasks\_done}
\DoxyCodeLine{166 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ada6417ada8d133670d693cfc41524ace_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ac9063fb97f6994d217bbf2de54e52284}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ac9063fb97f6994d217bbf2de54e52284}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_\_tasks\_done@{\_\_tasks\_done}}
\index{\_\_tasks\_done@{\_\_tasks\_done}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_\_tasks\_done()}{\_\_tasks\_done()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+\+\_\+tasks\+\_\+done (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{list\mbox{[}tuple\mbox{[}Task, datetime.\+datetime, datetime.\+datetime\mbox{]}\mbox{]}}]{tasks\+\_\+done }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{171     ) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{172         self.\_\_attr\_tasks\_done = tasks\_done}
\DoxyCodeLine{173 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ac9063fb97f6994d217bbf2de54e52284_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ac9063fb97f6994d217bbf2de54e52284_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a317b8c3b4d3ebaa16eeaed026c561426}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a317b8c3b4d3ebaa16eeaed026c561426}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_\_tasks\_undone@{\_\_tasks\_undone}}
\index{\_\_tasks\_undone@{\_\_tasks\_undone}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_\_tasks\_undone()}{\_\_tasks\_undone()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily  list\mbox{[}tuple\mbox{[}Task, datetime.\+datetime\mbox{]}\mbox{]} local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+\+\_\+tasks\+\_\+undone (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{175     \textcolor{keyword}{def }\_\_tasks\_undone(self) -\/> list[tuple[Task, datetime.datetime]]:}
\DoxyCodeLine{176         \textcolor{keywordflow}{return} self.\_\_attr\_tasks\_undone}
\DoxyCodeLine{177 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a317b8c3b4d3ebaa16eeaed026c561426_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ac233ab5749ff539db60868d759194458}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ac233ab5749ff539db60868d759194458}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_\_tasks\_undone@{\_\_tasks\_undone}}
\index{\_\_tasks\_undone@{\_\_tasks\_undone}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_\_tasks\_undone()}{\_\_tasks\_undone()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+\+\_\+tasks\+\_\+undone (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{list\mbox{[}tuple\mbox{[}Task, datetime.\+datetime\mbox{]}\mbox{]}     }]{tasks\+\_\+undone }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{181     ) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{182         self.\_\_attr\_tasks\_undone = tasks\_undone}
\DoxyCodeLine{183 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ac233ab5749ff539db60868d759194458_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a28f05e11005dfc83e537f9e2e85f54d5}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a28f05e11005dfc83e537f9e2e85f54d5}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!bind\_ports@{bind\_ports}}
\index{bind\_ports@{bind\_ports}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{bind\_ports()}{bind\_ports()}}
{\footnotesize\ttfamily  bool local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+bind\+\_\+ports (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}bind ports.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{248     async \textcolor{keyword}{def }bind\_ports(self) -\/> bool:}
\DoxyCodeLine{249         \textcolor{stringliteral}{"{}"{}"{}bind ports."{}"{}"{}}}
\DoxyCodeLine{250 }
\DoxyCodeLine{251         server\_address: tuple[str, int]}
\DoxyCodeLine{252 }
\DoxyCodeLine{253         \textcolor{keywordflow}{if} (}
\DoxyCodeLine{254             \textcolor{keywordflow}{not} self.udp}
\DoxyCodeLine{255         ):  \textcolor{comment}{\# or self.udp.\_closed or self.udp.\_\_getstate\_\_() == -\/1:}}
\DoxyCodeLine{256             self.udp = socket.socket(socket.AF\_INET, socket.SOCK\_DGRAM)}
\DoxyCodeLine{257             self.udp.setsockopt(socket.SOL\_SOCKET, socket.SO\_BROADCAST, 1)}
\DoxyCodeLine{258             self.udp.setsockopt(socket.SOL\_SOCKET, socket.SO\_REUSEADDR, 1)}
\DoxyCodeLine{259             \textcolor{keywordflow}{if} self.network\_interface \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{260                 self.udp.setsockopt(}
\DoxyCodeLine{261                     socket.SOL\_SOCKET,}
\DoxyCodeLine{262                     SO\_BINDTODEVICE\_LINUX,}
\DoxyCodeLine{263                     \mbox{\hyperlink{classstr}{str}}(self.network\_interface + \textcolor{stringliteral}{"{}\(\backslash\)0"{}}).encode(\textcolor{stringliteral}{"{}utf-\/8"{}}),}
\DoxyCodeLine{264                 )}
\DoxyCodeLine{265             server\_address = (self.server\_ip, 2222)}
\DoxyCodeLine{266             \textcolor{keywordflow}{try}:}
\DoxyCodeLine{267                 self.udp.bind(server\_address)}
\DoxyCodeLine{268             \textcolor{keywordflow}{except} (socket.herror, socket.gaierror, socket.timeout):}
\DoxyCodeLine{269                 LOGGER.error(}
\DoxyCodeLine{270                     \textcolor{stringliteral}{"{}Error on opening and binding the udp port 2222 on host"{}}}
\DoxyCodeLine{271                     \textcolor{stringliteral}{"{} for initiating the local device communication."{}}}
\DoxyCodeLine{272                 )}
\DoxyCodeLine{273                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_ad6b753e482e539892c57f8144cf213cb}{task\_log\_trace\_ex}}()}
\DoxyCodeLine{274                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}}
\DoxyCodeLine{275             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}Bound UDP port 2222"{}})}
\DoxyCodeLine{276 }
\DoxyCodeLine{277         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.tcp:  \textcolor{comment}{\# or self.tcp.closed() or self.tcp.fileno() == -\/1:}}
\DoxyCodeLine{278             self.tcp = socket.socket(socket.AF\_INET, socket.SOCK\_STREAM)}
\DoxyCodeLine{279             self.tcp.setsockopt(socket.SOL\_SOCKET, socket.SO\_REUSEADDR, 1)}
\DoxyCodeLine{280 }
\DoxyCodeLine{281             \textcolor{keywordflow}{if} self.network\_interface \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{282                 self.tcp.setsockopt(}
\DoxyCodeLine{283                     socket.SOL\_SOCKET,}
\DoxyCodeLine{284                     SO\_BINDTODEVICE\_LINUX,}
\DoxyCodeLine{285                     \mbox{\hyperlink{classstr}{str}}(self.network\_interface + \textcolor{stringliteral}{"{}\(\backslash\)0"{}}).encode(\textcolor{stringliteral}{"{}utf-\/8"{}}),}
\DoxyCodeLine{286                 )}
\DoxyCodeLine{287             server\_address = (\textcolor{stringliteral}{"{}0.0.0.0"{}}, 3333)}
\DoxyCodeLine{288             \textcolor{keywordflow}{try}:}
\DoxyCodeLine{289                 self.tcp.bind(server\_address)}
\DoxyCodeLine{290             \textcolor{keywordflow}{except} (socket.herror, socket.gaierror, socket.timeout):}
\DoxyCodeLine{291                 LOGGER.error(}
\DoxyCodeLine{292                     \textcolor{stringliteral}{"{}Error on opening and binding the tcp port 3333 on host"{}}}
\DoxyCodeLine{293                     \textcolor{stringliteral}{"{} for initiating the local device communication."{}}}
\DoxyCodeLine{294                 )}
\DoxyCodeLine{295                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_ad6b753e482e539892c57f8144cf213cb}{task\_log\_trace\_ex}}()}
\DoxyCodeLine{296                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}}
\DoxyCodeLine{297             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}Bound TCP port 3333"{}})}
\DoxyCodeLine{298             self.tcp.listen(1)}
\DoxyCodeLine{299 }
\DoxyCodeLine{300         \textcolor{keywordflow}{return} \textcolor{keyword}{True}}
\DoxyCodeLine{301 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a28f05e11005dfc83e537f9e2e85f54d5_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a28f05e11005dfc83e537f9e2e85f54d5_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a8b85c27ecdc845a205a4f36c38554ec8}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a8b85c27ecdc845a205a4f36c38554ec8}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!check\_messages\_time\_to\_live@{check\_messages\_time\_to\_live}}
\index{check\_messages\_time\_to\_live@{check\_messages\_time\_to\_live}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{check\_messages\_time\_to\_live()}{check\_messages\_time\_to\_live()}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+check\+\_\+messages\+\_\+time\+\_\+to\+\_\+live (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Check message queue for end of live messages.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{897     async \textcolor{keyword}{def }check\_messages\_time\_to\_live(self) -\/> None:}
\DoxyCodeLine{898         \textcolor{stringliteral}{"{}"{}"{}Check message queue for end of live messages."{}"{}"{}}}
\DoxyCodeLine{899         to\_del: list[str] = []}
\DoxyCodeLine{900         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{901             \textcolor{keywordflow}{while} \textcolor{keyword}{True}:}
\DoxyCodeLine{902                 to\_del = []}
\DoxyCodeLine{903                 \textcolor{keywordflow}{for} uid, msgs \textcolor{keywordflow}{in} self.message\_queue.items():}
\DoxyCodeLine{904                     \textcolor{keywordflow}{for} msg \textcolor{keywordflow}{in} msgs:}
\DoxyCodeLine{905                         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} await msg.check\_msg\_ttl():}
\DoxyCodeLine{906                             msgs.remove(msg)}
\DoxyCodeLine{907                         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.message\_queue[uid]:}
\DoxyCodeLine{908                             \textcolor{comment}{\# del self.message\_queue[uid]}}
\DoxyCodeLine{909                             to\_del.append(uid)}
\DoxyCodeLine{910                             \textcolor{keywordflow}{break}}
\DoxyCodeLine{911                 \textcolor{keywordflow}{for} uid \textcolor{keywordflow}{in} to\_del:}
\DoxyCodeLine{912                     del self.message\_queue[uid]}
\DoxyCodeLine{913                 await asyncio.sleep(0.05)}
\DoxyCodeLine{914         \textcolor{keywordflow}{except} asyncio.CancelledError:}
\DoxyCodeLine{915             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}Message queue time to live task ended."{}})}
\DoxyCodeLine{916 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a8b85c27ecdc845a205a4f36c38554ec8_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aefd29b1e670e7076b749f7f21b0dc290}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aefd29b1e670e7076b749f7f21b0dc290}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!connection\_tasks\_time\_to\_live@{connection\_tasks\_time\_to\_live}}
\index{connection\_tasks\_time\_to\_live@{connection\_tasks\_time\_to\_live}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{connection\_tasks\_time\_to\_live()}{connection\_tasks\_time\_to\_live()}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+connection\+\_\+tasks\+\_\+time\+\_\+to\+\_\+live (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{\mbox{\hyperlink{namespacelocal_1_1connection__handler_a41af5c536a6af4617df5c96742204c77}{int}} }]{proc\+\_\+timeout\+\_\+secs = {\ttfamily DEFAULT\+\_\+MAX\+\_\+COM\+\_\+PROC\+\_\+TIMEOUT\+\_\+SECS} }\end{DoxyParamCaption})}

\begin{DoxyVerb}End connection tasks with run out time to live.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{919     ) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{920         \textcolor{stringliteral}{"{}"{}"{}End connection tasks with run out time to live."{}"{}"{}}}
\DoxyCodeLine{921         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{922             tasks\_undone\_new: list[Any] = []}
\DoxyCodeLine{923             \textcolor{keywordflow}{for} task, started \textcolor{keywordflow}{in} self.\_\_tasks\_undone:}
\DoxyCodeLine{924                 \textcolor{keywordflow}{if} task.done():}
\DoxyCodeLine{925                     self.\_\_tasks\_done.append(}
\DoxyCodeLine{926                         (task, started, datetime.datetime.now())}
\DoxyCodeLine{927                     )}
\DoxyCodeLine{928                     exception: Any = task.exception()}
\DoxyCodeLine{929                     \textcolor{keywordflow}{if} exception:}
\DoxyCodeLine{930                         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(}
\DoxyCodeLine{931                             \textcolor{stringliteral}{"{}Exception error device connection handler task in"{}}}
\DoxyCodeLine{932                             f\textcolor{stringliteral}{"{} \{task.get\_coro()\}: \{exception\}"{}}}
\DoxyCodeLine{933                         )}
\DoxyCodeLine{934                 \textcolor{keywordflow}{else}:}
\DoxyCodeLine{935                     \textcolor{keywordflow}{if} datetime.datetime.now() -\/ started > datetime.timedelta(}
\DoxyCodeLine{936                         seconds=proc\_timeout\_secs}
\DoxyCodeLine{937                     ):}
\DoxyCodeLine{938                         task.cancel(}
\DoxyCodeLine{939                             msg=(}
\DoxyCodeLine{940                                 \textcolor{stringliteral}{"{}timeout of process of"{}}}
\DoxyCodeLine{941                                 f\textcolor{stringliteral}{"{} \{proc\_timeout\_secs\} seconds."{}}}
\DoxyCodeLine{942                             )}
\DoxyCodeLine{943                         )}
\DoxyCodeLine{944                     tasks\_undone\_new.append((task, started))}
\DoxyCodeLine{945             self.\_\_tasks\_undone = tasks\_undone\_new}
\DoxyCodeLine{946 }
\DoxyCodeLine{947         \textcolor{keywordflow}{except} CancelledError:}
\DoxyCodeLine{948             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}\_\_tasks\_undone check cancelled."{}})}
\DoxyCodeLine{949 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aefd29b1e670e7076b749f7f21b0dc290_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a8f938ae53b3c24bbdc02f377671cf263}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a8f938ae53b3c24bbdc02f377671cf263}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!controller\_data@{controller\_data}}
\index{controller\_data@{controller\_data}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{controller\_data()}{controller\_data()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classklyqa__ctl_1_1controller__data_1_1ControllerData}{Controller\+Data}} local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+controller\+\_\+data (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{106     \textcolor{keyword}{def }controller\_data(self) -\/> ControllerData:}
\DoxyCodeLine{107         \textcolor{keywordflow}{return} self.\_attr\_controller\_data}
\DoxyCodeLine{108 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a8f938ae53b3c24bbdc02f377671cf263_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ac7312a0c1fbe8ad9bcbd585e66e9e74c}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ac7312a0c1fbe8ad9bcbd585e66e9e74c}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!controller\_data@{controller\_data}}
\index{controller\_data@{controller\_data}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{controller\_data()}{controller\_data()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+controller\+\_\+data (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{\mbox{\hyperlink{classklyqa__ctl_1_1controller__data_1_1ControllerData}{Controller\+Data}}}]{controller\+\_\+data }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{110     \textcolor{keyword}{def }controller\_data(self, controller\_data: ControllerData) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{111         self.\_attr\_controller\_data = controller\_data}
\DoxyCodeLine{112 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ac7312a0c1fbe8ad9bcbd585e66e9e74c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ac7312a0c1fbe8ad9bcbd585e66e9e74c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ad2b49f5fff5ca621ba06840d5f550666}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ad2b49f5fff5ca621ba06840d5f550666}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!create\_default@{create\_default}}
\index{create\_default@{create\_default}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{create\_default()}{create\_default()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classlocal_1_1connection__handler_1_1LocalConnectionHandler}{Local\+Connection\+Handler}} local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+create\+\_\+default (\begin{DoxyParamCaption}\item[{Any}]{cls,  }\item[{\mbox{\hyperlink{classklyqa__ctl_1_1controller__data_1_1ControllerData}{Controller\+Data}}}]{controller\+\_\+data,  }\item[{\mbox{\hyperlink{classstr}{str}} }]{server\+\_\+ip = {\ttfamily \char`\"{}0.0.0.0\char`\"{}},  }\item[{\mbox{\hyperlink{classstr}{str}} $\vert$ None }]{network\+\_\+interface = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Factory for local only controller.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{1218     ) -\/> LocalConnectionHandler:}
\DoxyCodeLine{1219         \textcolor{stringliteral}{"{}"{}"{}Factory for local only controller."{}"{}"{}}}
\DoxyCodeLine{1220         lc\_hdl: LocalConnectionHandler = LocalConnectionHandler(}
\DoxyCodeLine{1221             controller\_data,}
\DoxyCodeLine{1222             server\_ip=server\_ip,}
\DoxyCodeLine{1223             network\_interface=network\_interface,}
\DoxyCodeLine{1224         )}
\DoxyCodeLine{1225 }
\DoxyCodeLine{1226         \textcolor{keywordflow}{return} lc\_hdl}

\end{DoxyCode}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a7e5e94d8da70d86c87eba78bcde9ff42}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a7e5e94d8da70d86c87eba78bcde9ff42}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!current\_addr\_connections@{current\_addr\_connections}}
\index{current\_addr\_connections@{current\_addr\_connections}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{current\_addr\_connections()}{current\_addr\_connections()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily  set\mbox{[}\mbox{\hyperlink{classstr}{str}}\mbox{]} local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+current\+\_\+addr\+\_\+connections (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{215     \textcolor{keyword}{def }current\_addr\_connections(self) -\/> set[str]:}
\DoxyCodeLine{216         \textcolor{keywordflow}{return} self.\_attr\_current\_addr\_connections}
\DoxyCodeLine{217 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a7e5e94d8da70d86c87eba78bcde9ff42_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a5c2443c4a93b9bfedd207119b0dbb9bc}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a5c2443c4a93b9bfedd207119b0dbb9bc}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!current\_addr\_connections@{current\_addr\_connections}}
\index{current\_addr\_connections@{current\_addr\_connections}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{current\_addr\_connections()}{current\_addr\_connections()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+current\+\_\+addr\+\_\+connections (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{set\mbox{[}\mbox{\hyperlink{classstr}{str}}\mbox{]}     }]{current\+\_\+addr\+\_\+connections }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{221     ) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{222         self.\_attr\_current\_addr\_connections = current\_addr\_connections}
\DoxyCodeLine{223 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a5c2443c4a93b9bfedd207119b0dbb9bc_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a5c2443c4a93b9bfedd207119b0dbb9bc_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a0b582d0bf1523d1d0404867ab921539f}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a0b582d0bf1523d1d0404867ab921539f}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!device\_handle\_local\_tcp@{device\_handle\_local\_tcp}}
\index{device\_handle\_local\_tcp@{device\_handle\_local\_tcp}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{device\_handle\_local\_tcp()}{device\_handle\_local\_tcp()}}
{\footnotesize\ttfamily  Device\+Tcp\+Return local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+device\+\_\+handle\+\_\+local\+\_\+tcp (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{\mbox{\hyperlink{classklyqa__ctl_1_1devices_1_1device_1_1Device}{Device}}}]{device,  }\item[{Tcp\+Connection     }]{connection }\end{DoxyParamCaption})}

\begin{DoxyVerb}Handle the incoming tcp connection to the device.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{743     ) -\/> DeviceTcpReturn:}
\DoxyCodeLine{744         \textcolor{stringliteral}{"{}"{}"{}Handle the incoming tcp connection to the device."{}"{}"{}}}
\DoxyCodeLine{745 }
\DoxyCodeLine{746         return\_state: DeviceTcpReturn = DeviceTcpReturn.NOTHING\_DONE}
\DoxyCodeLine{747 }
\DoxyCodeLine{748         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{749             r\_device: ReferencePass = ReferencePass(device)}
\DoxyCodeLine{750             msg\_sent\_ref: ReferencePass = ReferencePass(\textcolor{keywordtype}{None})}
\DoxyCodeLine{751 }
\DoxyCodeLine{752             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(}
\DoxyCodeLine{753                 f\textcolor{stringliteral}{"{}New tcp connection to device at \{connection.address\}"{}}}
\DoxyCodeLine{754             )}
\DoxyCodeLine{755             \textcolor{keywordflow}{try}:}
\DoxyCodeLine{756                 return\_state = await self.handle\_connection(}
\DoxyCodeLine{757                     r\_device, connection=connection, msg\_sent\_r=msg\_sent\_ref}
\DoxyCodeLine{758                 )}
\DoxyCodeLine{759             \textcolor{keywordflow}{except} CancelledError:}
\DoxyCodeLine{760                 LOGGER.error(}
\DoxyCodeLine{761                     f\textcolor{stringliteral}{"{}Cancelled local send to \{connection.address['ip']\}!"{}}}
\DoxyCodeLine{762                 )}
\DoxyCodeLine{763             \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} exception:}
\DoxyCodeLine{764                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_ad6b753e482e539892c57f8144cf213cb}{task\_log\_trace\_ex}}()}
\DoxyCodeLine{765                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_abab49b300927a080244615ee3ab494e3}{task\_log\_error}}(}
\DoxyCodeLine{766                     \textcolor{stringliteral}{"{}Unhandled exception during local communication! "{}}}
\DoxyCodeLine{767                     + \mbox{\hyperlink{classstr}{str}}(\mbox{\hyperlink{namespaceklyqa__ctl_1_1vc1__vapp_aeb8c49847d28d73ca473f0cb70f7c826}{type}}(exception))}
\DoxyCodeLine{768                 )}
\DoxyCodeLine{769                 msg\_sent\_ref.ref.exception = exception}
\DoxyCodeLine{770             \textcolor{keywordflow}{finally}:}
\DoxyCodeLine{771                 device = r\_device.ref}
\DoxyCodeLine{772                 \textcolor{keywordflow}{if} connection.socket \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{773                     \textcolor{keywordflow}{try}:}
\DoxyCodeLine{774                         connection.socket.shutdown(socket.SHUT\_RDWR)}
\DoxyCodeLine{775                         connection.socket.close()}
\DoxyCodeLine{776                     \textcolor{keywordflow}{finally}:}
\DoxyCodeLine{777                         connection.socket = \textcolor{keywordtype}{None}}
\DoxyCodeLine{778                 self.current\_addr\_connections.remove(}
\DoxyCodeLine{779                     \mbox{\hyperlink{classstr}{str}}(connection.address[\textcolor{stringliteral}{"{}ip"{}}])}
\DoxyCodeLine{780                 )}
\DoxyCodeLine{781 }
\DoxyCodeLine{782                 unit\_id: str = (}
\DoxyCodeLine{783                     f\textcolor{stringliteral}{"{} Unit-\/ID: \{device.u\_id\}"{}} \textcolor{keywordflow}{if} device.u\_id \textcolor{keywordflow}{else} \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{784                 )}
\DoxyCodeLine{785 }
\DoxyCodeLine{786                 \textcolor{comment}{\# if return\_state not in [}}
\DoxyCodeLine{787                 \textcolor{comment}{\#     DeviceTcpReturn.SENT,}}
\DoxyCodeLine{788                 \textcolor{comment}{\#     DeviceTcpReturn.ANSWERED,}}
\DoxyCodeLine{789                 \textcolor{comment}{\# ]:}}
\DoxyCodeLine{790                 \textcolor{keywordflow}{if} return\_state \textcolor{keywordflow}{in} [}
\DoxyCodeLine{791                     DeviceTcpReturn.TCP\_SOCKET\_CLOSED\_UNEXPECTEDLY}
\DoxyCodeLine{792                 ]:}
\DoxyCodeLine{793                     \textcolor{comment}{\# Something bad could have happened with the device.}}
\DoxyCodeLine{794                     \textcolor{comment}{\# Remove the message precautiously from the}}
\DoxyCodeLine{795                     \textcolor{comment}{\# message queue.}}
\DoxyCodeLine{796                     msg\_sent: Message = msg\_sent\_ref.ref}
\DoxyCodeLine{797                     \textcolor{keywordflow}{if} msg\_sent:}
\DoxyCodeLine{798                         await msg\_sent.call\_cb()}
\DoxyCodeLine{799                         self.remove\_msg\_from\_queue(msg\_sent, device)}
\DoxyCodeLine{800 }
\DoxyCodeLine{801                 \textcolor{keywordflow}{if} \mbox{\hyperlink{classstr}{str}}(device.u\_id) \textcolor{keywordflow}{in} self.devices:}
\DoxyCodeLine{802                     device\_b: Device = self.devices[device.u\_id]}
\DoxyCodeLine{803                     device\_b.use\_unlock()}
\DoxyCodeLine{804 }
\DoxyCodeLine{805                 \textcolor{keywordflow}{elif} return\_state == DeviceTcpReturn.UNKNOWN\_ERROR:}
\DoxyCodeLine{806                     LOGGER.error(}
\DoxyCodeLine{807                         \textcolor{stringliteral}{"{}Unknown error during send (and handshake) with device"{}}}
\DoxyCodeLine{808                         f\textcolor{stringliteral}{"{} \{unit\_id\}."{}}}
\DoxyCodeLine{809                     )}
\DoxyCodeLine{810 }
\DoxyCodeLine{811                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a9df3b50dfc0fcc7c8ec991bb9be9c5ba}{task\_log}}(}
\DoxyCodeLine{812                     \textcolor{stringliteral}{"{}Finished tcp connection to device"{}}}
\DoxyCodeLine{813                     f\textcolor{stringliteral}{"{} \{connection.address['ip']\} with return state:"{}}}
\DoxyCodeLine{814                     f\textcolor{stringliteral}{"{} \{return\_state\}"{}}}
\DoxyCodeLine{815                 )}
\DoxyCodeLine{816 }
\DoxyCodeLine{817         \textcolor{keywordflow}{except} CancelledError:}
\DoxyCodeLine{818             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_abab49b300927a080244615ee3ab494e3}{task\_log\_error}}(\textcolor{stringliteral}{"{}Device tcp task cancelled."{}})}
\DoxyCodeLine{819         \textcolor{keywordflow}{except} Exception:}
\DoxyCodeLine{820             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_ad6b753e482e539892c57f8144cf213cb}{task\_log\_trace\_ex}}()}
\DoxyCodeLine{821         \textcolor{keywordflow}{return} return\_state}
\DoxyCodeLine{822 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a0b582d0bf1523d1d0404867ab921539f_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a0b582d0bf1523d1d0404867ab921539f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a4d307f6bd0b66f3cb9fac3057fc87972}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a4d307f6bd0b66f3cb9fac3057fc87972}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!devices@{devices}}
\index{devices@{devices}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{devices()}{devices()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily  dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, \mbox{\hyperlink{classklyqa__ctl_1_1devices_1_1device_1_1Device}{Device}}\mbox{]} local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+devices (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{114     \textcolor{keyword}{def }devices(self) -\/> dict[str, Device]:}
\DoxyCodeLine{115         \textcolor{keywordflow}{return} self.\_attr\_devices}
\DoxyCodeLine{116 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a4d307f6bd0b66f3cb9fac3057fc87972_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a8d7418a9f89b4622dd814bd1c9ea4028}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a8d7418a9f89b4622dd814bd1c9ea4028}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!devices@{devices}}
\index{devices@{devices}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{devices()}{devices()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+devices (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, \mbox{\hyperlink{classklyqa__ctl_1_1devices_1_1device_1_1Device}{Device}}\mbox{]}}]{devices }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{118     \textcolor{keyword}{def }devices(self, devices: dict[str, Device]) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{119         self.\_attr\_devices = devices}
\DoxyCodeLine{120 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a8d7418a9f89b4622dd814bd1c9ea4028_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a8d7418a9f89b4622dd814bd1c9ea4028_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_af714f4a1c0791c62d2d3990990a42cf4}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_af714f4a1c0791c62d2d3990990a42cf4}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!discover\_devices@{discover\_devices}}
\index{discover\_devices@{discover\_devices}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{discover\_devices()}{discover\_devices()}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+discover\+\_\+devices (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{float }]{timeout\+\_\+secs = {\ttfamily 2.5} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Discover devices.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{1194     ) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{1195         \textcolor{stringliteral}{"{}"{}"{}Discover devices."{}"{}"{}}}
\DoxyCodeLine{1196 }
\DoxyCodeLine{1197         print(SEPARATION\_WIDTH * \textcolor{stringliteral}{"{}-\/"{}})}
\DoxyCodeLine{1198         print(\textcolor{stringliteral}{"{}Search local network for devices ..."{}})}
\DoxyCodeLine{1199         print(SEPARATION\_WIDTH * \textcolor{stringliteral}{"{}-\/"{}})}
\DoxyCodeLine{1200 }
\DoxyCodeLine{1201         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}discover ping start"{}})}
\DoxyCodeLine{1202         \textcolor{comment}{\# send a message to uid "{}all"{} which is fake but will get the}}
\DoxyCodeLine{1203         \textcolor{comment}{\# identification message from the devices in the aes\_search}}
\DoxyCodeLine{1204         \textcolor{comment}{\# and send msg function and we can send then a real}}
\DoxyCodeLine{1205         \textcolor{comment}{\# request message to these discovered devices.}}
\DoxyCodeLine{1206         await self.send\_message(}
\DoxyCodeLine{1207             [PingCommand()],}
\DoxyCodeLine{1208             UnitId(\textcolor{stringliteral}{"{}all"{}}),}
\DoxyCodeLine{1209             timeout\_secs,}
\DoxyCodeLine{1210         )}
\DoxyCodeLine{1211 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_af714f4a1c0791c62d2d3990990a42cf4_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a900e05554022ee9ecb3ba5621369016d}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a900e05554022ee9ecb3ba5621369016d}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!handle\_connection@{handle\_connection}}
\index{handle\_connection@{handle\_connection}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{handle\_connection()}{handle\_connection()}}
{\footnotesize\ttfamily  Device\+Tcp\+Return local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+handle\+\_\+connection (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{\mbox{\hyperlink{classklyqa__ctl_1_1general_1_1general_1_1ReferencePass}{Reference\+Pass}}}]{device\+\_\+ref,  }\item[{Tcp\+Connection}]{connection,  }\item[{\mbox{\hyperlink{classklyqa__ctl_1_1general_1_1general_1_1ReferencePass}{Reference\+Pass}}}]{msg\+\_\+sent\+\_\+r }\end{DoxyParamCaption})}

\begin{DoxyVerb}Make AES handshake.
Getting the identity of the device.
Send the commands in message queue to the device with the device u_id
or to any device.

Params:
    device: Device reference - (initial) device object with the tcp
        connection
    connection - TCP connection tunnel to the device
    msg_sent_r - Message reference object to send

Returns: DeviceTcpReturn
\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{524     ) -\/> DeviceTcpReturn:}
\DoxyCodeLine{525         \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{526 \textcolor{stringliteral}{        Make AES handshake.}}
\DoxyCodeLine{527 \textcolor{stringliteral}{        Getting the identity of the device.}}
\DoxyCodeLine{528 \textcolor{stringliteral}{        Send the commands in message queue to the device with the device u\_id}}
\DoxyCodeLine{529 \textcolor{stringliteral}{        or to any device.}}
\DoxyCodeLine{530 \textcolor{stringliteral}{}}
\DoxyCodeLine{531 \textcolor{stringliteral}{        Params:}}
\DoxyCodeLine{532 \textcolor{stringliteral}{            device: Device reference -\/ (initial) device object with the tcp}}
\DoxyCodeLine{533 \textcolor{stringliteral}{                connection}}
\DoxyCodeLine{534 \textcolor{stringliteral}{            connection -\/ TCP connection tunnel to the device}}
\DoxyCodeLine{535 \textcolor{stringliteral}{            msg\_sent\_r -\/ Message reference object to send}}
\DoxyCodeLine{536 \textcolor{stringliteral}{}}
\DoxyCodeLine{537 \textcolor{stringliteral}{        Returns: DeviceTcpReturn}}
\DoxyCodeLine{538 \textcolor{stringliteral}{        "{}"{}"{}}}
\DoxyCodeLine{539 }
\DoxyCodeLine{540         device: Device = device\_ref.ref}
\DoxyCodeLine{541         \textcolor{keywordflow}{if} device \textcolor{keywordflow}{is} \textcolor{keywordtype}{None} \textcolor{keywordflow}{or} connection.socket \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{542             \textcolor{keywordflow}{return} DeviceTcpReturn.UNKNOWN\_ERROR}
\DoxyCodeLine{543 }
\DoxyCodeLine{544         data: bytes = b\textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{545         last\_send: datetime.datetime = datetime.datetime.now()}
\DoxyCodeLine{546         pause: datetime.timedelta = datetime.timedelta(milliseconds=0)}
\DoxyCodeLine{547         elapsed: datetime.timedelta = datetime.datetime.now() -\/ last\_send}
\DoxyCodeLine{548 }
\DoxyCodeLine{549         return\_val: DeviceTcpReturn = DeviceTcpReturn.NOTHING\_DONE}
\DoxyCodeLine{550 }
\DoxyCodeLine{551         communication\_finished: bool = \textcolor{keyword}{False}}
\DoxyCodeLine{552 }
\DoxyCodeLine{553         async \textcolor{keyword}{def }\_\_send\_next\_msg() -\/> None:}
\DoxyCodeLine{554             nonlocal last\_send, pause, return\_val, device, msg\_sent\_r}
\DoxyCodeLine{555 }
\DoxyCodeLine{556             send\_next: bool = elapsed >= pause}
\DoxyCodeLine{557             sleep: float = (pause -\/ elapsed).total\_seconds()}
\DoxyCodeLine{558 }
\DoxyCodeLine{559             \textcolor{keywordflow}{if} sleep > 0:}
\DoxyCodeLine{560                 await asyncio.sleep(sleep)}
\DoxyCodeLine{561 }
\DoxyCodeLine{562             \textcolor{keywordflow}{if} send\_next \textcolor{keywordflow}{and} device:}
\DoxyCodeLine{563                 msg: Message | \textcolor{keywordtype}{None} = \textcolor{keywordtype}{None}}
\DoxyCodeLine{564                 \textcolor{keywordflow}{if} (}
\DoxyCodeLine{565                     \textcolor{keywordflow}{not} msg}
\DoxyCodeLine{566                     \textcolor{keywordflow}{and} device.u\_id \textcolor{keywordflow}{in} self.message\_queue}
\DoxyCodeLine{567                     \textcolor{keywordflow}{and} len(self.message\_queue[device.u\_id]) > 0}
\DoxyCodeLine{568                 ):}
\DoxyCodeLine{569                     msg = self.message\_queue[device.u\_id][0]}
\DoxyCodeLine{570 }
\DoxyCodeLine{571                 \textcolor{keywordflow}{if} msg:}
\DoxyCodeLine{572                     \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a9df3b50dfc0fcc7c8ec991bb9be9c5ba}{task\_log}}(}
\DoxyCodeLine{573                         f\textcolor{stringliteral}{"{}Process msg to send '\{msg.msg\_queue\}' to device"{}}}
\DoxyCodeLine{574                         f\textcolor{stringliteral}{"{} '\{device.u\_id\}'."{}}}
\DoxyCodeLine{575                     )}
\DoxyCodeLine{576                     j: int = 0}
\DoxyCodeLine{577 }
\DoxyCodeLine{578                     \textcolor{keywordflow}{if} msg.state == MessageState.UNSENT:}
\DoxyCodeLine{579 }
\DoxyCodeLine{580                         \textcolor{keywordflow}{while} j < len(msg.msg\_queue):}
\DoxyCodeLine{581 }
\DoxyCodeLine{582                             command: Command = msg.msg\_queue[j]}
\DoxyCodeLine{583                             text: str = command.msg\_str()}
\DoxyCodeLine{584                             \textcolor{keywordflow}{if} isinstance(command, CommandWithCheckValues):}
\DoxyCodeLine{585                                 cwcv: CommandWithCheckValues = command}
\DoxyCodeLine{586                                 \textcolor{keywordflow}{if} (}
\DoxyCodeLine{587                                     \textcolor{keywordflow}{not} cwcv.\_force  \textcolor{comment}{\# pylint: disable=protected-\/access}}
\DoxyCodeLine{588                                     \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} cwcv.check\_values(device=device)}
\DoxyCodeLine{589                                 ):}
\DoxyCodeLine{590                                     self.remove\_msg\_from\_queue(msg, device)}
\DoxyCodeLine{591                                     \textcolor{keywordflow}{break}}
\DoxyCodeLine{592 }
\DoxyCodeLine{593                             \textcolor{keywordflow}{if} isinstance(command, TransitionCommand):}
\DoxyCodeLine{594                                 tc: TransitionCommand = command}
\DoxyCodeLine{595                                 pause = datetime.timedelta(}
\DoxyCodeLine{596                                     milliseconds=\mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_acc51622ce1f8c7a6b4f56f70f907ae40}{float}}(tc.transition\_time)}
\DoxyCodeLine{597                                 )}
\DoxyCodeLine{598 }
\DoxyCodeLine{599                             \textcolor{keywordflow}{try}:}
\DoxyCodeLine{600                                 \textcolor{keywordflow}{if} await connection.encrypt\_and\_send\_msg(}
\DoxyCodeLine{601                                     text, device}
\DoxyCodeLine{602                                 ):}
\DoxyCodeLine{603 }
\DoxyCodeLine{604                                     return\_val = DeviceTcpReturn.SENT}
\DoxyCodeLine{605                                     \textcolor{keywordflow}{if} isinstance(msg, BroadCastMessage):}
\DoxyCodeLine{606                                         bcm: BroadCastMessage = msg}
\DoxyCodeLine{607                                         bcm.sent\_to\_uids.add(device.u\_id)}
\DoxyCodeLine{608                                     msg\_sent\_r.ref = msg}
\DoxyCodeLine{609                                     last\_send = datetime.datetime.now()}
\DoxyCodeLine{610                                     j = j + 1}
\DoxyCodeLine{611                                     msg.msg\_queue\_sent.append(text)}
\DoxyCodeLine{612                                     \textcolor{comment}{\# don't process the next message, but if}}
\DoxyCodeLine{613                                     \textcolor{comment}{\# still elements in the msg\_queue send}}
\DoxyCodeLine{614                                     \textcolor{comment}{\# them as well}}
\DoxyCodeLine{615                                     send\_next = \textcolor{keyword}{False}}
\DoxyCodeLine{616                                     \textcolor{comment}{\# break}}
\DoxyCodeLine{617                                 \textcolor{keywordflow}{else}:}
\DoxyCodeLine{618                                     LOGGER.error(\textcolor{stringliteral}{"{}Could not send message!"{}})}
\DoxyCodeLine{619                                     return\_val = DeviceTcpReturn.SEND\_ERROR}
\DoxyCodeLine{620                                     \textcolor{keywordflow}{break}}
\DoxyCodeLine{621                             \textcolor{keywordflow}{except} socket.error:}
\DoxyCodeLine{622                                 LOGGER.error(}
\DoxyCodeLine{623                                     \textcolor{stringliteral}{"{}Socket error while trying to send"{}}}
\DoxyCodeLine{624                                     \textcolor{stringliteral}{"{} message!"{}}}
\DoxyCodeLine{625                                 )}
\DoxyCodeLine{626                                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_ad6b753e482e539892c57f8144cf213cb}{task\_log\_trace\_ex}}()}
\DoxyCodeLine{627                                 return\_val = DeviceTcpReturn.SEND\_ERROR}
\DoxyCodeLine{628                                 \textcolor{keywordflow}{break}}
\DoxyCodeLine{629 }
\DoxyCodeLine{630                         \textcolor{keywordflow}{if} len(msg.msg\_queue) == len(msg.msg\_queue\_sent):}
\DoxyCodeLine{631                             msg.state = MessageState.SENT}
\DoxyCodeLine{632                             \textcolor{comment}{\# all messages , break now for reading response}}
\DoxyCodeLine{633                             self.remove\_msg\_from\_queue(msg, device)}
\DoxyCodeLine{634                     \textcolor{keywordflow}{else}:}
\DoxyCodeLine{635                         self.remove\_msg\_from\_queue(msg, device)}
\DoxyCodeLine{636 }
\DoxyCodeLine{637         \textcolor{keywordflow}{if} msg\_sent\_r.ref \textcolor{keywordflow}{and} msg\_sent\_r.ref.state == MessageState.ANSWERED:}
\DoxyCodeLine{638             msg\_sent\_r.ref = \textcolor{keywordtype}{None}}
\DoxyCodeLine{639 }
\DoxyCodeLine{640         \textcolor{keywordflow}{while} \textcolor{keywordflow}{not} communication\_finished \textcolor{keywordflow}{and} (}
\DoxyCodeLine{641             device.u\_id == \textcolor{stringliteral}{"{}no\_uid"{}}}
\DoxyCodeLine{642             \textcolor{keywordflow}{or} \mbox{\hyperlink{namespaceklyqa__ctl_1_1vc1__vapp_aeb8c49847d28d73ca473f0cb70f7c826}{type}}(device) == Device  \textcolor{comment}{\# pylint: disable=unidiomatic-\/typecheck}}
\DoxyCodeLine{643             \textcolor{keywordflow}{or} device.u\_id \textcolor{keywordflow}{in} self.message\_queue}
\DoxyCodeLine{644             \textcolor{keywordflow}{or} msg\_sent\_r.ref}
\DoxyCodeLine{645         ):}
\DoxyCodeLine{646 }
\DoxyCodeLine{647             \textcolor{keywordflow}{if} (}
\DoxyCodeLine{648                 msg\_sent\_r.ref}
\DoxyCodeLine{649                 \textcolor{keywordflow}{and} msg\_sent\_r.ref.state == MessageState.ANSWERED}
\DoxyCodeLine{650             ):}
\DoxyCodeLine{651                 msg\_sent\_r.ref = \textcolor{keywordtype}{None}}
\DoxyCodeLine{652 }
\DoxyCodeLine{653             \textcolor{keywordflow}{if} (}
\DoxyCodeLine{654                 connection.state == AesConnectionState.CONNECTED}
\DoxyCodeLine{655                 \textcolor{keywordflow}{and} msg\_sent\_r.ref \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}}
\DoxyCodeLine{656             ):}
\DoxyCodeLine{657                 await \_\_send\_next\_msg()}
\DoxyCodeLine{658                 \textcolor{keywordflow}{if} return\_val == DeviceTcpReturn.SEND\_ERROR:}
\DoxyCodeLine{659                     \textcolor{keywordflow}{return} return\_val}
\DoxyCodeLine{660 }
\DoxyCodeLine{661             data\_ref: ReferencePass = ReferencePass(data)}
\DoxyCodeLine{662             read\_data\_ret: DeviceTcpReturn = (}
\DoxyCodeLine{663                 await connection.read\_local\_tcp\_socket(data\_ref)}
\DoxyCodeLine{664             )}
\DoxyCodeLine{665             \textcolor{keywordflow}{if} read\_data\_ret != DeviceTcpReturn.NO\_ERROR:}
\DoxyCodeLine{666                 \textcolor{keywordflow}{return} read\_data\_ret}
\DoxyCodeLine{667             data = data\_ref.ref}
\DoxyCodeLine{668 }
\DoxyCodeLine{669             elapsed = datetime.datetime.now() -\/ last\_send}
\DoxyCodeLine{670 }
\DoxyCodeLine{671             \textcolor{keywordflow}{while} \textcolor{keywordflow}{not} communication\_finished \textcolor{keywordflow}{and} (len(data)):}
\DoxyCodeLine{672                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a9df3b50dfc0fcc7c8ec991bb9be9c5ba}{task\_log}}(}
\DoxyCodeLine{673                     f\textcolor{stringliteral}{"{}TCP server received \{str(len(data))\} bytes from"{}}}
\DoxyCodeLine{674                     f\textcolor{stringliteral}{"{} \{str(connection.address)\}"{}}}
\DoxyCodeLine{675                 )}
\DoxyCodeLine{676 }
\DoxyCodeLine{677                 return\_val = await self.process\_tcp\_package(}
\DoxyCodeLine{678                     connection, data\_ref, msg\_sent\_r.ref, device\_ref}
\DoxyCodeLine{679                 )}
\DoxyCodeLine{680                 data = data\_ref.ref}
\DoxyCodeLine{681                 device = device\_ref.ref}
\DoxyCodeLine{682                 \textcolor{keywordflow}{if} return\_val == DeviceTcpReturn.ANSWERED:}
\DoxyCodeLine{683                     msg\_sent\_r.ref = \textcolor{keywordtype}{None}}
\DoxyCodeLine{684                     communication\_finished = \textcolor{keyword}{True}}
\DoxyCodeLine{685                 \textcolor{keywordflow}{elif} return\_val != DeviceTcpReturn.NO\_ERROR:}
\DoxyCodeLine{686                     \textcolor{keywordflow}{return} return\_val}
\DoxyCodeLine{687 }
\DoxyCodeLine{688         \textcolor{keywordflow}{return} return\_val}
\DoxyCodeLine{689 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a900e05554022ee9ecb3ba5621369016d_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a900e05554022ee9ecb3ba5621369016d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aa5d34422c7cb1784e408fef186a0b585}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aa5d34422c7cb1784e408fef186a0b585}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!handle\_connections@{handle\_connections}}
\index{handle\_connections@{handle\_connections}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{handle\_connections()}{handle\_connections()}}
{\footnotesize\ttfamily  bool local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+handle\+\_\+connections (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{\mbox{\hyperlink{namespacelocal_1_1connection__handler_a41af5c536a6af4617df5c96742204c77}{int}} }]{proc\+\_\+timeout\+\_\+secs = {\ttfamily DEFAULT\+\_\+MAX\+\_\+COM\+\_\+PROC\+\_\+TIMEOUT\+\_\+SECS} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Send broadcast and make tasks for incoming tcp connections.

Params:
    proc_timeout_secs: max timeout in seconds for a device
        communication handle process

Returns:
    true:  on success
    false: on exception or error
\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{987     ) -\/> bool:}
\DoxyCodeLine{988         \textcolor{stringliteral}{"{}"{}"{}Send broadcast and make tasks for incoming tcp connections.}}
\DoxyCodeLine{989 \textcolor{stringliteral}{}}
\DoxyCodeLine{990 \textcolor{stringliteral}{        Params:}}
\DoxyCodeLine{991 \textcolor{stringliteral}{            proc\_timeout\_secs: max timeout in seconds for a device}}
\DoxyCodeLine{992 \textcolor{stringliteral}{                communication handle process}}
\DoxyCodeLine{993 \textcolor{stringliteral}{}}
\DoxyCodeLine{994 \textcolor{stringliteral}{        Returns:}}
\DoxyCodeLine{995 \textcolor{stringliteral}{            true:  on success}}
\DoxyCodeLine{996 \textcolor{stringliteral}{            false: on exception or error}}
\DoxyCodeLine{997 \textcolor{stringliteral}{        "{}"{}"{}}}
\DoxyCodeLine{998 }
\DoxyCodeLine{999         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{1000             \textcolor{keywordflow}{while} \textcolor{keywordflow}{not} self.handle\_connections\_task\_end\_now:}
\DoxyCodeLine{1001                 \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} await self.bind\_ports():}
\DoxyCodeLine{1002                     \textcolor{keywordflow}{break}}
\DoxyCodeLine{1003                 \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.tcp \textcolor{keywordflow}{or} \textcolor{keywordflow}{not} self.udp:}
\DoxyCodeLine{1004                     \textcolor{keywordflow}{break}}
\DoxyCodeLine{1005                 \textcolor{comment}{\# for debug cursor jump:}}
\DoxyCodeLine{1006                 a: bool = \textcolor{keyword}{False}}
\DoxyCodeLine{1007                 \textcolor{keywordflow}{if} a:}
\DoxyCodeLine{1008                     \textcolor{keywordflow}{break}}
\DoxyCodeLine{1009 }
\DoxyCodeLine{1010                 \textcolor{keywordflow}{if} self.message\_queue:}
\DoxyCodeLine{1011 }
\DoxyCodeLine{1012                     read\_broadcast\_response: bool = \textcolor{keyword}{True}}
\DoxyCodeLine{1013                     \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} await self.send\_udp\_broadcast():}
\DoxyCodeLine{1014                         read\_broadcast\_response = \textcolor{keyword}{False}}
\DoxyCodeLine{1015                         \textcolor{keywordflow}{continue}}
\DoxyCodeLine{1016 }
\DoxyCodeLine{1017                     \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} read\_broadcast\_response:}
\DoxyCodeLine{1018                         await self.standby()}
\DoxyCodeLine{1019 }
\DoxyCodeLine{1020                     \textcolor{keywordflow}{while} read\_broadcast\_response:}
\DoxyCodeLine{1021 }
\DoxyCodeLine{1022                         self.\_\_read\_tcp\_task = asyncio.create\_task(}
\DoxyCodeLine{1023                             self.read\_incoming\_tcp\_con\_task()}
\DoxyCodeLine{1024                         )}
\DoxyCodeLine{1025 }
\DoxyCodeLine{1026                         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}Reading incoming connections.."{}})}
\DoxyCodeLine{1027                         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{1028                             await asyncio.wait\_for(}
\DoxyCodeLine{1029                                 self.\_\_read\_tcp\_task, timeout=1.0}
\DoxyCodeLine{1030                             )}
\DoxyCodeLine{1031                         \textcolor{keywordflow}{except} asyncio.TimeoutError:}
\DoxyCodeLine{1032                             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(}
\DoxyCodeLine{1033                                 \textcolor{stringliteral}{"{}Socket-\/Timeout for incoming tcp connections."{}}}
\DoxyCodeLine{1034                             )}
\DoxyCodeLine{1035 }
\DoxyCodeLine{1036                         \textcolor{keywordflow}{except} socket.error:}
\DoxyCodeLine{1037                             LOGGER.error(\textcolor{stringliteral}{"{}Socket error!"{}})}
\DoxyCodeLine{1038                             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_ad6b753e482e539892c57f8144cf213cb}{task\_log\_trace\_ex}}()}
\DoxyCodeLine{1039                             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} await self.bind\_ports():}
\DoxyCodeLine{1040                                 LOGGER.error(}
\DoxyCodeLine{1041                                     \textcolor{stringliteral}{"{}Error binding ports udp 2222 and tcp"{}}}
\DoxyCodeLine{1042                                     \textcolor{stringliteral}{"{} 3333."{}}}
\DoxyCodeLine{1043                                 )}
\DoxyCodeLine{1044 }
\DoxyCodeLine{1045                         result: tuple[}
\DoxyCodeLine{1046                             list[Any], list[Any], list[Any]}
\DoxyCodeLine{1047                         ] | \textcolor{keywordtype}{None} = (}
\DoxyCodeLine{1048                             self.\_\_read\_tcp\_task.result()}
\DoxyCodeLine{1049                             \textcolor{keywordflow}{if} self.\_\_read\_tcp\_task}
\DoxyCodeLine{1050                             \textcolor{keywordflow}{else} \textcolor{keywordtype}{None}}
\DoxyCodeLine{1051                         )}
\DoxyCodeLine{1052                         \textcolor{keywordflow}{if} (}
\DoxyCodeLine{1053                             \textcolor{keywordflow}{not} result}
\DoxyCodeLine{1054                             \textcolor{keywordflow}{or} \textcolor{keywordflow}{not} isinstance(result, tuple)}
\DoxyCodeLine{1055                             \textcolor{keywordflow}{or} \textcolor{keywordflow}{not} len(result) == 3}
\DoxyCodeLine{1056                         ):}
\DoxyCodeLine{1057                             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(}
\DoxyCodeLine{1058                                 \textcolor{stringliteral}{"{}No incoming tcp connections read result."{}}}
\DoxyCodeLine{1059                                 \textcolor{stringliteral}{"{} break"{}}}
\DoxyCodeLine{1060                             )}
\DoxyCodeLine{1061                             \textcolor{keywordflow}{break}}
\DoxyCodeLine{1062                         readable: list[Any]}
\DoxyCodeLine{1063                         readable, \_, \_ = result \textcolor{keywordflow}{if} result \textcolor{keywordflow}{else} ([], [], [])}
\DoxyCodeLine{1064 }
\DoxyCodeLine{1065                         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}Reading tcp port done.."{}})}
\DoxyCodeLine{1066 }
\DoxyCodeLine{1067                         \textcolor{keywordflow}{if} self.tcp \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} readable:}
\DoxyCodeLine{1068                             \textcolor{keywordflow}{break}}
\DoxyCodeLine{1069                         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{1070                             await self.handle\_incoming\_tcp\_connection(}
\DoxyCodeLine{1071                                 proc\_timeout\_secs}
\DoxyCodeLine{1072                             )}
\DoxyCodeLine{1073 }
\DoxyCodeLine{1074                     \textcolor{comment}{\# await self.check\_messages\_time\_to\_live()}}
\DoxyCodeLine{1075 }
\DoxyCodeLine{1076                 await self.connection\_tasks\_time\_to\_live(proc\_timeout\_secs)}
\DoxyCodeLine{1077 }
\DoxyCodeLine{1078                 \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.message\_queue:}
\DoxyCodeLine{1079                     await self.standby()}
\DoxyCodeLine{1080 }
\DoxyCodeLine{1081         \textcolor{keywordflow}{except} CancelledError:}
\DoxyCodeLine{1082             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}search and send to device loop cancelled."{}})}
\DoxyCodeLine{1083             self.message\_queue = \{\}}
\DoxyCodeLine{1084             \textcolor{keywordflow}{for} task, \_ \textcolor{keywordflow}{in} self.\_\_tasks\_undone:}
\DoxyCodeLine{1085                 task.cancel(msg=\textcolor{stringliteral}{"{}Search and send loop cancelled."{}})}
\DoxyCodeLine{1086         \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} exception:}
\DoxyCodeLine{1087             LOGGER.error(}
\DoxyCodeLine{1088                 \textcolor{stringliteral}{"{}Exception on send and search loop. Stop search devices loop!"{}}}
\DoxyCodeLine{1089             )}
\DoxyCodeLine{1090             \textcolor{keywordflow}{raise} exception}
\DoxyCodeLine{1091         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(}
\DoxyCodeLine{1092             \textcolor{stringliteral}{"{}Search devices and process incoming connnections loop ended."{}}}
\DoxyCodeLine{1093         )}
\DoxyCodeLine{1094         \textcolor{keywordflow}{return} \textcolor{keyword}{True}}
\DoxyCodeLine{1095 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aa5d34422c7cb1784e408fef186a0b585_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a7e62dc20801dc3d832dbd1dd0373ba17}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a7e62dc20801dc3d832dbd1dd0373ba17}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!handle\_connections\_task@{handle\_connections\_task}}
\index{handle\_connections\_task@{handle\_connections\_task}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{handle\_connections\_task()}{handle\_connections\_task()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily  Task $\vert$ None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+handle\+\_\+connections\+\_\+task (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{185     \textcolor{keyword}{def }handle\_connections\_task(self) -\/> Task | None:}
\DoxyCodeLine{186         \textcolor{keywordflow}{return} self.\_attr\_handlec\_connections\_task}
\DoxyCodeLine{187 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a7e62dc20801dc3d832dbd1dd0373ba17_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a44ce408a0cb35854a4ac1dfe541090b4}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a44ce408a0cb35854a4ac1dfe541090b4}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!handle\_connections\_task@{handle\_connections\_task}}
\index{handle\_connections\_task@{handle\_connections\_task}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{handle\_connections\_task()}{handle\_connections\_task()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+handle\+\_\+connections\+\_\+task (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{Task $\vert$ None     }]{handle\+\_\+connections\+\_\+tasks }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{191     ) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{192         self.\_attr\_handlec\_connections\_task = handle\_connections\_tasks}
\DoxyCodeLine{193 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a44ce408a0cb35854a4ac1dfe541090b4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_acf31322d19d937f12f736c7f4c3d9f22}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_acf31322d19d937f12f736c7f4c3d9f22}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!handle\_connections\_task\_end\_now@{handle\_connections\_task\_end\_now}}
\index{handle\_connections\_task\_end\_now@{handle\_connections\_task\_end\_now}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{handle\_connections\_task\_end\_now()}{handle\_connections\_task\_end\_now()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily  bool local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+handle\+\_\+connections\+\_\+task\+\_\+end\+\_\+now (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{195     \textcolor{keyword}{def }handle\_connections\_task\_end\_now(self) -\/> bool:}
\DoxyCodeLine{196         \textcolor{keywordflow}{return} self.\_attr\_handle\_connections\_task\_end\_now}
\DoxyCodeLine{197 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_acf31322d19d937f12f736c7f4c3d9f22_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ac2ea1078fc435b2f80b549c4d17ab6d4}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ac2ea1078fc435b2f80b549c4d17ab6d4}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!handle\_connections\_task\_end\_now@{handle\_connections\_task\_end\_now}}
\index{handle\_connections\_task\_end\_now@{handle\_connections\_task\_end\_now}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{handle\_connections\_task\_end\_now()}{handle\_connections\_task\_end\_now()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+handle\+\_\+connections\+\_\+task\+\_\+end\+\_\+now (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{bool     }]{handle\+\_\+connections\+\_\+task\+\_\+end\+\_\+now }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{201     ) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{202         self.\_attr\_handle\_connections\_task\_end\_now = (}
\DoxyCodeLine{203             handle\_connections\_task\_end\_now}
\DoxyCodeLine{204         )}
\DoxyCodeLine{205 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ac2ea1078fc435b2f80b549c4d17ab6d4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aa780e39d1ce443d422a41064cc382d1f}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aa780e39d1ce443d422a41064cc382d1f}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!handle\_connections\_task\_stop@{handle\_connections\_task\_stop}}
\index{handle\_connections\_task\_stop@{handle\_connections\_task\_stop}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{handle\_connections\_task\_stop()}{handle\_connections\_task\_stop()}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+handle\+\_\+connections\+\_\+task\+\_\+stop (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}End device search and connections handler task.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{1096     async \textcolor{keyword}{def }handle\_connections\_task\_stop(self) -\/> None:}
\DoxyCodeLine{1097         \textcolor{stringliteral}{"{}"{}"{}End device search and connections handler task."{}"{}"{}}}
\DoxyCodeLine{1098 }
\DoxyCodeLine{1099         \textcolor{keywordflow}{if} self.msg\_ttl\_task \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} self.msg\_ttl\_task.done():}
\DoxyCodeLine{1100             self.msg\_ttl\_task.cancel()}
\DoxyCodeLine{1101 }
\DoxyCodeLine{1102         \textcolor{keywordflow}{while} (}
\DoxyCodeLine{1103             self.handle\_connections\_task}
\DoxyCodeLine{1104             \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} self.handle\_connections\_task.done()}
\DoxyCodeLine{1105         ):}
\DoxyCodeLine{1106             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}stop send and search loop."{}})}
\DoxyCodeLine{1107             \textcolor{keywordflow}{if} self.handle\_connections\_task:}
\DoxyCodeLine{1108                 self.handle\_connections\_task\_end\_now = \textcolor{keyword}{True}}
\DoxyCodeLine{1109                 self.handle\_connections\_task.cancel(}
\DoxyCodeLine{1110                     msg=\textcolor{stringliteral}{"{}Shutdown search and send loop."{}}}
\DoxyCodeLine{1111                 )}
\DoxyCodeLine{1112             \textcolor{keywordflow}{try}:}
\DoxyCodeLine{1113                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}wait for send and search loop to end."{}})}
\DoxyCodeLine{1114                 await asyncio.wait\_for(}
\DoxyCodeLine{1115                     self.handle\_connections\_task, timeout=0.1}
\DoxyCodeLine{1116                 )}
\DoxyCodeLine{1117                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}wait end for send and search loop."{}})}
\DoxyCodeLine{1118             \textcolor{keywordflow}{except} Exception:}
\DoxyCodeLine{1119                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_ad6b753e482e539892c57f8144cf213cb}{task\_log\_trace\_ex}}()}
\DoxyCodeLine{1120             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}wait end for send and search loop."{}})}
\DoxyCodeLine{1121 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aa780e39d1ce443d422a41064cc382d1f_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aa780e39d1ce443d422a41064cc382d1f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a5e9277acd0b7bfa5a1e74417e0e10d86}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a5e9277acd0b7bfa5a1e74417e0e10d86}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!handle\_incoming\_tcp\_connection@{handle\_incoming\_tcp\_connection}}
\index{handle\_incoming\_tcp\_connection@{handle\_incoming\_tcp\_connection}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{handle\_incoming\_tcp\_connection()}{handle\_incoming\_tcp\_connection()}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+handle\+\_\+incoming\+\_\+tcp\+\_\+connection (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{\mbox{\hyperlink{namespacelocal_1_1connection__handler_a41af5c536a6af4617df5c96742204c77}{int}}     }]{proc\+\_\+timeout\+\_\+secs }\end{DoxyParamCaption})}

\begin{DoxyVerb}Accept incoming tcp connection and start connection handle
process.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{952     ) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{953         \textcolor{stringliteral}{"{}"{}"{}Accept incoming tcp connection and start connection handle}}
\DoxyCodeLine{954 \textcolor{stringliteral}{        process."{}"{}"{}}}
\DoxyCodeLine{955         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.tcp:}
\DoxyCodeLine{956             \textcolor{keywordflow}{return}}
\DoxyCodeLine{957         loop: AbstractEventLoop = asyncio.get\_event\_loop()}
\DoxyCodeLine{958         device: Device = Device()}
\DoxyCodeLine{959         addr: tuple}
\DoxyCodeLine{960         connection: TcpConnection = TcpConnection()}
\DoxyCodeLine{961         (}
\DoxyCodeLine{962             connection.socket,}
\DoxyCodeLine{963             addr,}
\DoxyCodeLine{964         ) = self.tcp.accept()}
\DoxyCodeLine{965         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} addr[0] \textcolor{keywordflow}{in} self.current\_addr\_connections:}
\DoxyCodeLine{966             self.current\_addr\_connections.add(addr[0])}
\DoxyCodeLine{967             connection.address[\textcolor{stringliteral}{"{}ip"{}}] = addr[0]}
\DoxyCodeLine{968             connection.address[\textcolor{stringliteral}{"{}port"{}}] = addr[1]}
\DoxyCodeLine{969 }
\DoxyCodeLine{970             new\_task: Task[DeviceTcpReturn] = loop.create\_task(}
\DoxyCodeLine{971                 self.device\_handle\_local\_tcp(device, connection)}
\DoxyCodeLine{972             )}
\DoxyCodeLine{973 }
\DoxyCodeLine{974             loop.create\_task(}
\DoxyCodeLine{975                 asyncio.wait\_for(new\_task, timeout=proc\_timeout\_secs)}
\DoxyCodeLine{976             )}
\DoxyCodeLine{977 }
\DoxyCodeLine{978             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(}
\DoxyCodeLine{979                 f\textcolor{stringliteral}{"{}Address \{connection.address['ip']\} process task created."{}}}
\DoxyCodeLine{980             )}
\DoxyCodeLine{981             self.\_\_tasks\_undone.append((new\_task, datetime.datetime.now()))}
\DoxyCodeLine{982         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{983             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(f\textcolor{stringliteral}{"{}Address \{addr[0]\} already in connection."{}})}
\DoxyCodeLine{984 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a5e9277acd0b7bfa5a1e74417e0e10d86_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a2c8ccb41ccfd636bd8a02042034375e8}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a2c8ccb41ccfd636bd8a02042034375e8}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!message\_queue@{message\_queue}}
\index{message\_queue@{message\_queue}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{message\_queue()}{message\_queue()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily  dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, list\mbox{[}\mbox{\hyperlink{classklyqa__ctl_1_1general_1_1message_1_1Message}{Message}}\mbox{]}\mbox{]} local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+message\+\_\+queue (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{146     \textcolor{keyword}{def }message\_queue(self) -\/> dict[str, list[Message]]:}
\DoxyCodeLine{147         \textcolor{keywordflow}{return} self.\_attr\_message\_queue}
\DoxyCodeLine{148 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a2c8ccb41ccfd636bd8a02042034375e8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a1fc09795d2fca9fcaf4ef67f48810ce2}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a1fc09795d2fca9fcaf4ef67f48810ce2}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!message\_queue@{message\_queue}}
\index{message\_queue@{message\_queue}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{message\_queue()}{message\_queue()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+message\+\_\+queue (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, list\mbox{[}\mbox{\hyperlink{classklyqa__ctl_1_1general_1_1message_1_1Message}{Message}}\mbox{]}\mbox{]}}]{message\+\_\+queue }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{150     \textcolor{keyword}{def }message\_queue(self, message\_queue: dict[str, list[Message]]) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{151         self.\_attr\_message\_queue = message\_queue}
\DoxyCodeLine{152 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a1fc09795d2fca9fcaf4ef67f48810ce2_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a159e60e3f78301ef89df33d9adaebbde}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a159e60e3f78301ef89df33d9adaebbde}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!network\_interface@{network\_interface}}
\index{network\_interface@{network\_interface}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{network\_interface()}{network\_interface()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classstr}{str}} $\vert$ None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+network\+\_\+interface (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{98     \textcolor{keyword}{def }network\_interface(self) -\/> str | None:}
\DoxyCodeLine{99         \textcolor{keywordflow}{return} self.\_attr\_network\_interface}
\DoxyCodeLine{100 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a159e60e3f78301ef89df33d9adaebbde_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a6ef3ac8849218db44b014909d1f8146a}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a6ef3ac8849218db44b014909d1f8146a}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!network\_interface@{network\_interface}}
\index{network\_interface@{network\_interface}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{network\_interface()}{network\_interface()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+network\+\_\+interface (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{\mbox{\hyperlink{classstr}{str}} $\vert$ None}]{network\+\_\+interface }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{102     \textcolor{keyword}{def }network\_interface(self, network\_interface: str | \textcolor{keywordtype}{None}) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{103         self.\_attr\_network\_interface = network\_interface}
\DoxyCodeLine{104 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a6ef3ac8849218db44b014909d1f8146a_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a6ef3ac8849218db44b014909d1f8146a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ad1b4bfaedd513acfccbf1b12e36d5469}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ad1b4bfaedd513acfccbf1b12e36d5469}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!process\_aes\_initial\_vector\_package@{process\_aes\_initial\_vector\_package}}
\index{process\_aes\_initial\_vector\_package@{process\_aes\_initial\_vector\_package}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{process\_aes\_initial\_vector\_package()}{process\_aes\_initial\_vector\_package()}}
{\footnotesize\ttfamily  Device\+Tcp\+Return local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+process\+\_\+aes\+\_\+initial\+\_\+vector\+\_\+package (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{Tcp\+Connection}]{connection,  }\item[{\mbox{\hyperlink{classbytes}{bytes}}}]{data,  }\item[{\mbox{\hyperlink{classklyqa__ctl_1_1devices_1_1device_1_1Device}{Device}}     }]{device }\end{DoxyParamCaption})}

\begin{DoxyVerb}Create the AES encryption and decryption objects.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{410     ) -\/> DeviceTcpReturn:}
\DoxyCodeLine{411         \textcolor{stringliteral}{"{}"{}"{}Create the AES encryption and decryption objects."{}"{}"{}}}
\DoxyCodeLine{412 }
\DoxyCodeLine{413         connection.remote\_iv = data}
\DoxyCodeLine{414         connection.received\_packages.append(data)}
\DoxyCodeLine{415         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} connection.aes\_key:}
\DoxyCodeLine{416             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a9df3b50dfc0fcc7c8ec991bb9be9c5ba}{task\_log}}(}
\DoxyCodeLine{417                 \textcolor{stringliteral}{"{}Missing AES key. Probably not in onboarded devices. Provide"{}}}
\DoxyCodeLine{418                 \textcolor{stringliteral}{"{} AES key with -\/-\/aes [key]! "{}}}
\DoxyCodeLine{419                 + \mbox{\hyperlink{classstr}{str}}(device.u\_id)}
\DoxyCodeLine{420             )}
\DoxyCodeLine{421             \textcolor{keywordflow}{return} DeviceTcpReturn.MISSING\_AES\_KEY}
\DoxyCodeLine{422         connection.sending\_aes = AES.new(}
\DoxyCodeLine{423             connection.aes\_key,}
\DoxyCodeLine{424             AES.MODE\_CBC,}
\DoxyCodeLine{425             iv=connection.local\_iv + connection.remote\_iv,}
\DoxyCodeLine{426         )}
\DoxyCodeLine{427         connection.receiving\_aes = AES.new(}
\DoxyCodeLine{428             connection.aes\_key,}
\DoxyCodeLine{429             AES.MODE\_CBC,}
\DoxyCodeLine{430             iv=connection.remote\_iv + connection.local\_iv,}
\DoxyCodeLine{431         )}
\DoxyCodeLine{432 }
\DoxyCodeLine{433         connection.state = AesConnectionState.CONNECTED}
\DoxyCodeLine{434         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}Received remote initial vector. Connected state."{}})}
\DoxyCodeLine{435 }
\DoxyCodeLine{436         \textcolor{keywordflow}{return} DeviceTcpReturn.NO\_ERROR}
\DoxyCodeLine{437 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ad1b4bfaedd513acfccbf1b12e36d5469_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ad1b4bfaedd513acfccbf1b12e36d5469_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a4ce11db96280d000941a91cb37df2842}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a4ce11db96280d000941a91cb37df2842}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!process\_device\_identity\_package@{process\_device\_identity\_package}}
\index{process\_device\_identity\_package@{process\_device\_identity\_package}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{process\_device\_identity\_package()}{process\_device\_identity\_package()}}
{\footnotesize\ttfamily  Device\+Tcp\+Return local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+process\+\_\+device\+\_\+identity\+\_\+package (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{Tcp\+Connection}]{connection,  }\item[{\mbox{\hyperlink{classbytes}{bytes}}}]{data,  }\item[{\mbox{\hyperlink{classklyqa__ctl_1_1general_1_1general_1_1ReferencePass}{Reference\+Pass}}}]{device\+\_\+ref }\end{DoxyParamCaption})}

\begin{DoxyVerb}Process the device identity package.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{307     ) -\/> DeviceTcpReturn:}
\DoxyCodeLine{308         \textcolor{stringliteral}{"{}"{}"{}Process the device identity package."{}"{}"{}}}
\DoxyCodeLine{309 }
\DoxyCodeLine{310         \textcolor{comment}{\# Check identification package from device, lock the device object for}}
\DoxyCodeLine{311         \textcolor{comment}{\# changes, safe the idenfication to device object if it is a not known}}
\DoxyCodeLine{312         \textcolor{comment}{\# device, send the local initial vector for the encrypted communication}}
\DoxyCodeLine{313         \textcolor{comment}{\# to the device.}}
\DoxyCodeLine{314 }
\DoxyCodeLine{315         device: Device = device\_ref.ref}
\DoxyCodeLine{316         log: list}
\DoxyCodeLine{317 }
\DoxyCodeLine{318         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}Plain: \%s"{}}, \mbox{\hyperlink{classstr}{str}}(data))}
\DoxyCodeLine{319         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{320             json\_response: dict[str, Any] = json.loads(data)}
\DoxyCodeLine{321             identity: ResponseIdentityMessage = ResponseIdentityMessage(}
\DoxyCodeLine{322                 **json\_response[\textcolor{stringliteral}{"{}ident"{}}]}
\DoxyCodeLine{323             )}
\DoxyCodeLine{324             device.u\_id = identity.unit\_id}
\DoxyCodeLine{325         \textcolor{keywordflow}{except} json.JSONDecodeError:}
\DoxyCodeLine{326             \textcolor{keywordflow}{return} DeviceTcpReturn.NO\_UNIT\_ID}
\DoxyCodeLine{327 }
\DoxyCodeLine{328         is\_new\_device: bool = \textcolor{keyword}{False}}
\DoxyCodeLine{329 }
\DoxyCodeLine{330         \textcolor{keywordflow}{if} device.u\_id != \textcolor{stringliteral}{"{}no\_uid"{}} \textcolor{keywordflow}{and} device.u\_id \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.devices:}
\DoxyCodeLine{331 }
\DoxyCodeLine{332             is\_new\_device = \textcolor{keyword}{True}}
\DoxyCodeLine{333             new\_dev: Device = await self.controller\_data.get\_or\_create\_device(}
\DoxyCodeLine{334                 unit\_id=identity.unit\_id, product\_id=identity.product\_id}
\DoxyCodeLine{335             )}
\DoxyCodeLine{336             new\_dev.ident = identity}
\DoxyCodeLine{337             \textcolor{keywordflow}{if} (}
\DoxyCodeLine{338                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1vc1__vapp_aeb8c49847d28d73ca473f0cb70f7c826}{type}}(new\_dev)  \textcolor{comment}{\# pylint: disable=unidiomatic-\/typecheck}}
\DoxyCodeLine{339                 == Device}
\DoxyCodeLine{340             ):}
\DoxyCodeLine{341                 log = [}
\DoxyCodeLine{342                     \textcolor{stringliteral}{"{}Found new device \%s but don't know the product id \%s."{}},}
\DoxyCodeLine{343                     identity.unit\_id,}
\DoxyCodeLine{344                     identity.product\_id,}
\DoxyCodeLine{345                 ]}
\DoxyCodeLine{346                 LOGGER.info(*log)}
\DoxyCodeLine{347                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(*log)}
\DoxyCodeLine{348             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{349                 \textcolor{keywordflow}{if} is\_new\_device:}
\DoxyCodeLine{350                     log = [\textcolor{stringliteral}{"{}Found new device \%s"{}}, identity.unit\_id]}
\DoxyCodeLine{351                     LOGGER.info(*log)}
\DoxyCodeLine{352                     \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(*log)}
\DoxyCodeLine{353 }
\DoxyCodeLine{354         \textcolor{comment}{\# cached client device (self.devices), incoming device object created}}
\DoxyCodeLine{355         \textcolor{comment}{\# on tcp connection acception}}
\DoxyCodeLine{356         \textcolor{keywordflow}{if} device.u\_id \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.devices:}
\DoxyCodeLine{357             \textcolor{keywordflow}{return} DeviceTcpReturn.NOTHING\_DONE}
\DoxyCodeLine{358         device\_repl: Device = self.devices[device.u\_id]}
\DoxyCodeLine{359 }
\DoxyCodeLine{360         \textcolor{keywordflow}{if} await device\_repl.use\_lock():}
\DoxyCodeLine{361             device\_repl.local\_addr = connection.address}
\DoxyCodeLine{362             device = device\_repl}
\DoxyCodeLine{363             device\_ref.ref = device\_repl}
\DoxyCodeLine{364         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{365             err: str = (}
\DoxyCodeLine{366                 f\textcolor{stringliteral}{"{}\{task\_name()\} -\/ Couldn't get use lock for device"{}}}
\DoxyCodeLine{367                 f\textcolor{stringliteral}{"{} \{device\_repl.get\_name()\} \{connection.address\})"{}}}
\DoxyCodeLine{368             )}
\DoxyCodeLine{369             LOGGER.error(err)}
\DoxyCodeLine{370             \textcolor{keywordflow}{return} DeviceTcpReturn.DEVICE\_LOCK\_TIMEOUT}
\DoxyCodeLine{371 }
\DoxyCodeLine{372         connection.received\_packages.append(json\_response)}
\DoxyCodeLine{373         device.save\_device\_message(json\_response)}
\DoxyCodeLine{374         device.local\_con = self}
\DoxyCodeLine{375 }
\DoxyCodeLine{376         \textcolor{keywordflow}{if} (}
\DoxyCodeLine{377             device.u\_id \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.message\_queue}
\DoxyCodeLine{378             \textcolor{keywordflow}{or} \textcolor{keywordflow}{not} self.message\_queue[device.u\_id]}
\DoxyCodeLine{379         ):}
\DoxyCodeLine{380             \textcolor{keywordflow}{if} device.u\_id \textcolor{keywordflow}{in} self.message\_queue:}
\DoxyCodeLine{381                 del self.message\_queue[device.u\_id]}
\DoxyCodeLine{382             \textcolor{keywordflow}{return} DeviceTcpReturn.NO\_MESSAGE\_TO\_SEND}
\DoxyCodeLine{383 }
\DoxyCodeLine{384         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} is\_new\_device \textcolor{keywordflow}{and} device.ident:}
\DoxyCodeLine{385             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a9df3b50dfc0fcc7c8ec991bb9be9c5ba}{task\_log}}(f\textcolor{stringliteral}{"{}Found device \{device.ident.unit\_id\}"{}})}
\DoxyCodeLine{386         loop: asyncio.AbstractEventLoop = asyncio.get\_event\_loop()}
\DoxyCodeLine{387 }
\DoxyCodeLine{388         \textcolor{keywordflow}{if} \textcolor{stringliteral}{"{}all"{}} \textcolor{keywordflow}{in} self.controller\_data.aes\_keys:}
\DoxyCodeLine{389             connection.aes\_key = self.controller\_data.aes\_keys[\textcolor{stringliteral}{"{}all"{}}]}
\DoxyCodeLine{390         \textcolor{keywordflow}{elif} (}
\DoxyCodeLine{391             isinstance(self.controller\_data.aes\_keys, dict)}
\DoxyCodeLine{392             \textcolor{keywordflow}{and} device.u\_id \textcolor{keywordflow}{in} self.controller\_data.aes\_keys}
\DoxyCodeLine{393         ):}
\DoxyCodeLine{394             connection.aes\_key = self.controller\_data.aes\_keys[device.u\_id]}
\DoxyCodeLine{395 }
\DoxyCodeLine{396         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{397             \textcolor{keywordflow}{if} connection.socket \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{398                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}Sending local initial vector."{}})}
\DoxyCodeLine{399                 iv\_data: bytes = DataPackage.create(}
\DoxyCodeLine{400                     connection.local\_iv, PackageType.IV}
\DoxyCodeLine{401                 ).serialize()}
\DoxyCodeLine{402                 await loop.sock\_sendall(connection.socket, iv\_data)}
\DoxyCodeLine{403         \textcolor{keywordflow}{except} socket.error:}
\DoxyCodeLine{404             \textcolor{keywordflow}{return} DeviceTcpReturn.SOCKET\_ERROR}
\DoxyCodeLine{405 }
\DoxyCodeLine{406         \textcolor{keywordflow}{return} DeviceTcpReturn.NO\_ERROR}
\DoxyCodeLine{407 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a4ce11db96280d000941a91cb37df2842_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a4ce11db96280d000941a91cb37df2842_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a46f68728bc59f0e5991bc390f67f2685}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a46f68728bc59f0e5991bc390f67f2685}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!process\_message\_answer\_package@{process\_message\_answer\_package}}
\index{process\_message\_answer\_package@{process\_message\_answer\_package}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{process\_message\_answer\_package()}{process\_message\_answer\_package()}}
{\footnotesize\ttfamily  Device\+Tcp\+Return local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+process\+\_\+message\+\_\+answer\+\_\+package (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{Tcp\+Connection}]{connection,  }\item[{\mbox{\hyperlink{classbytes}{bytes}}}]{answer,  }\item[{\mbox{\hyperlink{classklyqa__ctl_1_1devices_1_1device_1_1Device}{Device}}}]{device,  }\item[{\mbox{\hyperlink{classklyqa__ctl_1_1general_1_1message_1_1Message}{Message}} $\vert$ None}]{msg\+\_\+sent }\end{DoxyParamCaption})}

\begin{DoxyVerb}Process the encrypted device answer.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{444     ) -\/> DeviceTcpReturn:}
\DoxyCodeLine{445         \textcolor{stringliteral}{"{}"{}"{}Process the encrypted device answer."{}"{}"{}}}
\DoxyCodeLine{446 }
\DoxyCodeLine{447         return\_val: DeviceTcpReturn = DeviceTcpReturn.NO\_ERROR}
\DoxyCodeLine{448 }
\DoxyCodeLine{449         cipher: bytes = answer}
\DoxyCodeLine{450 }
\DoxyCodeLine{451         plain: bytes = connection.receiving\_aes.decrypt(cipher)}
\DoxyCodeLine{452         connection.received\_packages.append(plain)}
\DoxyCodeLine{453         \textcolor{keywordflow}{if} (}
\DoxyCodeLine{454             msg\_sent \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}}
\DoxyCodeLine{455             \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} msg\_sent.state == MessageState.ANSWERED}
\DoxyCodeLine{456         ):}
\DoxyCodeLine{457             msg\_sent.answer = plain}
\DoxyCodeLine{458             json\_response: TypeJson = \{\}}
\DoxyCodeLine{459             \textcolor{keywordflow}{try}:}
\DoxyCodeLine{460                 plain\_utf8: str = plain.decode()}
\DoxyCodeLine{461                 json\_response = json.loads(plain\_utf8)}
\DoxyCodeLine{462                 device.save\_device\_message(json\_response)}
\DoxyCodeLine{463                 connection.sent\_msg\_answer = json\_response}
\DoxyCodeLine{464                 connection.aes\_key\_confirmed = \textcolor{keyword}{True}}
\DoxyCodeLine{465                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a9df3b50dfc0fcc7c8ec991bb9be9c5ba}{task\_log}}(}
\DoxyCodeLine{466                     f\textcolor{stringliteral}{"{}device uid \{device.u\_id\} aes\_confirmed"{}}}
\DoxyCodeLine{467                     f\textcolor{stringliteral}{"{} \{connection.aes\_key\_confirmed\}"{}}}
\DoxyCodeLine{468                 )}
\DoxyCodeLine{469             \textcolor{keywordflow}{except} json.JSONDecodeError:}
\DoxyCodeLine{470                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a9df3b50dfc0fcc7c8ec991bb9be9c5ba}{task\_log}}(\textcolor{stringliteral}{"{}Could not load json message from device: "{}})}
\DoxyCodeLine{471                 LOGGER.error(}
\DoxyCodeLine{472                     \textcolor{stringliteral}{"{}Couldn't read answer from device \%s!"{}}, device.u\_id}
\DoxyCodeLine{473                 )}
\DoxyCodeLine{474                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}\%s"{}}, \mbox{\hyperlink{classstr}{str}}(answer))}
\DoxyCodeLine{475                 \textcolor{keywordflow}{return} DeviceTcpReturn.RESPONSE\_ERROR}
\DoxyCodeLine{476 }
\DoxyCodeLine{477             msg\_sent.answer\_utf8 = plain\_utf8}
\DoxyCodeLine{478             msg\_sent.answer\_json = json\_response}
\DoxyCodeLine{479             msg\_sent.state = MessageState.ANSWERED}
\DoxyCodeLine{480             msg\_sent.answered\_datetime = datetime.datetime.now()}
\DoxyCodeLine{481             return\_val = DeviceTcpReturn.ANSWERED}
\DoxyCodeLine{482 }
\DoxyCodeLine{483             \textcolor{keywordflow}{if} (}
\DoxyCodeLine{484                 msg\_sent}
\DoxyCodeLine{485                 \textcolor{keywordflow}{and} msg\_sent.callback \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}}
\DoxyCodeLine{486                 \textcolor{keywordflow}{and} device \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}}
\DoxyCodeLine{487             ):}
\DoxyCodeLine{488                 await msg\_sent.callback(msg\_sent, device.u\_id)}
\DoxyCodeLine{489                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(}
\DoxyCodeLine{490                     f\textcolor{stringliteral}{"{}device \{device.u\_id\} answered msg \{msg\_sent.msg\_queue\}"{}}}
\DoxyCodeLine{491                 )}
\DoxyCodeLine{492 }
\DoxyCodeLine{493         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(}
\DoxyCodeLine{494             \textcolor{stringliteral}{"{}\%s Request's reply decrypted: "{}} + \mbox{\hyperlink{classstr}{str}}(plain),}
\DoxyCodeLine{495             device.u\_id \textcolor{keywordflow}{if} device \textcolor{keywordflow}{else} \textcolor{stringliteral}{"{}"{}},}
\DoxyCodeLine{496         )}
\DoxyCodeLine{497         \textcolor{keywordflow}{return} return\_val}
\DoxyCodeLine{498 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a46f68728bc59f0e5991bc390f67f2685_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a46f68728bc59f0e5991bc390f67f2685_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aaa28266e241c2e30e8acd468fab06fde}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aaa28266e241c2e30e8acd468fab06fde}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!process\_tcp\_package@{process\_tcp\_package}}
\index{process\_tcp\_package@{process\_tcp\_package}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{process\_tcp\_package()}{process\_tcp\_package()}}
{\footnotesize\ttfamily  Device\+Tcp\+Return local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+process\+\_\+tcp\+\_\+package (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{Tcp\+Connection}]{connection,  }\item[{\mbox{\hyperlink{classklyqa__ctl_1_1general_1_1general_1_1ReferencePass}{Reference\+Pass}}}]{data\+\_\+ref,  }\item[{\mbox{\hyperlink{classklyqa__ctl_1_1general_1_1message_1_1Message}{Message}} $\vert$ None}]{msg\+\_\+sent,  }\item[{\mbox{\hyperlink{classklyqa__ctl_1_1general_1_1general_1_1ReferencePass}{Reference\+Pass}}}]{device\+\_\+ref }\end{DoxyParamCaption})}

\begin{DoxyVerb}Read tcp socket and process packages.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{696     ) -\/> DeviceTcpReturn:}
\DoxyCodeLine{697         \textcolor{stringliteral}{"{}"{}"{}Read tcp socket and process packages."{}"{}"{}}}
\DoxyCodeLine{698 }
\DoxyCodeLine{699         return\_val: DeviceTcpReturn = DeviceTcpReturn.NO\_ERROR}
\DoxyCodeLine{700         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{701             package: DataPackage = DataPackage.deserialize(data\_ref.ref)}
\DoxyCodeLine{702         \textcolor{keywordflow}{except} PackageException:}
\DoxyCodeLine{703             \textcolor{keywordflow}{return} DeviceTcpReturn.RESPONSE\_ERROR}
\DoxyCodeLine{704 }
\DoxyCodeLine{705         data\_ref.ref = data\_ref.ref[4 + package.length :]}
\DoxyCodeLine{706 }
\DoxyCodeLine{707         \textcolor{keywordflow}{if} (}
\DoxyCodeLine{708             connection.state == AesConnectionState.WAIT\_IV}
\DoxyCodeLine{709             \textcolor{keywordflow}{and} package.ptype == PackageType.PLAIN}
\DoxyCodeLine{710         ):}
\DoxyCodeLine{711 }
\DoxyCodeLine{712             return\_val = await self.process\_device\_identity\_package(}
\DoxyCodeLine{713                 connection, package.data, device\_ref}
\DoxyCodeLine{714             )}
\DoxyCodeLine{715             \textcolor{keywordflow}{if} return\_val != DeviceTcpReturn.NO\_ERROR:}
\DoxyCodeLine{716                 \textcolor{keywordflow}{return} return\_val}
\DoxyCodeLine{717 }
\DoxyCodeLine{718         \textcolor{keywordflow}{if} (}
\DoxyCodeLine{719             connection.state == AesConnectionState.WAIT\_IV}
\DoxyCodeLine{720             \textcolor{keywordflow}{and} package.ptype == PackageType.IV}
\DoxyCodeLine{721         ):}
\DoxyCodeLine{722             return\_val = await self.process\_aes\_initial\_vector\_package(}
\DoxyCodeLine{723                 connection, package.data, device\_ref.ref}
\DoxyCodeLine{724             )}
\DoxyCodeLine{725             \textcolor{keywordflow}{if} return\_val != DeviceTcpReturn.NO\_ERROR:}
\DoxyCodeLine{726                 \textcolor{keywordflow}{return} return\_val}
\DoxyCodeLine{727 }
\DoxyCodeLine{728         \textcolor{keywordflow}{elif} (}
\DoxyCodeLine{729             connection.state == AesConnectionState.CONNECTED}
\DoxyCodeLine{730             \textcolor{keywordflow}{and} package.ptype == PackageType.ENC}
\DoxyCodeLine{731         ):}
\DoxyCodeLine{732             return\_val = await self.process\_message\_answer\_package(}
\DoxyCodeLine{733                 connection, package.data, device\_ref.ref, msg\_sent}
\DoxyCodeLine{734             )}
\DoxyCodeLine{735         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{736             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a9df3b50dfc0fcc7c8ec991bb9be9c5ba}{task\_log}}(}
\DoxyCodeLine{737                 \textcolor{stringliteral}{"{}No answer to process. Waiting on answer of the device ... "{}}}
\DoxyCodeLine{738             )}
\DoxyCodeLine{739         \textcolor{keywordflow}{return} return\_val}
\DoxyCodeLine{740 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aaa28266e241c2e30e8acd468fab06fde_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aaa28266e241c2e30e8acd468fab06fde_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aa6b6ea4bb56f4c18b6906bab38c971a7}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aa6b6ea4bb56f4c18b6906bab38c971a7}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!read\_incoming\_tcp\_con\_task@{read\_incoming\_tcp\_con\_task}}
\index{read\_incoming\_tcp\_con\_task@{read\_incoming\_tcp\_con\_task}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{read\_incoming\_tcp\_con\_task()}{read\_incoming\_tcp\_con\_task()}}
{\footnotesize\ttfamily  tuple\mbox{[}list\mbox{[}Any\mbox{]}, list\mbox{[}Any\mbox{]}, list\mbox{[}Any\mbox{]}\mbox{]} $\vert$ None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+read\+\_\+incoming\+\_\+tcp\+\_\+con\+\_\+task (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Read incoming connections on tcp socket.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{872     ) -\/> tuple[list[Any], list[Any], list[Any]] | \textcolor{keywordtype}{None}:}
\DoxyCodeLine{873         \textcolor{stringliteral}{"{}"{}"{}Read incoming connections on tcp socket."{}"{}"{}}}
\DoxyCodeLine{874 }
\DoxyCodeLine{875         loop: AbstractEventLoop = asyncio.get\_event\_loop()}
\DoxyCodeLine{876 }
\DoxyCodeLine{877         timeout\_read: float = 0.3}
\DoxyCodeLine{878         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}Read again tcp port.."{}})}
\DoxyCodeLine{879 }
\DoxyCodeLine{880         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{881             \textcolor{keywordflow}{return} await loop.run\_in\_executor(}
\DoxyCodeLine{882                 \textcolor{keywordtype}{None},}
\DoxyCodeLine{883                 select.select,}
\DoxyCodeLine{884                 [self.tcp],}
\DoxyCodeLine{885                 [],}
\DoxyCodeLine{886                 [],}
\DoxyCodeLine{887                 timeout\_read,}
\DoxyCodeLine{888             )}
\DoxyCodeLine{889         \textcolor{keywordflow}{except} CancelledError:}
\DoxyCodeLine{890             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}cancelled tcp reading."{}})}
\DoxyCodeLine{891         \textcolor{keywordflow}{except} Exception:}
\DoxyCodeLine{892             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_ad6b753e482e539892c57f8144cf213cb}{task\_log\_trace\_ex}}()}
\DoxyCodeLine{893             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} await self.bind\_ports():}
\DoxyCodeLine{894                 LOGGER.error(\textcolor{stringliteral}{"{}Error binding ports udp 2222 and tcp 3333."{}})}
\DoxyCodeLine{895         \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}}
\DoxyCodeLine{896 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aa6b6ea4bb56f4c18b6906bab38c971a7_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a34b95b45332382bb830a3f1277878268}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a34b95b45332382bb830a3f1277878268}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!remove\_msg\_from\_queue@{remove\_msg\_from\_queue}}
\index{remove\_msg\_from\_queue@{remove\_msg\_from\_queue}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{remove\_msg\_from\_queue()}{remove\_msg\_from\_queue()}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+remove\+\_\+msg\+\_\+from\+\_\+queue (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{\mbox{\hyperlink{classklyqa__ctl_1_1general_1_1message_1_1Message}{Message}}}]{msg,  }\item[{\mbox{\hyperlink{classklyqa__ctl_1_1devices_1_1device_1_1Device}{Device}} $\vert$ None     }]{device }\end{DoxyParamCaption})}

\begin{DoxyVerb}Remove message from message queue.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{501     ) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{502         \textcolor{stringliteral}{"{}"{}"{}Remove message from message queue."{}"{}"{}}}
\DoxyCodeLine{503 }
\DoxyCodeLine{504         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} device:}
\DoxyCodeLine{505             \textcolor{keywordflow}{return}}
\DoxyCodeLine{506         \textcolor{keywordflow}{if} msg \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.message\_queue[device.u\_id]:}
\DoxyCodeLine{507             \textcolor{keywordflow}{return}}
\DoxyCodeLine{508 }
\DoxyCodeLine{509         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a9df3b50dfc0fcc7c8ec991bb9be9c5ba}{task\_log}}(\textcolor{stringliteral}{"{}remove message from queue"{}})}
\DoxyCodeLine{510         self.message\_queue[device.u\_id].remove(msg)}
\DoxyCodeLine{511         \textcolor{comment}{\# msg.state = MessageState.SENT}}
\DoxyCodeLine{512 }
\DoxyCodeLine{513         \textcolor{keywordflow}{if} (}
\DoxyCodeLine{514             device.u\_id \textcolor{keywordflow}{in} self.message\_queue}
\DoxyCodeLine{515             \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} self.message\_queue[device.u\_id]}
\DoxyCodeLine{516         ):}
\DoxyCodeLine{517             del self.message\_queue[device.u\_id]}
\DoxyCodeLine{518 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a34b95b45332382bb830a3f1277878268_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a34b95b45332382bb830a3f1277878268_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ae9be93d47c973e3c8afeed1b27fc7a4d}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ae9be93d47c973e3c8afeed1b27fc7a4d}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!search\_and\_send\_loop\_task\_alive@{search\_and\_send\_loop\_task\_alive}}
\index{search\_and\_send\_loop\_task\_alive@{search\_and\_send\_loop\_task\_alive}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{search\_and\_send\_loop\_task\_alive()}{search\_and\_send\_loop\_task\_alive()}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+search\+\_\+and\+\_\+send\+\_\+loop\+\_\+task\+\_\+alive (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Ensure broadcast's and connection handler's task is alive.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{1122     \textcolor{keyword}{def }search\_and\_send\_loop\_task\_alive(self) -\/> None:}
\DoxyCodeLine{1123         \textcolor{stringliteral}{"{}"{}"{}Ensure broadcast's and connection handler's task is alive."{}"{}"{}}}
\DoxyCodeLine{1124         loop: AbstractEventLoop = asyncio.get\_event\_loop()}
\DoxyCodeLine{1125 }
\DoxyCodeLine{1126         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.msg\_ttl\_task \textcolor{keywordflow}{or} self.msg\_ttl\_task.done():}
\DoxyCodeLine{1127             self.msg\_ttl\_task = loop.create\_task(}
\DoxyCodeLine{1128                 self.check\_messages\_time\_to\_live()}
\DoxyCodeLine{1129             )}
\DoxyCodeLine{1130 }
\DoxyCodeLine{1131         \textcolor{keywordflow}{if} (}
\DoxyCodeLine{1132             \textcolor{keywordflow}{not} self.handle\_connections\_task}
\DoxyCodeLine{1133             \textcolor{keywordflow}{or} self.handle\_connections\_task.done()}
\DoxyCodeLine{1134         ):}
\DoxyCodeLine{1135             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}search and send loop task created."{}})}
\DoxyCodeLine{1136             self.handle\_connections\_task = loop.create\_task(}
\DoxyCodeLine{1137                 self.handle\_connections()}
\DoxyCodeLine{1138             )}
\DoxyCodeLine{1139         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{1140             \textcolor{keywordflow}{if} self.\_\_send\_loop\_sleep \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{1141                 self.\_\_send\_loop\_sleep.cancel()}
\DoxyCodeLine{1142         \textcolor{keywordflow}{except} Exception:}
\DoxyCodeLine{1143             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_ad6b753e482e539892c57f8144cf213cb}{task\_log\_trace\_ex}}()}
\DoxyCodeLine{1144 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ae9be93d47c973e3c8afeed1b27fc7a4d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aae9d106df606f3c68a146e0af7f60bba}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aae9d106df606f3c68a146e0af7f60bba}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!send\_message@{send\_message}}
\index{send\_message@{send\_message}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{send\_message()}{send\_message()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classklyqa__ctl_1_1general_1_1message_1_1Message}{Message}} $\vert$ None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+send\+\_\+message (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{list\mbox{[}\mbox{\hyperlink{classklyqa__ctl_1_1general_1_1general_1_1Command}{Command}}\mbox{]}}]{send\+\_\+msgs,  }\item[{\mbox{\hyperlink{classklyqa__ctl_1_1general_1_1unit__id_1_1UnitId}{Unit\+Id}}}]{target\+\_\+device\+\_\+uid,  }\item[{float }]{time\+\_\+to\+\_\+live\+\_\+secs = {\ttfamily -\/1.0},  }\item[{$\ast$$\ast$Any}]{kwargs }\end{DoxyParamCaption})}

\begin{DoxyVerb}Add message to message's queue.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{1151     ) -\/> Message | \textcolor{keywordtype}{None}:}
\DoxyCodeLine{1152         \textcolor{stringliteral}{"{}"{}"{}Add message to message's queue."{}"{}"{}}}
\DoxyCodeLine{1153         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} send\_msgs:}
\DoxyCodeLine{1154             LOGGER.error(}
\DoxyCodeLine{1155                 f\textcolor{stringliteral}{"{}No message queue to send in message to \{target\_device\_uid\}!"{}}}
\DoxyCodeLine{1156             )}
\DoxyCodeLine{1157             \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}}
\DoxyCodeLine{1158 }
\DoxyCodeLine{1159         response\_event: asyncio.Event = asyncio.Event()}
\DoxyCodeLine{1160 }
\DoxyCodeLine{1161         async \textcolor{keyword}{def }answer(}
\DoxyCodeLine{1162             msg: Message | \textcolor{keywordtype}{None} = \textcolor{keywordtype}{None}, unit\_id: str = \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{1163         ) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{1164             response\_event.set()}
\DoxyCodeLine{1165 }
\DoxyCodeLine{1166         msg: Message = Message(}
\DoxyCodeLine{1167             datetime.datetime.now(),}
\DoxyCodeLine{1168             target\_device\_uid,}
\DoxyCodeLine{1169             msg\_queue=send\_msgs,}
\DoxyCodeLine{1170             callback=answer,}
\DoxyCodeLine{1171             time\_to\_live\_secs=time\_to\_live\_secs,}
\DoxyCodeLine{1172             **kwargs,}
\DoxyCodeLine{1173         )}
\DoxyCodeLine{1174 }
\DoxyCodeLine{1175         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} await msg.check\_msg\_ttl():}
\DoxyCodeLine{1176             \textcolor{keywordflow}{return} msg}
\DoxyCodeLine{1177 }
\DoxyCodeLine{1178         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_ab2f9a22e98cd16d0d284d22382cfcb02}{task\_log\_trace}}(}
\DoxyCodeLine{1179             f\textcolor{stringliteral}{"{}new message \{msg.msg\_counter\} target"{}}}
\DoxyCodeLine{1180             f\textcolor{stringliteral}{"{} \{target\_device\_uid\} \{send\_msgs\}"{}}}
\DoxyCodeLine{1181         )}
\DoxyCodeLine{1182 }
\DoxyCodeLine{1183         self.message\_queue.setdefault(\mbox{\hyperlink{classstr}{str}}(target\_device\_uid), []).append(msg)}
\DoxyCodeLine{1184 }
\DoxyCodeLine{1185         await self.send\_udp\_broadcast()}
\DoxyCodeLine{1186         self.search\_and\_send\_loop\_task\_alive()}
\DoxyCodeLine{1187 }
\DoxyCodeLine{1188         await response\_event.wait()}
\DoxyCodeLine{1189         \textcolor{keywordflow}{return} msg}
\DoxyCodeLine{1190 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aae9d106df606f3c68a146e0af7f60bba_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aae9d106df606f3c68a146e0af7f60bba_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a69a2aabf1a7bc94f925f914df5ceae10}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a69a2aabf1a7bc94f925f914df5ceae10}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!send\_udp\_broadcast@{send\_udp\_broadcast}}
\index{send\_udp\_broadcast@{send\_udp\_broadcast}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{send\_udp\_broadcast()}{send\_udp\_broadcast()}}
{\footnotesize\ttfamily  bool local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+send\+\_\+udp\+\_\+broadcast (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Send qcx-syn broadcast on udp socket.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{823     async \textcolor{keyword}{def }send\_udp\_broadcast(self) -\/> bool:}
\DoxyCodeLine{824         \textcolor{stringliteral}{"{}"{}"{}Send qcx-\/syn broadcast on udp socket."{}"{}"{}}}
\DoxyCodeLine{825 }
\DoxyCodeLine{826         loop: AbstractEventLoop = asyncio.get\_event\_loop()}
\DoxyCodeLine{827 }
\DoxyCodeLine{828         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{829             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}Broadcasting QCX-\/SYN Burst"{}})}
\DoxyCodeLine{830             \textcolor{keywordflow}{if} self.udp:}
\DoxyCodeLine{831                 \textcolor{comment}{\# loop.sock\_sendto python3.11+}}
\DoxyCodeLine{832                 await loop.run\_in\_executor(}
\DoxyCodeLine{833                     \textcolor{keywordtype}{None},}
\DoxyCodeLine{834                     self.udp.sendto,}
\DoxyCodeLine{835                     \textcolor{stringliteral}{"{}QCX-\/SYN"{}}.encode(\textcolor{stringliteral}{"{}utf-\/8"{}}),}
\DoxyCodeLine{836                     (\textcolor{stringliteral}{"{}255.255.255.255"{}}, 2222),}
\DoxyCodeLine{837                 )}
\DoxyCodeLine{838             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{839                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}}
\DoxyCodeLine{840 }
\DoxyCodeLine{841         \textcolor{keywordflow}{except} socket.error:}
\DoxyCodeLine{842             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}Broadcasting QCX-\/SYN Burst Exception"{}})}
\DoxyCodeLine{843             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_ad6b753e482e539892c57f8144cf213cb}{task\_log\_trace\_ex}}()}
\DoxyCodeLine{844             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} await self.bind\_ports():}
\DoxyCodeLine{845                 LOGGER.error(\textcolor{stringliteral}{"{}Error binding ports udp 2222 and tcp 3333."{}})}
\DoxyCodeLine{846                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}}
\DoxyCodeLine{847         \textcolor{keywordflow}{return} \textcolor{keyword}{True}}
\DoxyCodeLine{848 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a69a2aabf1a7bc94f925f914df5ceae10_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a69a2aabf1a7bc94f925f914df5ceae10_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ab8a8460610614f6230bbf346fc532269}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ab8a8460610614f6230bbf346fc532269}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!server\_ip@{server\_ip}}
\index{server\_ip@{server\_ip}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{server\_ip()}{server\_ip()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classstr}{str}} local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+server\+\_\+ip (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{138     \textcolor{keyword}{def }server\_ip(self) -\/> str:}
\DoxyCodeLine{139         \textcolor{keywordflow}{return} self.\_attr\_server\_ip}
\DoxyCodeLine{140 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ab8a8460610614f6230bbf346fc532269_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aebdf9201096932f18c4f28e1e084d267}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aebdf9201096932f18c4f28e1e084d267}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!server\_ip@{server\_ip}}
\index{server\_ip@{server\_ip}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{server\_ip()}{server\_ip()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+server\+\_\+ip (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{\mbox{\hyperlink{classstr}{str}}}]{server\+\_\+ip }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{142     \textcolor{keyword}{def }server\_ip(self, server\_ip: str) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{143         self.\_attr\_server\_ip = server\_ip}
\DoxyCodeLine{144 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aebdf9201096932f18c4f28e1e084d267_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aebdf9201096932f18c4f28e1e084d267_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a3510d32dbcb1a08fcd7796e2d8d2bdd6}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a3510d32dbcb1a08fcd7796e2d8d2bdd6}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!shutdown@{shutdown}}
\index{shutdown@{shutdown}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{shutdown()}{shutdown()}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+shutdown (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Close sockets and Unbind local ports.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{224     async \textcolor{keyword}{def }shutdown(self) -\/> None:}
\DoxyCodeLine{225         \textcolor{stringliteral}{"{}"{}"{}Close sockets and Unbind local ports."{}"{}"{}}}
\DoxyCodeLine{226 }
\DoxyCodeLine{227         await self.handle\_connections\_task\_stop()}
\DoxyCodeLine{228 }
\DoxyCodeLine{229         \textcolor{keywordflow}{if} self.tcp:}
\DoxyCodeLine{230             \textcolor{keywordflow}{try}:}
\DoxyCodeLine{231                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}Closing TCP port 3333"{}})}
\DoxyCodeLine{232                 self.tcp.shutdown(socket.SHUT\_RDWR)}
\DoxyCodeLine{233                 self.tcp.close()}
\DoxyCodeLine{234                 self.tcp = \textcolor{keywordtype}{None}}
\DoxyCodeLine{235             \textcolor{keywordflow}{except} (socket.herror, socket.gaierror, socket.timeout):}
\DoxyCodeLine{236                 LOGGER.error(\textcolor{stringliteral}{"{}Error on closing local tcp port 3333."{}})}
\DoxyCodeLine{237                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_ad6b753e482e539892c57f8144cf213cb}{task\_log\_trace\_ex}}()}
\DoxyCodeLine{238 }
\DoxyCodeLine{239         \textcolor{keywordflow}{if} self.udp:}
\DoxyCodeLine{240             \textcolor{keywordflow}{try}:}
\DoxyCodeLine{241                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}Closing UDP port 2222"{}})}
\DoxyCodeLine{242                 self.udp.close()}
\DoxyCodeLine{243                 self.udp = \textcolor{keywordtype}{None}}
\DoxyCodeLine{244             \textcolor{keywordflow}{except} (socket.herror, socket.gaierror, socket.timeout):}
\DoxyCodeLine{245                 LOGGER.error(\textcolor{stringliteral}{"{}Error on closing local udp port 2222."{}})}
\DoxyCodeLine{246                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_ad6b753e482e539892c57f8144cf213cb}{task\_log\_trace\_ex}}()}
\DoxyCodeLine{247 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a3510d32dbcb1a08fcd7796e2d8d2bdd6_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aed3640a60ff23b9532ca91ebd2a9d01a}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aed3640a60ff23b9532ca91ebd2a9d01a}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!standby@{standby}}
\index{standby@{standby}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{standby()}{standby()}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+standby (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Standby search devices and create incoming connection tasks.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{849     async \textcolor{keyword}{def }standby(self) -\/> None:}
\DoxyCodeLine{850         \textcolor{stringliteral}{"{}"{}"{}Standby search devices and create incoming connection tasks."{}"{}"{}}}
\DoxyCodeLine{851 }
\DoxyCodeLine{852         loop: AbstractEventLoop = asyncio.get\_event\_loop()}
\DoxyCodeLine{853         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{854             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}sleep task create (broadcasts).."{}})}
\DoxyCodeLine{855             self.\_\_send\_loop\_sleep = loop.create\_task(}
\DoxyCodeLine{856                 asyncio.sleep(}
\DoxyCodeLine{857                     SEND\_LOOP\_MAX\_SLEEP\_TIME}
\DoxyCodeLine{858                     \textcolor{keywordflow}{if} (len(self.message\_queue) > 0)}
\DoxyCodeLine{859                     \textcolor{keywordflow}{else} 1000000000}
\DoxyCodeLine{860                 )}
\DoxyCodeLine{861             )}
\DoxyCodeLine{862 }
\DoxyCodeLine{863             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}sleep task wait.."{}})}
\DoxyCodeLine{864             await asyncio.wait([self.\_\_send\_loop\_sleep])}
\DoxyCodeLine{865 }
\DoxyCodeLine{866             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}sleep task done.."{}})}
\DoxyCodeLine{867         \textcolor{keywordflow}{except} CancelledError:}
\DoxyCodeLine{868             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}sleep cancelled1."{}})}
\DoxyCodeLine{869 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aed3640a60ff23b9532ca91ebd2a9d01a_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aed3640a60ff23b9532ca91ebd2a9d01a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a00d69811c9433020eb1ec3b24383008e}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a00d69811c9433020eb1ec3b24383008e}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!tcp@{tcp}}
\index{tcp@{tcp}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{tcp()}{tcp()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily  socket.\+socket $\vert$ None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+tcp (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{122     \textcolor{keyword}{def }\mbox{\hyperlink{namespaceklyqa__ctl_1_1test__bind__socket_a90de9b52de5b15b4cd86378028abccd6}{tcp}}(self) -\/> socket.socket | None:}
\DoxyCodeLine{123         \textcolor{keywordflow}{return} self.\_attr\_tcp}
\DoxyCodeLine{124 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a00d69811c9433020eb1ec3b24383008e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a0f8caa333a22c79922997c34d9d7b868}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a0f8caa333a22c79922997c34d9d7b868}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!tcp@{tcp}}
\index{tcp@{tcp}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{tcp()}{tcp()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+tcp (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{socket.\+socket $\vert$ None}]{tcp }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{126     \textcolor{keyword}{def }\mbox{\hyperlink{namespaceklyqa__ctl_1_1test__bind__socket_a90de9b52de5b15b4cd86378028abccd6}{tcp}}(self, tcp: socket.socket | \textcolor{keywordtype}{None}) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{127         self.\_attr\_tcp = tcp}
\DoxyCodeLine{128 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a0f8caa333a22c79922997c34d9d7b868_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a9ff5b865c574faa82b43f8578b0bd564}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a9ff5b865c574faa82b43f8578b0bd564}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!udp@{udp}}
\index{udp@{udp}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{udp()}{udp()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily  socket.\+socket $\vert$ None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+udp (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{130     \textcolor{keyword}{def }udp(self) -\/> socket.socket | None:}
\DoxyCodeLine{131         \textcolor{keywordflow}{return} self.\_attr\_udp}
\DoxyCodeLine{132 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a9ff5b865c574faa82b43f8578b0bd564_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a577fb1c5fd541b50f25314acf0f9ee84}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a577fb1c5fd541b50f25314acf0f9ee84}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!udp@{udp}}
\index{udp@{udp}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{udp()}{udp()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily  None local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+udp (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{socket.\+socket $\vert$ None}]{udp }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{134     \textcolor{keyword}{def }udp(self, udp: socket.socket | \textcolor{keywordtype}{None}) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{135         self.\_attr\_udp = udp}
\DoxyCodeLine{136 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a577fb1c5fd541b50f25314acf0f9ee84_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a1feda3b6377035d969d4e21b4540ef14}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a1feda3b6377035d969d4e21b4540ef14}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_\_attr\_read\_tcp\_task@{\_\_attr\_read\_tcp\_task}}
\index{\_\_attr\_read\_tcp\_task@{\_\_attr\_read\_tcp\_task}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_\_attr\_read\_tcp\_task}{\_\_attr\_read\_tcp\_task}}
{\footnotesize\ttfamily local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+\+\_\+attr\+\_\+read\+\_\+tcp\+\_\+task\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a3f66f22f149d55906c40fff1df106447}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a3f66f22f149d55906c40fff1df106447}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_\_attr\_send\_loop\_sleep@{\_\_attr\_send\_loop\_sleep}}
\index{\_\_attr\_send\_loop\_sleep@{\_\_attr\_send\_loop\_sleep}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_\_attr\_send\_loop\_sleep}{\_\_attr\_send\_loop\_sleep}}
{\footnotesize\ttfamily local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+\+\_\+attr\+\_\+send\+\_\+loop\+\_\+sleep\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a98999cb56a4b93a97541deaf9cb3cb35}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a98999cb56a4b93a97541deaf9cb3cb35}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_\_attr\_tasks\_done@{\_\_attr\_tasks\_done}}
\index{\_\_attr\_tasks\_done@{\_\_attr\_tasks\_done}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_\_attr\_tasks\_done}{\_\_attr\_tasks\_done}}
{\footnotesize\ttfamily local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+\+\_\+attr\+\_\+tasks\+\_\+done\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a129a15e834ca7f110952eb7e58ac0013}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a129a15e834ca7f110952eb7e58ac0013}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_\_attr\_tasks\_undone@{\_\_attr\_tasks\_undone}}
\index{\_\_attr\_tasks\_undone@{\_\_attr\_tasks\_undone}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_\_attr\_tasks\_undone}{\_\_attr\_tasks\_undone}}
{\footnotesize\ttfamily local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+\+\_\+attr\+\_\+tasks\+\_\+undone\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ab01f2e382ae425e5bc2818772d059a56}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ab01f2e382ae425e5bc2818772d059a56}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_\_read\_tcp\_task@{\_\_read\_tcp\_task}}
\index{\_\_read\_tcp\_task@{\_\_read\_tcp\_task}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_\_read\_tcp\_task}{\_\_read\_tcp\_task}}
{\footnotesize\ttfamily local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+\+\_\+read\+\_\+tcp\+\_\+task\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a2b51fa92e94e68a7ce1cfa9476beee3b}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a2b51fa92e94e68a7ce1cfa9476beee3b}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_\_send\_loop\_sleep@{\_\_send\_loop\_sleep}}
\index{\_\_send\_loop\_sleep@{\_\_send\_loop\_sleep}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_\_send\_loop\_sleep}{\_\_send\_loop\_sleep}}
{\footnotesize\ttfamily local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+\+\_\+send\+\_\+loop\+\_\+sleep\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aad755d50b86f166cc07d60a73be07d27}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aad755d50b86f166cc07d60a73be07d27}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_\_tasks\_undone@{\_\_tasks\_undone}}
\index{\_\_tasks\_undone@{\_\_tasks\_undone}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_\_tasks\_undone}{\_\_tasks\_undone}}
{\footnotesize\ttfamily local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+\+\_\+tasks\+\_\+undone\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ae4afde55789d67ca141f32cd0f2c2493}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ae4afde55789d67ca141f32cd0f2c2493}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_attr\_controller\_data@{\_attr\_controller\_data}}
\index{\_attr\_controller\_data@{\_attr\_controller\_data}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_attr\_controller\_data}{\_attr\_controller\_data}}
{\footnotesize\ttfamily local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+attr\+\_\+controller\+\_\+data\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a87b7dc39e44da267c0eefd59d2b2672e}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a87b7dc39e44da267c0eefd59d2b2672e}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_attr\_current\_addr\_connections@{\_attr\_current\_addr\_connections}}
\index{\_attr\_current\_addr\_connections@{\_attr\_current\_addr\_connections}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_attr\_current\_addr\_connections}{\_attr\_current\_addr\_connections}}
{\footnotesize\ttfamily local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+attr\+\_\+current\+\_\+addr\+\_\+connections\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a6493a246d69932bec84ca4e7b6b388fe}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a6493a246d69932bec84ca4e7b6b388fe}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_attr\_devices@{\_attr\_devices}}
\index{\_attr\_devices@{\_attr\_devices}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_attr\_devices}{\_attr\_devices}}
{\footnotesize\ttfamily local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+attr\+\_\+devices\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_afab4cc85b5f9fa33a1e32e71433c3c2b}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_afab4cc85b5f9fa33a1e32e71433c3c2b}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_attr\_handle\_connections\_task\_end\_now@{\_attr\_handle\_connections\_task\_end\_now}}
\index{\_attr\_handle\_connections\_task\_end\_now@{\_attr\_handle\_connections\_task\_end\_now}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_attr\_handle\_connections\_task\_end\_now}{\_attr\_handle\_connections\_task\_end\_now}}
{\footnotesize\ttfamily local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+attr\+\_\+handle\+\_\+connections\+\_\+task\+\_\+end\+\_\+now\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a34d28f73c88f0446897aa36b5c7b10ac}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a34d28f73c88f0446897aa36b5c7b10ac}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_attr\_handlec\_connections\_task@{\_attr\_handlec\_connections\_task}}
\index{\_attr\_handlec\_connections\_task@{\_attr\_handlec\_connections\_task}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_attr\_handlec\_connections\_task}{\_attr\_handlec\_connections\_task}}
{\footnotesize\ttfamily local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+attr\+\_\+handlec\+\_\+connections\+\_\+task\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a9743831efb2f611d2348a5602e7ef302}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a9743831efb2f611d2348a5602e7ef302}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_attr\_message\_queue@{\_attr\_message\_queue}}
\index{\_attr\_message\_queue@{\_attr\_message\_queue}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_attr\_message\_queue}{\_attr\_message\_queue}}
{\footnotesize\ttfamily local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+attr\+\_\+message\+\_\+queue\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_af3e5bcdcf6810250f40c567df909e41f}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_af3e5bcdcf6810250f40c567df909e41f}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_attr\_network\_interface@{\_attr\_network\_interface}}
\index{\_attr\_network\_interface@{\_attr\_network\_interface}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_attr\_network\_interface}{\_attr\_network\_interface}}
{\footnotesize\ttfamily local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+attr\+\_\+network\+\_\+interface\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aecb45be484a4b7c1ae8c1e9bca8c3ee7}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aecb45be484a4b7c1ae8c1e9bca8c3ee7}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_attr\_server\_ip@{\_attr\_server\_ip}}
\index{\_attr\_server\_ip@{\_attr\_server\_ip}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_attr\_server\_ip}{\_attr\_server\_ip}}
{\footnotesize\ttfamily local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+attr\+\_\+server\+\_\+ip\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a8a5ac8d6f4dea27c50196afd9652a346}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a8a5ac8d6f4dea27c50196afd9652a346}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_attr\_tcp@{\_attr\_tcp}}
\index{\_attr\_tcp@{\_attr\_tcp}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_attr\_tcp}{\_attr\_tcp}}
{\footnotesize\ttfamily local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+attr\+\_\+tcp\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ad5c7aa585d0caeb47f8faa346190a3a7}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ad5c7aa585d0caeb47f8faa346190a3a7}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!\_attr\_udp@{\_attr\_udp}}
\index{\_attr\_udp@{\_attr\_udp}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{\_attr\_udp}{\_attr\_udp}}
{\footnotesize\ttfamily local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+\_\+attr\+\_\+udp\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a1f5deccf8a67169afa7e67c53cd569e5}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a1f5deccf8a67169afa7e67c53cd569e5}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!handle\_connections\_task@{handle\_connections\_task}}
\index{handle\_connections\_task@{handle\_connections\_task}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{handle\_connections\_task}{handle\_connections\_task}}
{\footnotesize\ttfamily local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+handle\+\_\+connections\+\_\+task}

\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a828ca7aef56188a7dd4bd1b18b7cea85}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a828ca7aef56188a7dd4bd1b18b7cea85}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!handle\_connections\_task\_end\_now@{handle\_connections\_task\_end\_now}}
\index{handle\_connections\_task\_end\_now@{handle\_connections\_task\_end\_now}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{handle\_connections\_task\_end\_now}{handle\_connections\_task\_end\_now}}
{\footnotesize\ttfamily local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+handle\+\_\+connections\+\_\+task\+\_\+end\+\_\+now}

\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aa8d21a3d613da986068dc05e8ea8c4a7}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_aa8d21a3d613da986068dc05e8ea8c4a7}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!message\_queue@{message\_queue}}
\index{message\_queue@{message\_queue}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{message\_queue}{message\_queue}}
{\footnotesize\ttfamily local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+message\+\_\+queue}

\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ac3bb2f33c3dd9a46ba505569ec001ab3}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_ac3bb2f33c3dd9a46ba505569ec001ab3}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!msg\_ttl\_task@{msg\_ttl\_task}}
\index{msg\_ttl\_task@{msg\_ttl\_task}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{msg\_ttl\_task}{msg\_ttl\_task}}
{\footnotesize\ttfamily local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+msg\+\_\+ttl\+\_\+task}

\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a06a29b1bf1327ddeb687e4062ee1110d}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a06a29b1bf1327ddeb687e4062ee1110d}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!tcp@{tcp}}
\index{tcp@{tcp}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{tcp}{tcp}}
{\footnotesize\ttfamily local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+tcp}

\mbox{\Hypertarget{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a8707b5729524d2c0a4e5e1b2116d22c2}\label{classlocal_1_1connection__handler_1_1LocalConnectionHandler_a8707b5729524d2c0a4e5e1b2116d22c2}} 
\index{local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}!udp@{udp}}
\index{udp@{udp}!local.connection\_handler.LocalConnectionHandler@{local.connection\_handler.LocalConnectionHandler}}
\doxysubsubsection{\texorpdfstring{udp}{udp}}
{\footnotesize\ttfamily local.\+connection\+\_\+handler.\+Local\+Connection\+Handler.\+udp}



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
communication/local/\mbox{\hyperlink{local_2connection__handler_8py}{connection\+\_\+handler.\+py}}\end{DoxyCompactItemize}
