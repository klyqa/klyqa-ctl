\hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client}{}\doxysection{klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client Class Reference}
\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client}\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}


Inheritance diagram for klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
None \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a570182fabfabe16d361dc84af62bad0b}{\+\_\+\+\_\+init\+\_\+\+\_\+}} (self, dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, \mbox{\hyperlink{classklyqa__ctl_1_1account_1_1Account}{Account}}\mbox{]}$\vert$None \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a61a7eb1acfc9b763efe83dcda25ba552}{accounts}}=None)
\item 
Local\+Connection\+Handler$\vert$None \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ab04dda2165aadfb9688ff83d3e5a3bc9}{local}} (self)
\item 
None \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a3cdabc8aa3a95c4adda1df1949cda05d}{local}} (self, Local\+Connection\+Handler$\vert$None local)
\item 
dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, \mbox{\hyperlink{classklyqa__ctl_1_1account_1_1Account}{Account}}\mbox{]} \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a61a7eb1acfc9b763efe83dcda25ba552}{accounts}} (self)
\item 
None \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_af3198f7c13e93b4da93d04fbb2c46532}{accounts}} (self, dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, \mbox{\hyperlink{classklyqa__ctl_1_1account_1_1Account}{Account}}\mbox{]} accounts)
\item 
Cloud\+Backend$\vert$None \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a7d8a302d936e8e1889f175bac259f565}{cloud}} (self)
\item 
None \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a74e8c8e307949b86d7d49356ec8cd9b8}{cloud}} (self, Cloud\+Backend cloud)
\item 
\mbox{\hyperlink{classklyqa__ctl_1_1account_1_1Account}{Account}} \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ab129f0608f5651109b893aed3671e00e}{add\+\_\+account}} (self, \mbox{\hyperlink{classstr}{str}} username, \mbox{\hyperlink{classstr}{str}} password=\char`\"{}\char`\"{}, bool print\+\_\+onboarded\+\_\+devices=False)
\item 
None \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ac54c4bdc0dfa3897a09efe3655741bd0}{shutdown}} (self)
\item 
None \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_aca681010a08f941d9f65888e99cd6374}{discover\+\_\+devices}} (self, argparse.\+Namespace args, list\mbox{[}Any\mbox{]} message\+\_\+queue\+\_\+tx\+\_\+local, set\mbox{[}Any\mbox{]} target\+\_\+device\+\_\+uids)
\item 
\mbox{\hyperlink{classstr}{str}}$\vert$set\mbox{[}\mbox{\hyperlink{classstr}{str}}\mbox{]} \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a40aba5774804e631745f63c3c91ec049}{select\+\_\+device}} (self, argparse.\+Namespace args, datetime.\+datetime send\+\_\+started\+\_\+local)
\item 
\mbox{\hyperlink{classstr}{str}}$\vert$bool$\vert$int$\vert$set \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ad5c42cd8dd34ed1d6329040e164bfc2e}{send\+\_\+to\+\_\+devices}} (self, argparse.\+Namespace args, list\mbox{[}Any\mbox{]} args\+\_\+in, int timeout\+\_\+ms=5000, Callable\mbox{[}\mbox{[}\mbox{\hyperlink{classklyqa__ctl_1_1general_1_1message_1_1Message}{Message}}, \mbox{\hyperlink{classstr}{str}}\mbox{]}, Any\mbox{]}$\vert$None async\+\_\+answer\+\_\+callback=None)
\item 
int \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a7a93bda9f242d678a4208d0962837f11}{send\+\_\+to\+\_\+devices\+\_\+wrapped}} (self, argparse.\+Namespace args\+\_\+parsed, list\mbox{[}Any\mbox{]} args\+\_\+in, int timeout\+\_\+ms=5000)
\item 
\mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client}{Client}} \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a7ca48cb5c46c0fe0dbf5c469fe515ea6}{create}} (Any cls, bool \mbox{\hyperlink{classklyqa__ctl_1_1controller__data_1_1ControllerData_a4db20468ab1574d0198a02bf2e05b1ec}{interactive\+\_\+prompts}}=False, bool \mbox{\hyperlink{classklyqa__ctl_1_1controller__data_1_1ControllerData_acb31c4dc35406e234e75902d1972ae7a}{offline}}=False, \mbox{\hyperlink{classstr}{str}} server\+\_\+ip=\char`\"{}0.\+0.\+0.\+0\char`\"{}, \mbox{\hyperlink{classstr}{str}}$\vert$None network\+\_\+interface=None)
\item 
\mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client}{Client}} \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a4c89a534b94647d2ab500dc1a876686e}{create\+\_\+worker}} (Any cls, bool \mbox{\hyperlink{classklyqa__ctl_1_1controller__data_1_1ControllerData_acb31c4dc35406e234e75902d1972ae7a}{offline}}=False, \mbox{\hyperlink{classstr}{str}} server\+\_\+ip=\char`\"{}0.\+0.\+0.\+0\char`\"{}, \mbox{\hyperlink{classstr}{str}}$\vert$None network\+\_\+interface=None)
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a287a2a6993c136f4612d37c1c61f4c3f}{\+\_\+attr\+\_\+local}}
\item 
\mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a8a4103a5925e93ce5c70c841248cf98c}{\+\_\+attr\+\_\+accounts}}
\item 
\mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a662a27da095d439cea492bb5723f3e66}{\+\_\+attr\+\_\+cloud}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}Major klyqa-ctl client class.\end{DoxyVerb}
 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a570182fabfabe16d361dc84af62bad0b}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a570182fabfabe16d361dc84af62bad0b}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!\_\_init\_\_@{\_\_init\_\_}}
\index{\_\_init\_\_@{\_\_init\_\_}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{\_\_init\_\_()}{\_\_init\_\_()}}
{\footnotesize\ttfamily  None klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, \mbox{\hyperlink{classklyqa__ctl_1_1account_1_1Account}{Account}}\mbox{]} $\vert$ None }]{accounts = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Initialize the client.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{87     ) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{88         \textcolor{stringliteral}{"{}"{}"{}Initialize the client."{}"{}"{}}}
\DoxyCodeLine{89 }
\DoxyCodeLine{90         super().\_\_init\_\_()}
\DoxyCodeLine{91         self.\_attr\_local: LocalConnectionHandler | \textcolor{keywordtype}{None} = \textcolor{keywordtype}{None}}
\DoxyCodeLine{92         self.\_attr\_cloud: CloudBackend | \textcolor{keywordtype}{None} = \textcolor{keywordtype}{None}}
\DoxyCodeLine{93         self.\_attr\_accounts: dict[str, Account] = (}
\DoxyCodeLine{94             \{\} \textcolor{keywordflow}{if} accounts \textcolor{keywordflow}{is} \textcolor{keywordtype}{None} \textcolor{keywordflow}{else} accounts}
\DoxyCodeLine{95         )}
\DoxyCodeLine{96 }

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a61a7eb1acfc9b763efe83dcda25ba552}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a61a7eb1acfc9b763efe83dcda25ba552}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!accounts@{accounts}}
\index{accounts@{accounts}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{accounts()}{accounts()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily  dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, \mbox{\hyperlink{classklyqa__ctl_1_1account_1_1Account}{Account}}\mbox{]} klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+accounts (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{106     \textcolor{keyword}{def }accounts(self) -\/> dict[str, Account]:}
\DoxyCodeLine{107         \textcolor{keywordflow}{return} self.\_attr\_accounts}
\DoxyCodeLine{108 }

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a61a7eb1acfc9b763efe83dcda25ba552_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_af3198f7c13e93b4da93d04fbb2c46532}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_af3198f7c13e93b4da93d04fbb2c46532}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!accounts@{accounts}}
\index{accounts@{accounts}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{accounts()}{accounts()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily  None klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+accounts (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, \mbox{\hyperlink{classklyqa__ctl_1_1account_1_1Account}{Account}}\mbox{]}}]{accounts }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{110     \textcolor{keyword}{def }accounts(self, accounts: dict[str, Account]) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{111         self.\_attr\_accounts = accounts}
\DoxyCodeLine{112 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_af3198f7c13e93b4da93d04fbb2c46532_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_af3198f7c13e93b4da93d04fbb2c46532_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ab129f0608f5651109b893aed3671e00e}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ab129f0608f5651109b893aed3671e00e}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!add\_account@{add\_account}}
\index{add\_account@{add\_account}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{add\_account()}{add\_account()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classklyqa__ctl_1_1account_1_1Account}{Account}} klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+add\+\_\+account (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{\mbox{\hyperlink{classstr}{str}}}]{username,  }\item[{\mbox{\hyperlink{classstr}{str}} }]{password = {\ttfamily \char`\"{}\char`\"{}},  }\item[{bool }]{print\+\_\+onboarded\+\_\+devices = {\ttfamily False} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Add user account to client.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{131     ) -\/> Account:}
\DoxyCodeLine{132         \textcolor{stringliteral}{"{}"{}"{}Add user account to client."{}"{}"{}}}
\DoxyCodeLine{133 }
\DoxyCodeLine{134         account = await Account.create\_default(}
\DoxyCodeLine{135             self,}
\DoxyCodeLine{136             cloud=self.cloud,}
\DoxyCodeLine{137             username=username,}
\DoxyCodeLine{138             password=password,}
\DoxyCodeLine{139             print\_onboarded\_devices=print\_onboarded\_devices,}
\DoxyCodeLine{140         )}
\DoxyCodeLine{141         self.accounts[account.username] = account}
\DoxyCodeLine{142 }
\DoxyCodeLine{143         \textcolor{keywordflow}{return} account}
\DoxyCodeLine{144 }

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ab129f0608f5651109b893aed3671e00e_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a7d8a302d936e8e1889f175bac259f565}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a7d8a302d936e8e1889f175bac259f565}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!cloud@{cloud}}
\index{cloud@{cloud}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{cloud()}{cloud()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily  Cloud\+Backend $\vert$ None klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+cloud (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{114     \textcolor{keyword}{def }\mbox{\hyperlink{namespacecloud}{cloud}}(self) -\/> CloudBackend | None:}
\DoxyCodeLine{115         \textcolor{keywordflow}{return} self.\_attr\_cloud}
\DoxyCodeLine{116 }

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a7d8a302d936e8e1889f175bac259f565_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a74e8c8e307949b86d7d49356ec8cd9b8}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a74e8c8e307949b86d7d49356ec8cd9b8}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!cloud@{cloud}}
\index{cloud@{cloud}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{cloud()}{cloud()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily  None klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+cloud (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{Cloud\+Backend}]{cloud }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{118     \textcolor{keyword}{def }\mbox{\hyperlink{namespacecloud}{cloud}}(self, cloud: CloudBackend) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{119         self.\_attr\_cloud = cloud}
\DoxyCodeLine{120 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a74e8c8e307949b86d7d49356ec8cd9b8_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a74e8c8e307949b86d7d49356ec8cd9b8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a7ca48cb5c46c0fe0dbf5c469fe515ea6}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a7ca48cb5c46c0fe0dbf5c469fe515ea6}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!create@{create}}
\index{create@{create}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{create()}{create()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client}{Client}} klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+create (\begin{DoxyParamCaption}\item[{Any}]{cls,  }\item[{bool }]{interactive\+\_\+prompts = {\ttfamily False},  }\item[{bool }]{offline = {\ttfamily False},  }\item[{\mbox{\hyperlink{classstr}{str}} }]{server\+\_\+ip = {\ttfamily \char`\"{}0.0.0.0\char`\"{}},  }\item[{\mbox{\hyperlink{classstr}{str}} $\vert$ None }]{network\+\_\+interface = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Client factory.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{665     ) -\/> Client:}
\DoxyCodeLine{666         \textcolor{stringliteral}{"{}"{}"{}Client factory."{}"{}"{}}}
\DoxyCodeLine{667 }
\DoxyCodeLine{668         cl: Client = Client()}
\DoxyCodeLine{669         cl.\_attr\_interactive\_prompts = interactive\_prompts}
\DoxyCodeLine{670         cl.\_attr\_offline = offline}
\DoxyCodeLine{671         await cl.init()}
\DoxyCodeLine{672 }
\DoxyCodeLine{673         cl.local = LocalConnectionHandler.create\_default(}
\DoxyCodeLine{674             cl,}
\DoxyCodeLine{675             server\_ip=server\_ip,}
\DoxyCodeLine{676             network\_interface=network\_interface,}
\DoxyCodeLine{677         )}
\DoxyCodeLine{678 }
\DoxyCodeLine{679         cl.cloud = CloudBackend.create\_default(cl)}
\DoxyCodeLine{680 }
\DoxyCodeLine{681         \textcolor{keywordflow}{return} cl}
\DoxyCodeLine{682 }

\end{DoxyCode}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a4c89a534b94647d2ab500dc1a876686e}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a4c89a534b94647d2ab500dc1a876686e}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!create\_worker@{create\_worker}}
\index{create\_worker@{create\_worker}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{create\_worker()}{create\_worker()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client}{Client}} klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+create\+\_\+worker (\begin{DoxyParamCaption}\item[{Any}]{cls,  }\item[{bool }]{offline = {\ttfamily False},  }\item[{\mbox{\hyperlink{classstr}{str}} }]{server\+\_\+ip = {\ttfamily \char`\"{}0.0.0.0\char`\"{}},  }\item[{\mbox{\hyperlink{classstr}{str}} $\vert$ None }]{network\+\_\+interface = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Factory client used as a non-interactive library.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{689     ) -\/> Client:}
\DoxyCodeLine{690         \textcolor{stringliteral}{"{}"{}"{}Factory client used as a non-\/interactive library."{}"{}"{}}}
\DoxyCodeLine{691 }
\DoxyCodeLine{692         \textcolor{keywordflow}{return} await Client.create(}
\DoxyCodeLine{693             interactive\_prompts=\textcolor{keyword}{False},}
\DoxyCodeLine{694             offline=offline,}
\DoxyCodeLine{695             server\_ip=server\_ip,}
\DoxyCodeLine{696             network\_interface=network\_interface,}
\DoxyCodeLine{697         )}
\DoxyCodeLine{698 }
\DoxyCodeLine{699 }

\end{DoxyCode}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_aca681010a08f941d9f65888e99cd6374}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_aca681010a08f941d9f65888e99cd6374}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!discover\_devices@{discover\_devices}}
\index{discover\_devices@{discover\_devices}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{discover\_devices()}{discover\_devices()}}
{\footnotesize\ttfamily  None klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+discover\+\_\+devices (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{argparse.\+Namespace}]{args,  }\item[{list\mbox{[}Any\mbox{]}}]{message\+\_\+queue\+\_\+tx\+\_\+local,  }\item[{set\mbox{[}Any\mbox{]}}]{target\+\_\+device\+\_\+uids }\end{DoxyParamCaption})}

\begin{DoxyVerb}Discover devices.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{158     ) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{159         \textcolor{stringliteral}{"{}"{}"{}Discover devices."{}"{}"{}}}
\DoxyCodeLine{160         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.local:}
\DoxyCodeLine{161             \textcolor{keywordflow}{return}}
\DoxyCodeLine{162 }
\DoxyCodeLine{163         print(SEPARATION\_WIDTH * \textcolor{stringliteral}{"{}-\/"{}})}
\DoxyCodeLine{164         print(\textcolor{stringliteral}{"{}Search local network for devices ..."{}})}
\DoxyCodeLine{165         print(SEPARATION\_WIDTH * \textcolor{stringliteral}{"{}-\/"{}})}
\DoxyCodeLine{166 }
\DoxyCodeLine{167         discover\_timeout\_secs: float = 2.5}
\DoxyCodeLine{168 }
\DoxyCodeLine{169         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}discover ping start"{}})}
\DoxyCodeLine{170         \textcolor{comment}{\# send a message to uid "{}all"{} which is fake but will get the}}
\DoxyCodeLine{171         \textcolor{comment}{\# identification message from the devices in the aes\_search and}}
\DoxyCodeLine{172         \textcolor{comment}{\# send msg function and we can send then a real}}
\DoxyCodeLine{173         \textcolor{comment}{\# request message to these discovered devices.}}
\DoxyCodeLine{174         await self.local.send\_message(}
\DoxyCodeLine{175             message\_queue\_tx\_local,}
\DoxyCodeLine{176             UnitId(\textcolor{stringliteral}{"{}all"{}}),}
\DoxyCodeLine{177             discover\_timeout\_secs,}
\DoxyCodeLine{178         )}
\DoxyCodeLine{179         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}discover ping end"{}})}
\DoxyCodeLine{180         \textcolor{comment}{\# if self.devices:}}
\DoxyCodeLine{181         \textcolor{comment}{\#     target\_device\_uids = set(}}
\DoxyCodeLine{182         \textcolor{comment}{\# u\_id for u\_id, v in self.devices.items())}}
\DoxyCodeLine{183         \textcolor{comment}{\# some code missing}}
\DoxyCodeLine{184 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_aca681010a08f941d9f65888e99cd6374_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_aca681010a08f941d9f65888e99cd6374_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ab04dda2165aadfb9688ff83d3e5a3bc9}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ab04dda2165aadfb9688ff83d3e5a3bc9}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!local@{local}}
\index{local@{local}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{local()}{local()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily  Local\+Connection\+Handler $\vert$ None klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+local (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{98     \textcolor{keyword}{def }\mbox{\hyperlink{namespacelocal}{local}}(self) -\/> LocalConnectionHandler | None:}
\DoxyCodeLine{99         \textcolor{keywordflow}{return} self.\_attr\_local}
\DoxyCodeLine{100 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ab04dda2165aadfb9688ff83d3e5a3bc9_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a3cdabc8aa3a95c4adda1df1949cda05d}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a3cdabc8aa3a95c4adda1df1949cda05d}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!local@{local}}
\index{local@{local}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{local()}{local()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily  None klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+local (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{Local\+Connection\+Handler $\vert$ None}]{local }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{102     \textcolor{keyword}{def }\mbox{\hyperlink{namespacelocal}{local}}(self, local: LocalConnectionHandler | \textcolor{keywordtype}{None}) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{103         self.\_attr\_local = local}
\DoxyCodeLine{104 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a3cdabc8aa3a95c4adda1df1949cda05d_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a3cdabc8aa3a95c4adda1df1949cda05d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a40aba5774804e631745f63c3c91ec049}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a40aba5774804e631745f63c3c91ec049}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!select\_device@{select\_device}}
\index{select\_device@{select\_device}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{select\_device()}{select\_device()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classstr}{str}} $\vert$ set\mbox{[}\mbox{\hyperlink{classstr}{str}}\mbox{]} klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+select\+\_\+device (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{argparse.\+Namespace}]{args,  }\item[{datetime.\+datetime     }]{send\+\_\+started\+\_\+local }\end{DoxyParamCaption})}

\begin{DoxyVerb}Interactive select device.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{215     ) -\/> str | set[str]:}
\DoxyCodeLine{216         \textcolor{stringliteral}{"{}"{}"{}Interactive select device."{}"{}"{}}}
\DoxyCodeLine{217 }
\DoxyCodeLine{218         print(SEPARATION\_WIDTH * \textcolor{stringliteral}{"{}-\/"{}})}
\DoxyCodeLine{219         \textcolor{comment}{\# devices\_working = \{}}
\DoxyCodeLine{220         \textcolor{comment}{\#     k: v for k, v in self.devices.items() if}}
\DoxyCodeLine{221         \textcolor{comment}{\# v.local.aes\_key\_confirmed}}
\DoxyCodeLine{222         \textcolor{comment}{\# \}}}
\DoxyCodeLine{223         devices\_working: dict[str, Device] = \{}
\DoxyCodeLine{224             u\_id: device}
\DoxyCodeLine{225             \textcolor{keywordflow}{for} u\_id, device \textcolor{keywordflow}{in} self.devices.items()}
\DoxyCodeLine{226             \textcolor{keywordflow}{if} (}
\DoxyCodeLine{227                 (}
\DoxyCodeLine{228                     args.type == DeviceType.LIGHTING.value}
\DoxyCodeLine{229                     \textcolor{keywordflow}{and} isinstance(device, Light)}
\DoxyCodeLine{230                 )}
\DoxyCodeLine{231                 \textcolor{keywordflow}{or} (}
\DoxyCodeLine{232                     args.type == DeviceType.CLEANER.value}
\DoxyCodeLine{233                     \textcolor{keywordflow}{and} isinstance(device, VacuumCleaner)}
\DoxyCodeLine{234                 )}
\DoxyCodeLine{235             )}
\DoxyCodeLine{236             \textcolor{keywordflow}{and} (}
\DoxyCodeLine{237                 (}
\DoxyCodeLine{238                     device.status}
\DoxyCodeLine{239                     \textcolor{keywordflow}{and} device.status.ts}
\DoxyCodeLine{240                     \textcolor{keywordflow}{and} isinstance(device.status.ts, datetime.datetime)}
\DoxyCodeLine{241                     \textcolor{keywordflow}{and} device.status.ts > send\_started\_local}
\DoxyCodeLine{242                 )}
\DoxyCodeLine{243                 \textcolor{keywordflow}{or} (}
\DoxyCodeLine{244                     (args.cloud \textcolor{keywordflow}{or} args.tryLocalThanCloud)}
\DoxyCodeLine{245                     \textcolor{keywordflow}{and} device.cloud}
\DoxyCodeLine{246                     \textcolor{keywordflow}{and} device.cloud.connected}
\DoxyCodeLine{247                 )}
\DoxyCodeLine{248             )}
\DoxyCodeLine{249         \}}
\DoxyCodeLine{250         print(}
\DoxyCodeLine{251             \textcolor{stringliteral}{"{}Found "{}}}
\DoxyCodeLine{252             + \mbox{\hyperlink{classstr}{str}}(len(devices\_working))}
\DoxyCodeLine{253             + \textcolor{stringliteral}{"{} "{}}}
\DoxyCodeLine{254             + (\textcolor{stringliteral}{"{}device"{}} \textcolor{keywordflow}{if} len(devices\_working) == 1 \textcolor{keywordflow}{else} \textcolor{stringliteral}{"{}devices"{}})}
\DoxyCodeLine{255             + \textcolor{stringliteral}{"{} with working aes keys"{}}}
\DoxyCodeLine{256             + (\textcolor{stringliteral}{"{} (dev aes key)"{}} \textcolor{keywordflow}{if} args.dev \textcolor{keywordflow}{else} \textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{257             + \textcolor{stringliteral}{"{}."{}}}
\DoxyCodeLine{258         )}
\DoxyCodeLine{259         \textcolor{keywordflow}{if} len(devices\_working) <= 0:}
\DoxyCodeLine{260             \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}no\_devices"{}}}
\DoxyCodeLine{261 }
\DoxyCodeLine{262         print(SEPARATION\_WIDTH * \textcolor{stringliteral}{"{}-\/"{}})}
\DoxyCodeLine{263         count: int = 1}
\DoxyCodeLine{264         device\_items: list[Device] = list(devices\_working.values())}
\DoxyCodeLine{265 }
\DoxyCodeLine{266         \textcolor{keywordflow}{if} device\_items:}
\DoxyCodeLine{267             print(}
\DoxyCodeLine{268                 \textcolor{stringliteral}{"{}Status attributes: ("{}}}
\DoxyCodeLine{269                 + \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a478a761c65763ffa478642d11af1eade}{get\_obj\_attrs\_as\_string}}(ResponseStatus)}
\DoxyCodeLine{270                 + \textcolor{stringliteral}{"{}) (local IP-\/Address)"{}}}
\DoxyCodeLine{271             )}
\DoxyCodeLine{272             print(\textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{273 }
\DoxyCodeLine{274         \textcolor{keywordflow}{for} device \textcolor{keywordflow}{in} device\_items:}
\DoxyCodeLine{275             name: str = f\textcolor{stringliteral}{"{}Unit ID: \{device.u\_id\}"{}}}
\DoxyCodeLine{276             \textcolor{keywordflow}{if} device.acc\_sets \textcolor{keywordflow}{and} \textcolor{stringliteral}{"{}name"{}} \textcolor{keywordflow}{in} device.acc\_sets:}
\DoxyCodeLine{277                 name = device.acc\_sets[\textcolor{stringliteral}{"{}name"{}}]}
\DoxyCodeLine{278             address: str = (}
\DoxyCodeLine{279                 \textcolor{stringliteral}{"{} (local"{}}}
\DoxyCodeLine{280                 f\textcolor{stringliteral}{"{} \{device.local\_addr['ip']\}:\{device.local\_addr['port']\})"{}}}
\DoxyCodeLine{281                 \textcolor{keywordflow}{if} device.local\_addr[\textcolor{stringliteral}{"{}ip"{}}]}
\DoxyCodeLine{282                 \textcolor{keywordflow}{else} \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{283             )}
\DoxyCodeLine{284             cloud: str = \textcolor{stringliteral}{"{} (cloud connected)"{}} \textcolor{keywordflow}{if} device.cloud.connected \textcolor{keywordflow}{else} \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{285             status: str = (}
\DoxyCodeLine{286                 f\textcolor{stringliteral}{"{} (\{device.status\})"{}} \textcolor{keywordflow}{if} device.status \textcolor{keywordflow}{else} \textcolor{stringliteral}{"{} (no status)"{}}}
\DoxyCodeLine{287             )}
\DoxyCodeLine{288             print(f\textcolor{stringliteral}{"{}\{count\}) \{name\}\{status\}\{address\}\{cloud\}"{}})}
\DoxyCodeLine{289             count = count + 1}
\DoxyCodeLine{290 }
\DoxyCodeLine{291         \textcolor{keywordflow}{if} self.devices:}
\DoxyCodeLine{292             print(\textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{293             device\_num\_s: str = input(}
\DoxyCodeLine{294                 \textcolor{stringliteral}{"{}Choose bulb number(s) (comma seperated) a"{}}}
\DoxyCodeLine{295                 \textcolor{stringliteral}{"{} (all),[1-\/9]*\{,[1-\/9]*\}*: "{}}}
\DoxyCodeLine{296             )}
\DoxyCodeLine{297             target\_device\_uids\_lcl: set[str] = set()}
\DoxyCodeLine{298             \textcolor{keywordflow}{if} device\_num\_s == \textcolor{stringliteral}{"{}a"{}}:}
\DoxyCodeLine{299                 \textcolor{keywordflow}{return} set(b.u\_id \textcolor{keywordflow}{for} b \textcolor{keywordflow}{in} device\_items)}
\DoxyCodeLine{300             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{301                 \textcolor{keywordflow}{for} bulb\_num \textcolor{keywordflow}{in} device\_num\_s.split(\textcolor{stringliteral}{"{},"{}}):}
\DoxyCodeLine{302                     bulb\_num\_nr: int = \mbox{\hyperlink{namespacecloud_a8ff77cd5353527f3ef3c4e2216d86949}{int}}(bulb\_num)}
\DoxyCodeLine{303                     \textcolor{keywordflow}{if} bulb\_num\_nr > 0 \textcolor{keywordflow}{and} bulb\_num\_nr < count:}
\DoxyCodeLine{304                         target\_device\_uids\_lcl.add(}
\DoxyCodeLine{305                             device\_items[bulb\_num\_nr -\/ 1].u\_id}
\DoxyCodeLine{306                         )}
\DoxyCodeLine{307             \textcolor{keywordflow}{return} target\_device\_uids\_lcl}
\DoxyCodeLine{308 }
\DoxyCodeLine{309         \textcolor{comment}{\# No devices found. Exit script.}}
\DoxyCodeLine{310         sys.exit(0)}
\DoxyCodeLine{311 }

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a40aba5774804e631745f63c3c91ec049_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a40aba5774804e631745f63c3c91ec049_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ad5c42cd8dd34ed1d6329040e164bfc2e}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ad5c42cd8dd34ed1d6329040e164bfc2e}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!send\_to\_devices@{send\_to\_devices}}
\index{send\_to\_devices@{send\_to\_devices}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{send\_to\_devices()}{send\_to\_devices()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classstr}{str}} $\vert$ bool $\vert$ int $\vert$ set klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+send\+\_\+to\+\_\+devices (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{argparse.\+Namespace}]{args,  }\item[{list\mbox{[}Any\mbox{]}}]{args\+\_\+in,  }\item[{int }]{timeout\+\_\+ms = {\ttfamily 5000},  }\item[{Callable\mbox{[}\mbox{[}\mbox{\hyperlink{classklyqa__ctl_1_1general_1_1message_1_1Message}{Message}}, \mbox{\hyperlink{classstr}{str}}\mbox{]}, Any\mbox{]} $\vert$ None }]{async\+\_\+answer\+\_\+callback = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Collect the messages for the devices to send to

Args:
    args (Argsparse): Parsed args object
    args_in (list): List of arguments parsed to the script call
    timeout_ms (int, optional): Timeout to send. Defaults to 5000.

Raises:
    Exception: Network or file errors

Returns:
    bool: True if succeeded.
\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{318     ) -\/> str | bool | int | set:}
\DoxyCodeLine{319         \textcolor{stringliteral}{"{}"{}"{}Collect the messages for the devices to send to}}
\DoxyCodeLine{320 \textcolor{stringliteral}{}}
\DoxyCodeLine{321 \textcolor{stringliteral}{        Args:}}
\DoxyCodeLine{322 \textcolor{stringliteral}{            args (Argsparse): Parsed args object}}
\DoxyCodeLine{323 \textcolor{stringliteral}{            args\_in (list): List of arguments parsed to the script call}}
\DoxyCodeLine{324 \textcolor{stringliteral}{            timeout\_ms (int, optional): Timeout to send. Defaults to 5000.}}
\DoxyCodeLine{325 \textcolor{stringliteral}{}}
\DoxyCodeLine{326 \textcolor{stringliteral}{        Raises:}}
\DoxyCodeLine{327 \textcolor{stringliteral}{            Exception: Network or file errors}}
\DoxyCodeLine{328 \textcolor{stringliteral}{}}
\DoxyCodeLine{329 \textcolor{stringliteral}{        Returns:}}
\DoxyCodeLine{330 \textcolor{stringliteral}{            bool: True if succeeded.}}
\DoxyCodeLine{331 \textcolor{stringliteral}{        "{}"{}"{}}}
\DoxyCodeLine{332         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{333             loop: asyncio.AbstractEventLoop = asyncio.get\_event\_loop()}
\DoxyCodeLine{334 }
\DoxyCodeLine{335             send\_started: datetime.datetime = datetime.datetime.now()}
\DoxyCodeLine{336 }
\DoxyCodeLine{337             add\_command\_args\_ch: dict[str, Callable[..., Any]] = \{}
\DoxyCodeLine{338                 DeviceType.LIGHTING.value: add\_command\_args\_bulb,}
\DoxyCodeLine{339                 DeviceType.CLEANER.value: add\_command\_args\_cleaner,}
\DoxyCodeLine{340             \}}
\DoxyCodeLine{341             add\_command\_args: Callable[..., Any] = add\_command\_args\_ch[}
\DoxyCodeLine{342                 args.type}
\DoxyCodeLine{343             ]}
\DoxyCodeLine{344 }
\DoxyCodeLine{345             \textcolor{keywordflow}{if} args.dev:}
\DoxyCodeLine{346                 args.local = \textcolor{keyword}{True}}
\DoxyCodeLine{347                 args.tryLocalThanCloud = \textcolor{keyword}{False}}
\DoxyCodeLine{348                 args.cloud = \textcolor{keyword}{False}}
\DoxyCodeLine{349 }
\DoxyCodeLine{350             \textcolor{keywordflow}{if} args.debug:}
\DoxyCodeLine{351                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a6e74b8cc4bae98fa55902e4b875af67e}{set\_debug\_logger}}(level=logging.DEBUG)}
\DoxyCodeLine{352 }
\DoxyCodeLine{353             \textcolor{keywordflow}{if} args.trace:}
\DoxyCodeLine{354                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a6e74b8cc4bae98fa55902e4b875af67e}{set\_debug\_logger}}(level=TRACE)}
\DoxyCodeLine{355 }
\DoxyCodeLine{356             \textcolor{keywordflow}{if} args.cloud \textcolor{keywordflow}{or} args.local:}
\DoxyCodeLine{357                 args.tryLocalThanCloud = \textcolor{keyword}{False}}
\DoxyCodeLine{358 }
\DoxyCodeLine{359             \textcolor{keywordflow}{if} args.aes \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{360                 self.aes\_keys[\textcolor{stringliteral}{"{}all"{}}] = bytes.fromhex(args.aes[0])}
\DoxyCodeLine{361 }
\DoxyCodeLine{362             target\_device\_uids: set[str] = set()}
\DoxyCodeLine{363 }
\DoxyCodeLine{364             message\_queue\_tx\_local: list[Any] = []}
\DoxyCodeLine{365             message\_queue\_tx\_state\_cloud: list[Any] = []}
\DoxyCodeLine{366             message\_queue\_tx\_command\_cloud: list[Any] = []}
\DoxyCodeLine{367 }
\DoxyCodeLine{368             \textcolor{comment}{\# if args.device\_name is not None:}}
\DoxyCodeLine{369             \textcolor{comment}{\#     if not self.device\_name\_to\_uid(args, target\_device\_uids):}}
\DoxyCodeLine{370             \textcolor{comment}{\#         return False}}
\DoxyCodeLine{371 }
\DoxyCodeLine{372             \textcolor{keywordflow}{if} args.device\_unitids \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{373                 target\_device\_uids = set(}
\DoxyCodeLine{374                     map(str, set(args.device\_unitids[0].split(\textcolor{stringliteral}{"{},"{}})))}
\DoxyCodeLine{375                 )}
\DoxyCodeLine{376                 LOGGER.info(}
\DoxyCodeLine{377                     \textcolor{stringliteral}{"{}Send to device: "{}}}
\DoxyCodeLine{378                     + \textcolor{stringliteral}{"{}, "{}}.join(args.device\_unitids[0].split(\textcolor{stringliteral}{"{},"{}}))}
\DoxyCodeLine{379                 )}
\DoxyCodeLine{380 }
\DoxyCodeLine{381             \textcolor{comment}{\# if (}}
\DoxyCodeLine{382             \textcolor{comment}{\#     not args.selectDevice}}
\DoxyCodeLine{383             \textcolor{comment}{\#     and self.cloud\_backend}}
\DoxyCodeLine{384             \textcolor{comment}{\#     \# and self.backend\_connected()}}
\DoxyCodeLine{385             \textcolor{comment}{\# ):}}
\DoxyCodeLine{386             \textcolor{comment}{\#     await self.cloud\_backend.update\_device\_configs()}}
\DoxyCodeLine{387 }
\DoxyCodeLine{388             \textcolor{comment}{\# device specific commands \#}}
\DoxyCodeLine{389 }
\DoxyCodeLine{390             async \textcolor{keyword}{def }send\_to\_devices\_cb(}
\DoxyCodeLine{391                 args: argparse.Namespace,}
\DoxyCodeLine{392             ) -\/> str | bool | int | set:}
\DoxyCodeLine{393                 \textcolor{stringliteral}{"{}"{}"{}Send to devices callback for discover of devices option"{}"{}"{}}}
\DoxyCodeLine{394                 \textcolor{keywordflow}{return} await self.send\_to\_devices(}
\DoxyCodeLine{395                     args,}
\DoxyCodeLine{396                     args\_in,}
\DoxyCodeLine{397                     timeout\_ms=3500,}
\DoxyCodeLine{398                 )}
\DoxyCodeLine{399 }
\DoxyCodeLine{400             scene: list[str] = []}
\DoxyCodeLine{401             \textcolor{keywordflow}{if} args.type == DeviceType.LIGHTING.value:}
\DoxyCodeLine{402                 await add\_device\_command\_to\_queue\_light(}
\DoxyCodeLine{403                     args,}
\DoxyCodeLine{404                     args\_in,}
\DoxyCodeLine{405                     send\_to\_devices\_cb,}
\DoxyCodeLine{406                     message\_queue\_tx\_local,}
\DoxyCodeLine{407                     scene,}
\DoxyCodeLine{408                 )}
\DoxyCodeLine{409             \textcolor{keywordflow}{elif} args.type == DeviceType.CLEANER.value:}
\DoxyCodeLine{410                 await create\_device\_message\_vacuum(}
\DoxyCodeLine{411                     args,}
\DoxyCodeLine{412                     args\_in,}
\DoxyCodeLine{413                     send\_to\_devices\_cb,}
\DoxyCodeLine{414                     message\_queue\_tx\_local,}
\DoxyCodeLine{415                     message\_queue\_tx\_command\_cloud,}
\DoxyCodeLine{416                     message\_queue\_tx\_state\_cloud,}
\DoxyCodeLine{417                 )}
\DoxyCodeLine{418             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{419                 LOGGER.error(\textcolor{stringliteral}{"{}Missing device type."{}})}
\DoxyCodeLine{420                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}}
\DoxyCodeLine{421 }
\DoxyCodeLine{422             success: bool = \textcolor{keyword}{True}}
\DoxyCodeLine{423             to\_send\_device\_uids: set[str] = set()}
\DoxyCodeLine{424 }
\DoxyCodeLine{425             \textcolor{keywordflow}{if} self.local \textcolor{keywordflow}{and} (args.local \textcolor{keywordflow}{or} args.tryLocalThanCloud):}
\DoxyCodeLine{426                 \textcolor{keywordflow}{if} args.passive:}
\DoxyCodeLine{427                     \textcolor{keywordflow}{if} self.local \textcolor{keywordflow}{and} self.local.udp:}
\DoxyCodeLine{428                         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}Waiting for UDP broadcast"{}})}
\DoxyCodeLine{429                         data, address = self.local.udp.recvfrom(4096)}
\DoxyCodeLine{430                         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(}
\DoxyCodeLine{431                             \textcolor{stringliteral}{"{}\(\backslash\)n\(\backslash\)n 2. UDP server received: "{}},}
\DoxyCodeLine{432                             data.decode(\textcolor{stringliteral}{"{}utf-\/8"{}}),}
\DoxyCodeLine{433                             \textcolor{stringliteral}{"{}from"{}},}
\DoxyCodeLine{434                             address,}
\DoxyCodeLine{435                             \textcolor{stringliteral}{"{}\(\backslash\)n\(\backslash\)n"{}},}
\DoxyCodeLine{436                         )}
\DoxyCodeLine{437 }
\DoxyCodeLine{438                         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}3a. Sending UDP ack.\(\backslash\)n"{}})}
\DoxyCodeLine{439                         self.local.udp.sendto(}
\DoxyCodeLine{440                             \textcolor{stringliteral}{"{}QCX-\/ACK"{}}.encode(\textcolor{stringliteral}{"{}utf-\/8"{}}), address}
\DoxyCodeLine{441                         )}
\DoxyCodeLine{442                         time.sleep(1)}
\DoxyCodeLine{443                         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}3b. Sending UDP ack.\(\backslash\)n"{}})}
\DoxyCodeLine{444                         self.local.udp.sendto(}
\DoxyCodeLine{445                             \textcolor{stringliteral}{"{}QCX-\/ACK"{}}.encode(\textcolor{stringliteral}{"{}utf-\/8"{}}), address}
\DoxyCodeLine{446                         )}
\DoxyCodeLine{447                 \textcolor{keywordflow}{else}:}
\DoxyCodeLine{448 }
\DoxyCodeLine{449                     send\_started\_local: datetime.datetime = (}
\DoxyCodeLine{450                         datetime.datetime.now()}
\DoxyCodeLine{451                     )}
\DoxyCodeLine{452 }
\DoxyCodeLine{453                     \textcolor{keywordflow}{if} args.discover:}
\DoxyCodeLine{454                         await self.local.\mbox{\hyperlink{namespaceklyqa__ctl_1_1devices_1_1light_1_1commands_a09a73cff59e95502adefbee0333c3008}{discover\_devices}}()}
\DoxyCodeLine{455                         \textcolor{comment}{\# await self.discover\_devices(}}
\DoxyCodeLine{456                         \textcolor{comment}{\#     args, message\_queue\_tx\_local, target\_device\_uids}}
\DoxyCodeLine{457                         \textcolor{comment}{\# )}}
\DoxyCodeLine{458 }
\DoxyCodeLine{459                     to\_send\_device\_uids = target\_device\_uids.copy()}
\DoxyCodeLine{460 }
\DoxyCodeLine{461                     send\_tasks: list[asyncio.Task] = []}
\DoxyCodeLine{462                     \textcolor{keywordflow}{for} uid \textcolor{keywordflow}{in} target\_device\_uids:}
\DoxyCodeLine{463 }
\DoxyCodeLine{464                         send\_tasks.append(}
\DoxyCodeLine{465                             loop.create\_task(}
\DoxyCodeLine{466                                 self.local.send\_message(}
\DoxyCodeLine{467                                     send\_msgs=message\_queue\_tx\_local.copy(),}
\DoxyCodeLine{468                                     target\_device\_uid=UnitId(uid),}
\DoxyCodeLine{469                                     \textcolor{comment}{\# callback=async\_answer\_callback\_local,}}
\DoxyCodeLine{470                                     time\_to\_live\_secs=(timeout\_ms / 1000),}
\DoxyCodeLine{471                                 )}
\DoxyCodeLine{472                             )}
\DoxyCodeLine{473                         )}
\DoxyCodeLine{474 }
\DoxyCodeLine{475                     \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}wait for all target device uids done."{}})}
\DoxyCodeLine{476                     \textcolor{keywordflow}{for} task \textcolor{keywordflow}{in} send\_tasks:}
\DoxyCodeLine{477                         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{478                             await asyncio.wait\_for(}
\DoxyCodeLine{479                                 task, timeout=(timeout\_ms / 1000)}
\DoxyCodeLine{480                             )}
\DoxyCodeLine{481                         \textcolor{keywordflow}{except} asyncio.CancelledError:}
\DoxyCodeLine{482                             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}Timeout for send."{}})}
\DoxyCodeLine{483                         msg: Message = task.result()}
\DoxyCodeLine{484                         \textcolor{keywordflow}{if} msg.state == MessageState.SENT:}
\DoxyCodeLine{485                             to\_send\_device\_uids.remove(UnitId(msg.target\_uid))}
\DoxyCodeLine{486 }
\DoxyCodeLine{487                     \textcolor{keywordflow}{if} args.selectDevice:}
\DoxyCodeLine{488                         \textcolor{keywordflow}{return} await self.select\_device(}
\DoxyCodeLine{489                             args, send\_started\_local}
\DoxyCodeLine{490                         )}
\DoxyCodeLine{491 }
\DoxyCodeLine{492                 \textcolor{keywordflow}{if} target\_device\_uids \textcolor{keywordflow}{and} len(to\_send\_device\_uids) > 0:}
\DoxyCodeLine{493                     \textcolor{comment}{\# Error}}
\DoxyCodeLine{494                     sent\_locally\_error: str = (}
\DoxyCodeLine{495                         \textcolor{stringliteral}{"{}The commands "{}}}
\DoxyCodeLine{496                         + \mbox{\hyperlink{classstr}{str}}([f\textcolor{stringliteral}{"{}\{k\}=\{v\}"{}} \textcolor{keywordflow}{for} k, v \textcolor{keywordflow}{in} vars(args).items() \textcolor{keywordflow}{if} v])}
\DoxyCodeLine{497                         + \textcolor{stringliteral}{"{} failed to send locally to the device(s): "{}}}
\DoxyCodeLine{498                         + \textcolor{stringliteral}{"{}, "{}}.join(to\_send\_device\_uids)}
\DoxyCodeLine{499                     )}
\DoxyCodeLine{500                     \textcolor{keywordflow}{if} args.tryLocalThanCloud:}
\DoxyCodeLine{501                         LOGGER.info(sent\_locally\_error)}
\DoxyCodeLine{502                     \textcolor{keywordflow}{else}:}
\DoxyCodeLine{503                         LOGGER.error(sent\_locally\_error)}
\DoxyCodeLine{504                     success = \textcolor{keyword}{False}}
\DoxyCodeLine{505 }
\DoxyCodeLine{506             \textcolor{keywordflow}{if} self.cloud \textcolor{keywordflow}{and} (args.cloud \textcolor{keywordflow}{or} args.tryLocalThanCloud):}
\DoxyCodeLine{507                 \textcolor{keywordflow}{if} args.username \textcolor{keywordflow}{and} args.username \textcolor{keywordflow}{in} self.accounts:}
\DoxyCodeLine{508                     acc: Account = self.accounts[args.username]}
\DoxyCodeLine{509                     \textcolor{keywordflow}{for} uid \textcolor{keywordflow}{in} target\_device\_uids:}
\DoxyCodeLine{510                         acc\_dev: AccountDevice = (}
\DoxyCodeLine{511                             await acc.get\_or\_create\_device(uid)}
\DoxyCodeLine{512                         )}
\DoxyCodeLine{513                         \textcolor{keywordflow}{for} command \textcolor{keywordflow}{in} message\_queue\_tx\_local:}
\DoxyCodeLine{514                             await acc.cloud\_post\_command\_to\_dev(}
\DoxyCodeLine{515                                 acc\_dev, command}
\DoxyCodeLine{516                             )}
\DoxyCodeLine{517                 \textcolor{keywordflow}{else}:}
\DoxyCodeLine{518                     success = await self.cloud.send(}
\DoxyCodeLine{519                         args,}
\DoxyCodeLine{520                         target\_device\_uids,}
\DoxyCodeLine{521                         to\_send\_device\_uids,}
\DoxyCodeLine{522                         timeout\_ms,}
\DoxyCodeLine{523                         message\_queue\_tx\_state\_cloud,}
\DoxyCodeLine{524                         message\_queue\_tx\_command\_cloud,}
\DoxyCodeLine{525                     )}
\DoxyCodeLine{526 }
\DoxyCodeLine{527             \textcolor{keywordflow}{if} success \textcolor{keywordflow}{and} scene:}
\DoxyCodeLine{528                 scene\_start\_args: list[str] = [}
\DoxyCodeLine{529                     args.type,}
\DoxyCodeLine{530                     \textcolor{stringliteral}{"{}-\/-\/routine\_id"{}},}
\DoxyCodeLine{531                     \textcolor{stringliteral}{"{}0"{}},}
\DoxyCodeLine{532                     \textcolor{stringliteral}{"{}-\/-\/routine\_start"{}},}
\DoxyCodeLine{533                 ]}
\DoxyCodeLine{534 }
\DoxyCodeLine{535                 orginal\_args\_parser: argparse.ArgumentParser = (}
\DoxyCodeLine{536                     \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1parameters_a38b90c6125a60eeabd89d4addab053b4}{get\_description\_parser}}()}
\DoxyCodeLine{537                 )}
\DoxyCodeLine{538                 scene\_start\_args\_parser: argparse.ArgumentParser = (}
\DoxyCodeLine{539                     \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1parameters_a38b90c6125a60eeabd89d4addab053b4}{get\_description\_parser}}()}
\DoxyCodeLine{540                 )}
\DoxyCodeLine{541 }
\DoxyCodeLine{542                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1parameters_a4d4508f84ab7a6044c74575f197f852b}{add\_config\_args}}(parser=orginal\_args\_parser)}
\DoxyCodeLine{543                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1parameters_a4d4508f84ab7a6044c74575f197f852b}{add\_config\_args}}(parser=scene\_start\_args\_parser)}
\DoxyCodeLine{544                 add\_command\_args(parser=scene\_start\_args\_parser)}
\DoxyCodeLine{545 }
\DoxyCodeLine{546                 (}
\DoxyCodeLine{547                     original\_config\_args\_parsed,}
\DoxyCodeLine{548                     \_,}
\DoxyCodeLine{549                 ) = orginal\_args\_parser.parse\_known\_args(args=args\_in)}
\DoxyCodeLine{550 }
\DoxyCodeLine{551                 scene\_start\_args\_parsed = scene\_start\_args\_parser.parse\_args(}
\DoxyCodeLine{552                     scene\_start\_args, namespace=original\_config\_args\_parsed}
\DoxyCodeLine{553                 )}
\DoxyCodeLine{554 }
\DoxyCodeLine{555                 async \textcolor{keyword}{def }async\_print\_answer(msg: Message, uid: str) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{556                     \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(f\textcolor{stringliteral}{"{}\{uid\}: "{}})}
\DoxyCodeLine{557                     \textcolor{keywordflow}{if} msg:}
\DoxyCodeLine{558                         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{559                             LOGGER.info(f\textcolor{stringliteral}{"{}Answer received from \{uid\}."{}})}
\DoxyCodeLine{560                             format\_answer: str = json.dumps(}
\DoxyCodeLine{561                                 json.loads(msg.answer),}
\DoxyCodeLine{562                                 sort\_keys=\textcolor{keyword}{True},}
\DoxyCodeLine{563                                 indent=4,}
\DoxyCodeLine{564                             )}
\DoxyCodeLine{565                             LOGGER.info(f\textcolor{stringliteral}{"{}\{format\_answer\}"{}})}
\DoxyCodeLine{566                         \textcolor{keywordflow}{except} json.JSONDecodeError:}
\DoxyCodeLine{567                             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_ad6b753e482e539892c57f8144cf213cb}{task\_log\_trace\_ex}}()}
\DoxyCodeLine{568                     \textcolor{keywordflow}{else}:}
\DoxyCodeLine{569                         LOGGER.error(f\textcolor{stringliteral}{"{}Error no message returned from \{uid\}."{}})}
\DoxyCodeLine{570 }
\DoxyCodeLine{571                 ret: str | bool | int | set = await self.send\_to\_devices(}
\DoxyCodeLine{572                     scene\_start\_args\_parsed,}
\DoxyCodeLine{573                     args\_in,}
\DoxyCodeLine{574                     timeout\_ms=timeout\_ms}
\DoxyCodeLine{575                     -\/ \mbox{\hyperlink{namespacecloud_a8ff77cd5353527f3ef3c4e2216d86949}{int}}(}
\DoxyCodeLine{576                         (}
\DoxyCodeLine{577                             datetime.datetime.now() -\/ send\_started}
\DoxyCodeLine{578                         ).total\_seconds()}
\DoxyCodeLine{579                     )}
\DoxyCodeLine{580                     * 1000,}
\DoxyCodeLine{581                     async\_answer\_callback=async\_print\_answer,}
\DoxyCodeLine{582                 )}
\DoxyCodeLine{583 }
\DoxyCodeLine{584                 \textcolor{keywordflow}{if} isinstance(ret, bool) \textcolor{keywordflow}{and} ret:}
\DoxyCodeLine{585                     success = \textcolor{keyword}{True}}
\DoxyCodeLine{586                 \textcolor{keywordflow}{else}:}
\DoxyCodeLine{587                     LOGGER.error(f\textcolor{stringliteral}{"{}Couldn't start scene \{scene[0]\}."{}})}
\DoxyCodeLine{588                     success = \textcolor{keyword}{False}}
\DoxyCodeLine{589 }
\DoxyCodeLine{590             \textcolor{keywordflow}{return} success}
\DoxyCodeLine{591         \textcolor{keywordflow}{except} Exception:}
\DoxyCodeLine{592             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_ad6b753e482e539892c57f8144cf213cb}{task\_log\_trace\_ex}}()}
\DoxyCodeLine{593             \textcolor{keywordflow}{return} \textcolor{keyword}{False}}
\DoxyCodeLine{594 }

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ad5c42cd8dd34ed1d6329040e164bfc2e_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ad5c42cd8dd34ed1d6329040e164bfc2e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a7a93bda9f242d678a4208d0962837f11}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a7a93bda9f242d678a4208d0962837f11}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!send\_to\_devices\_wrapped@{send\_to\_devices\_wrapped}}
\index{send\_to\_devices\_wrapped@{send\_to\_devices\_wrapped}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{send\_to\_devices\_wrapped()}{send\_to\_devices\_wrapped()}}
{\footnotesize\ttfamily  int klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+send\+\_\+to\+\_\+devices\+\_\+wrapped (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{argparse.\+Namespace}]{args\+\_\+parsed,  }\item[{list\mbox{[}Any\mbox{]}}]{args\+\_\+in,  }\item[{int }]{timeout\+\_\+ms = {\ttfamily 5000} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Set up broadcast port and tcp reply connection port.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{600     ) -\/> int:}
\DoxyCodeLine{601         \textcolor{stringliteral}{"{}"{}"{}Set up broadcast port and tcp reply connection port."{}"{}"{}}}
\DoxyCodeLine{602 }
\DoxyCodeLine{603         \textcolor{keywordflow}{if} args\_parsed.cloud \textcolor{keywordflow}{or} args\_parsed.local:}
\DoxyCodeLine{604             args\_parsed.tryLocalThanCloud = \textcolor{keyword}{False}}
\DoxyCodeLine{605 }
\DoxyCodeLine{606         \textcolor{keywordflow}{if} args\_parsed.debug:}
\DoxyCodeLine{607             LOGGER.setLevel(level=logging.DEBUG)}
\DoxyCodeLine{608             logging\_hdl.setLevel(level=logging.DEBUG)}
\DoxyCodeLine{609 }
\DoxyCodeLine{610         \textcolor{keywordflow}{if} args\_parsed.trace:}
\DoxyCodeLine{611             LOGGER.setLevel(TRACE)}
\DoxyCodeLine{612             logging\_hdl.setLevel(TRACE)}
\DoxyCodeLine{613 }
\DoxyCodeLine{614         \textcolor{keywordflow}{if} args\_parsed.dev:}
\DoxyCodeLine{615             self.aes\_keys[\textcolor{stringliteral}{"{}dev"{}}] = AES\_KEY\_DEV}
\DoxyCodeLine{616 }
\DoxyCodeLine{617         local\_communication: bool = (}
\DoxyCodeLine{618             args\_parsed.local \textcolor{keywordflow}{or} args\_parsed.tryLocalThanCloud}
\DoxyCodeLine{619         )}
\DoxyCodeLine{620 }
\DoxyCodeLine{621         \textcolor{keywordflow}{if} local\_communication \textcolor{keywordflow}{and} self.local:}
\DoxyCodeLine{622             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} await self.local.bind\_ports():}
\DoxyCodeLine{623                 \textcolor{keywordflow}{return} 1}
\DoxyCodeLine{624 }
\DoxyCodeLine{625         exit\_ret: int = 0}
\DoxyCodeLine{626 }
\DoxyCodeLine{627         async \textcolor{keyword}{def }async\_answer\_callback(msg: Message, uid: str) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{628             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(f\textcolor{stringliteral}{"{}\{uid\}: "{}})}
\DoxyCodeLine{629             \textcolor{keywordflow}{if} msg:}
\DoxyCodeLine{630                 \textcolor{keywordflow}{try}:}
\DoxyCodeLine{631                     LOGGER.info(f\textcolor{stringliteral}{"{}Answer received from \{uid\}."{}})}
\DoxyCodeLine{632 }
\DoxyCodeLine{633                     format\_answer: str = json.dumps(}
\DoxyCodeLine{634                         json.loads(msg.answer),}
\DoxyCodeLine{635                         sort\_keys=\textcolor{keyword}{True},}
\DoxyCodeLine{636                         indent=4,}
\DoxyCodeLine{637                     )}
\DoxyCodeLine{638                     LOGGER.info(f\textcolor{stringliteral}{"{}\{format\_answer\}"{}})}
\DoxyCodeLine{639                 \textcolor{keywordflow}{except} (json.JSONDecodeError, ValueError):}
\DoxyCodeLine{640                     \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_ad6b753e482e539892c57f8144cf213cb}{task\_log\_trace\_ex}}()}
\DoxyCodeLine{641             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{642                 LOGGER.error(f\textcolor{stringliteral}{"{}Error no message returned from \{uid\}."{}})}
\DoxyCodeLine{643 }
\DoxyCodeLine{644         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} await self.send\_to\_devices(}
\DoxyCodeLine{645             args\_parsed,}
\DoxyCodeLine{646             args\_in,}
\DoxyCodeLine{647             timeout\_ms=timeout\_ms,}
\DoxyCodeLine{648             async\_answer\_callback=async\_answer\_callback,}
\DoxyCodeLine{649         ):}
\DoxyCodeLine{650             exit\_ret = 1}
\DoxyCodeLine{651 }
\DoxyCodeLine{652         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}Closing ports"{}})}
\DoxyCodeLine{653         \textcolor{keywordflow}{if} self.local:}
\DoxyCodeLine{654             await self.local.shutdown()}
\DoxyCodeLine{655 }
\DoxyCodeLine{656         \textcolor{keywordflow}{return} exit\_ret}
\DoxyCodeLine{657 }

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a7a93bda9f242d678a4208d0962837f11_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ac54c4bdc0dfa3897a09efe3655741bd0}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ac54c4bdc0dfa3897a09efe3655741bd0}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!shutdown@{shutdown}}
\index{shutdown@{shutdown}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{shutdown()}{shutdown()}}
{\footnotesize\ttfamily  None klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+shutdown (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Logout again from klyqa account.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{145     async \textcolor{keyword}{def }shutdown(self) -\/> None:}
\DoxyCodeLine{146         \textcolor{stringliteral}{"{}"{}"{}Logout again from klyqa account."{}"{}"{}}}
\DoxyCodeLine{147 }
\DoxyCodeLine{148         \textcolor{keywordflow}{for} \_, acc \textcolor{keywordflow}{in} self.accounts.items():}
\DoxyCodeLine{149             await acc.shutdown()}
\DoxyCodeLine{150         \textcolor{keywordflow}{if} self.local:}
\DoxyCodeLine{151             await self.local.shutdown()}
\DoxyCodeLine{152 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ac54c4bdc0dfa3897a09efe3655741bd0_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ac54c4bdc0dfa3897a09efe3655741bd0_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a8a4103a5925e93ce5c70c841248cf98c}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a8a4103a5925e93ce5c70c841248cf98c}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!\_attr\_accounts@{\_attr\_accounts}}
\index{\_attr\_accounts@{\_attr\_accounts}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{\_attr\_accounts}{\_attr\_accounts}}
{\footnotesize\ttfamily klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+\_\+attr\+\_\+accounts\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a662a27da095d439cea492bb5723f3e66}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a662a27da095d439cea492bb5723f3e66}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!\_attr\_cloud@{\_attr\_cloud}}
\index{\_attr\_cloud@{\_attr\_cloud}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{\_attr\_cloud}{\_attr\_cloud}}
{\footnotesize\ttfamily klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+\_\+attr\+\_\+cloud\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a287a2a6993c136f4612d37c1c61f4c3f}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a287a2a6993c136f4612d37c1c61f4c3f}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!\_attr\_local@{\_attr\_local}}
\index{\_attr\_local@{\_attr\_local}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{\_attr\_local}{\_attr\_local}}
{\footnotesize\ttfamily klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+\_\+attr\+\_\+local\hspace{0.3cm}{\ttfamily [private]}}



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{klyqa__ctl_8py}{klyqa\+\_\+ctl.\+py}}\end{DoxyCompactItemize}
