\hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client}{}\doxysection{klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client Class Reference}
\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client}\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}


Collaboration diagram for klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
None \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_abae8d948f873b26c6b857cb441738f48}{\+\_\+\+\_\+init\+\_\+\+\_\+}} (self, \mbox{\hyperlink{classklyqa__ctl_1_1controller__data_1_1ControllerData}{Controller\+Data}} \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a79a6712210f60b62e05952733fbc254f}{ctl\+\_\+data}}, Local\+Connection\+Handler$\vert$None \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ab04dda2165aadfb9688ff83d3e5a3bc9}{local}}=None, Cloud\+Backend$\vert$None \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a7d8a302d936e8e1889f175bac259f565}{cloud}}=None, dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, \mbox{\hyperlink{classklyqa__ctl_1_1devices_1_1device_1_1Device}{Device}}\mbox{]}$\vert$None \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ab6e5eda10fb712850c3fb311fd1cd4a0}{devices}}=None, dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, \mbox{\hyperlink{classklyqa__ctl_1_1account_1_1Account}{Account}}\mbox{]}$\vert$None \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a61a7eb1acfc9b763efe83dcda25ba552}{accounts}}=None)
\item 
\mbox{\hyperlink{classklyqa__ctl_1_1controller__data_1_1ControllerData}{Controller\+Data}} \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a79a6712210f60b62e05952733fbc254f}{ctl\+\_\+data}} (self)
\item 
None \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_aaec7befef976c0d962f191515e6f2579}{ctl\+\_\+data}} (self, \mbox{\hyperlink{classklyqa__ctl_1_1controller__data_1_1ControllerData}{Controller\+Data}} ctl\+\_\+data)
\item 
Local\+Connection\+Handler$\vert$None \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ab04dda2165aadfb9688ff83d3e5a3bc9}{local}} (self)
\item 
None \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a3cdabc8aa3a95c4adda1df1949cda05d}{local}} (self, Local\+Connection\+Handler$\vert$None local)
\item 
dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, \mbox{\hyperlink{classklyqa__ctl_1_1account_1_1Account}{Account}}\mbox{]} \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a61a7eb1acfc9b763efe83dcda25ba552}{accounts}} (self)
\item 
None \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_af3198f7c13e93b4da93d04fbb2c46532}{accounts}} (self, dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, \mbox{\hyperlink{classklyqa__ctl_1_1account_1_1Account}{Account}}\mbox{]} accounts)
\item 
dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, \mbox{\hyperlink{classklyqa__ctl_1_1devices_1_1device_1_1Device}{Device}}\mbox{]} \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ab6e5eda10fb712850c3fb311fd1cd4a0}{devices}} (self)
\item 
None \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a584a46b04ebd15efa4f74cdf54bbe75f}{devices}} (self, dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, \mbox{\hyperlink{classklyqa__ctl_1_1devices_1_1device_1_1Device}{Device}}\mbox{]} devices)
\item 
Cloud\+Backend$\vert$None \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a7d8a302d936e8e1889f175bac259f565}{cloud}} (self)
\item 
None \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a74e8c8e307949b86d7d49356ec8cd9b8}{cloud}} (self, Cloud\+Backend cloud)
\item 
None \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ac54c4bdc0dfa3897a09efe3655741bd0}{shutdown}} (self)
\item 
None \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_aca681010a08f941d9f65888e99cd6374}{discover\+\_\+devices}} (self, argparse.\+Namespace args, list\mbox{[}Any\mbox{]} message\+\_\+queue\+\_\+tx\+\_\+local, set\mbox{[}Any\mbox{]} target\+\_\+device\+\_\+uids)
\item 
\mbox{\hyperlink{classstr}{str}}$\vert$set\mbox{[}\mbox{\hyperlink{classstr}{str}}\mbox{]} \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a40aba5774804e631745f63c3c91ec049}{select\+\_\+device}} (self, argparse.\+Namespace args, datetime.\+datetime send\+\_\+started\+\_\+local)
\item 
\mbox{\hyperlink{classstr}{str}}$\vert$bool$\vert$int$\vert$set \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ad5c42cd8dd34ed1d6329040e164bfc2e}{send\+\_\+to\+\_\+devices}} (self, argparse.\+Namespace args, list\mbox{[}Any\mbox{]} args\+\_\+in, int timeout\+\_\+ms=5000, Callable\mbox{[}\mbox{[}\mbox{\hyperlink{classklyqa__ctl_1_1general_1_1message_1_1Message}{Message}}, \mbox{\hyperlink{classstr}{str}}\mbox{]}, Any\mbox{]}$\vert$None async\+\_\+answer\+\_\+callback=None)
\item 
int \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a7a93bda9f242d678a4208d0962837f11}{send\+\_\+to\+\_\+devices\+\_\+wrapped}} (self, argparse.\+Namespace args\+\_\+parsed, list\mbox{[}Any\mbox{]} args\+\_\+in, int timeout\+\_\+ms=5000)
\item 
\mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client}{Client}} \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a7ca48cb5c46c0fe0dbf5c469fe515ea6}{create}} (Any cls, bool interactive\+\_\+prompts=False, bool offline=False, \mbox{\hyperlink{classstr}{str}} server\+\_\+ip=\char`\"{}0.\+0.\+0.\+0\char`\"{}, \mbox{\hyperlink{classstr}{str}}$\vert$None network\+\_\+interface=None)
\item 
\mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client}{Client}} \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ab3968ead0b75e6c9345d2f0d52ebdf6c}{create\+\_\+lib}} (Any cls, \mbox{\hyperlink{classstr}{str}} server\+\_\+ip=\char`\"{}0.\+0.\+0.\+0\char`\"{}, \mbox{\hyperlink{classstr}{str}}$\vert$None network\+\_\+interface=None)
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ad01b90355173674e701cb94b6db54061}{\+\_\+attr\+\_\+ctl\+\_\+data}}
\item 
\mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a287a2a6993c136f4612d37c1c61f4c3f}{\+\_\+attr\+\_\+local}}
\item 
\mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a8a4103a5925e93ce5c70c841248cf98c}{\+\_\+attr\+\_\+accounts}}
\item 
\mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a499e1baefc921c1f36a57e2c6ae6e745}{\+\_\+attr\+\_\+devices}}
\item 
\mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a662a27da095d439cea492bb5723f3e66}{\+\_\+attr\+\_\+cloud}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}Client\end{DoxyVerb}
 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_abae8d948f873b26c6b857cb441738f48}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_abae8d948f873b26c6b857cb441738f48}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!\_\_init\_\_@{\_\_init\_\_}}
\index{\_\_init\_\_@{\_\_init\_\_}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{\_\_init\_\_()}{\_\_init\_\_()}}
{\footnotesize\ttfamily  None klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{\mbox{\hyperlink{classklyqa__ctl_1_1controller__data_1_1ControllerData}{Controller\+Data}}}]{ctl\+\_\+data,  }\item[{Local\+Connection\+Handler $\vert$ None }]{local = {\ttfamily None},  }\item[{Cloud\+Backend $\vert$ None }]{cloud = {\ttfamily None},  }\item[{dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, \mbox{\hyperlink{classklyqa__ctl_1_1devices_1_1device_1_1Device}{Device}}\mbox{]} $\vert$ None }]{devices = {\ttfamily None},  }\item[{dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, \mbox{\hyperlink{classklyqa__ctl_1_1account_1_1Account}{Account}}\mbox{]} $\vert$ None }]{accounts = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Initialize the client.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{94     ) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{95         \textcolor{stringliteral}{"{}"{}"{}Initialize the client."{}"{}"{}}}
\DoxyCodeLine{96 }
\DoxyCodeLine{97         self.\_attr\_ctl\_data: ControllerData = ctl\_data}
\DoxyCodeLine{98         self.\_attr\_local: LocalConnectionHandler | \textcolor{keywordtype}{None} = local}
\DoxyCodeLine{99         self.\_attr\_devices: dict[str, Device] = (}
\DoxyCodeLine{100             \{\} \textcolor{keywordflow}{if} devices \textcolor{keywordflow}{is} \textcolor{keywordtype}{None} \textcolor{keywordflow}{else} devices}
\DoxyCodeLine{101         )}
\DoxyCodeLine{102         self.\_attr\_cloud: CloudBackend | \textcolor{keywordtype}{None} = cloud}
\DoxyCodeLine{103         self.\_attr\_accounts: dict[str, Account] = (}
\DoxyCodeLine{104             \{\} \textcolor{keywordflow}{if} accounts \textcolor{keywordflow}{is} \textcolor{keywordtype}{None} \textcolor{keywordflow}{else} accounts}
\DoxyCodeLine{105         )}
\DoxyCodeLine{106 }

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a61a7eb1acfc9b763efe83dcda25ba552}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a61a7eb1acfc9b763efe83dcda25ba552}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!accounts@{accounts}}
\index{accounts@{accounts}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{accounts()}{accounts()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily  dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, \mbox{\hyperlink{classklyqa__ctl_1_1account_1_1Account}{Account}}\mbox{]} klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+accounts (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{124     \textcolor{keyword}{def }accounts(self) -\/> dict[str, Account]:}
\DoxyCodeLine{125         \textcolor{keywordflow}{return} self.\_attr\_accounts}
\DoxyCodeLine{126 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a61a7eb1acfc9b763efe83dcda25ba552_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_af3198f7c13e93b4da93d04fbb2c46532}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_af3198f7c13e93b4da93d04fbb2c46532}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!accounts@{accounts}}
\index{accounts@{accounts}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{accounts()}{accounts()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily  None klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+accounts (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, \mbox{\hyperlink{classklyqa__ctl_1_1account_1_1Account}{Account}}\mbox{]}}]{accounts }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{128     \textcolor{keyword}{def }accounts(self, accounts: dict[str, Account]) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{129         self.\_attr\_accounts = accounts}
\DoxyCodeLine{130 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_af3198f7c13e93b4da93d04fbb2c46532_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_af3198f7c13e93b4da93d04fbb2c46532_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a7d8a302d936e8e1889f175bac259f565}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a7d8a302d936e8e1889f175bac259f565}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!cloud@{cloud}}
\index{cloud@{cloud}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{cloud()}{cloud()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily  Cloud\+Backend $\vert$ None klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+cloud (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{140     \textcolor{keyword}{def }\mbox{\hyperlink{namespacecloud}{cloud}}(self) -\/> CloudBackend | None:}
\DoxyCodeLine{141         \textcolor{keywordflow}{return} self.\_attr\_cloud}
\DoxyCodeLine{142 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a7d8a302d936e8e1889f175bac259f565_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a74e8c8e307949b86d7d49356ec8cd9b8}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a74e8c8e307949b86d7d49356ec8cd9b8}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!cloud@{cloud}}
\index{cloud@{cloud}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{cloud()}{cloud()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily  None klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+cloud (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{Cloud\+Backend}]{cloud }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{144     \textcolor{keyword}{def }\mbox{\hyperlink{namespacecloud}{cloud}}(self, cloud: CloudBackend) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{145         self.\_attr\_cloud = cloud}
\DoxyCodeLine{146 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a74e8c8e307949b86d7d49356ec8cd9b8_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a74e8c8e307949b86d7d49356ec8cd9b8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a7ca48cb5c46c0fe0dbf5c469fe515ea6}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a7ca48cb5c46c0fe0dbf5c469fe515ea6}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!create@{create}}
\index{create@{create}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{create()}{create()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client}{Client}} klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+create (\begin{DoxyParamCaption}\item[{Any}]{cls,  }\item[{bool }]{interactive\+\_\+prompts = {\ttfamily False},  }\item[{bool }]{offline = {\ttfamily False},  }\item[{\mbox{\hyperlink{classstr}{str}} }]{server\+\_\+ip = {\ttfamily \char`\"{}0.0.0.0\char`\"{}},  }\item[{\mbox{\hyperlink{classstr}{str}} $\vert$ None }]{network\+\_\+interface = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Client factory.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{672     ) -\/> Client:}
\DoxyCodeLine{673         \textcolor{stringliteral}{"{}"{}"{}Client factory."{}"{}"{}}}
\DoxyCodeLine{674 }
\DoxyCodeLine{675         ctl\_data: ControllerData = await ControllerData.create\_default(}
\DoxyCodeLine{676             interactive\_prompts=interactive\_prompts, offline=offline}
\DoxyCodeLine{677         )}
\DoxyCodeLine{678 }
\DoxyCodeLine{679         lc\_hdl: LocalConnectionHandler = LocalConnectionHandler.create\_default(}
\DoxyCodeLine{680             ctl\_data,}
\DoxyCodeLine{681             server\_ip=server\_ip,}
\DoxyCodeLine{682             network\_interface=network\_interface,}
\DoxyCodeLine{683         )}
\DoxyCodeLine{684 }
\DoxyCodeLine{685         cloud: CloudBackend = CloudBackend.create\_default(ctl\_data)}
\DoxyCodeLine{686 }
\DoxyCodeLine{687         cl: Client = Client(ctl\_data=ctl\_data, local=lc\_hdl, cloud=cloud)}
\DoxyCodeLine{688 }
\DoxyCodeLine{689         \textcolor{keywordflow}{return} cl}
\DoxyCodeLine{690 }

\end{DoxyCode}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ab3968ead0b75e6c9345d2f0d52ebdf6c}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ab3968ead0b75e6c9345d2f0d52ebdf6c}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!create\_lib@{create\_lib}}
\index{create\_lib@{create\_lib}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{create\_lib()}{create\_lib()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classklyqa__ctl_1_1klyqa__ctl_1_1Client}{Client}} klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+create\+\_\+lib (\begin{DoxyParamCaption}\item[{Any}]{cls,  }\item[{\mbox{\hyperlink{classstr}{str}} }]{server\+\_\+ip = {\ttfamily \char`\"{}0.0.0.0\char`\"{}},  }\item[{\mbox{\hyperlink{classstr}{str}} $\vert$ None }]{network\+\_\+interface = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Factory client used as a non-interactive library.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{696     ) -\/> Client:}
\DoxyCodeLine{697         \textcolor{stringliteral}{"{}"{}"{}Factory client used as a non-\/interactive library."{}"{}"{}}}
\DoxyCodeLine{698         \textcolor{keywordflow}{return} await Client.create(}
\DoxyCodeLine{699             interactive\_prompts=\textcolor{keyword}{False},}
\DoxyCodeLine{700             offline=\textcolor{keyword}{False},}
\DoxyCodeLine{701             server\_ip=server\_ip,}
\DoxyCodeLine{702             network\_interface=network\_interface,}
\DoxyCodeLine{703         )}
\DoxyCodeLine{704 }
\DoxyCodeLine{705 }

\end{DoxyCode}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a79a6712210f60b62e05952733fbc254f}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a79a6712210f60b62e05952733fbc254f}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!ctl\_data@{ctl\_data}}
\index{ctl\_data@{ctl\_data}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{ctl\_data()}{ctl\_data()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classklyqa__ctl_1_1controller__data_1_1ControllerData}{Controller\+Data}} klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+ctl\+\_\+data (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{108     \textcolor{keyword}{def }ctl\_data(self) -\/> ControllerData:}
\DoxyCodeLine{109         \textcolor{keywordflow}{return} self.\_attr\_ctl\_data}
\DoxyCodeLine{110 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a79a6712210f60b62e05952733fbc254f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_aaec7befef976c0d962f191515e6f2579}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_aaec7befef976c0d962f191515e6f2579}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!ctl\_data@{ctl\_data}}
\index{ctl\_data@{ctl\_data}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{ctl\_data()}{ctl\_data()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily  None klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+ctl\+\_\+data (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{\mbox{\hyperlink{classklyqa__ctl_1_1controller__data_1_1ControllerData}{Controller\+Data}}}]{ctl\+\_\+data }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{112     \textcolor{keyword}{def }ctl\_data(self, ctl\_data: ControllerData) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{113         self.\_attr\_ctl\_data = ctl\_data}
\DoxyCodeLine{114 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_aaec7befef976c0d962f191515e6f2579_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_aaec7befef976c0d962f191515e6f2579_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ab6e5eda10fb712850c3fb311fd1cd4a0}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ab6e5eda10fb712850c3fb311fd1cd4a0}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!devices@{devices}}
\index{devices@{devices}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{devices()}{devices()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily  dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, \mbox{\hyperlink{classklyqa__ctl_1_1devices_1_1device_1_1Device}{Device}}\mbox{]} klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+devices (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{132     \textcolor{keyword}{def }devices(self) -\/> dict[str, Device]:}
\DoxyCodeLine{133         \textcolor{keywordflow}{return} self.\_attr\_devices}
\DoxyCodeLine{134 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ab6e5eda10fb712850c3fb311fd1cd4a0_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a584a46b04ebd15efa4f74cdf54bbe75f}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a584a46b04ebd15efa4f74cdf54bbe75f}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!devices@{devices}}
\index{devices@{devices}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{devices()}{devices()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily  None klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+devices (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{dict\mbox{[}\mbox{\hyperlink{classstr}{str}}, \mbox{\hyperlink{classklyqa__ctl_1_1devices_1_1device_1_1Device}{Device}}\mbox{]}}]{devices }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{136     \textcolor{keyword}{def }devices(self, devices: dict[str, Device]) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{137         self.\_attr\_devices = devices}
\DoxyCodeLine{138 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a584a46b04ebd15efa4f74cdf54bbe75f_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a584a46b04ebd15efa4f74cdf54bbe75f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_aca681010a08f941d9f65888e99cd6374}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_aca681010a08f941d9f65888e99cd6374}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!discover\_devices@{discover\_devices}}
\index{discover\_devices@{discover\_devices}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{discover\_devices()}{discover\_devices()}}
{\footnotesize\ttfamily  None klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+discover\+\_\+devices (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{argparse.\+Namespace}]{args,  }\item[{list\mbox{[}Any\mbox{]}}]{message\+\_\+queue\+\_\+tx\+\_\+local,  }\item[{set\mbox{[}Any\mbox{]}}]{target\+\_\+device\+\_\+uids }\end{DoxyParamCaption})}

\begin{DoxyVerb}Discover devices.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{165     ) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{166         \textcolor{stringliteral}{"{}"{}"{}Discover devices."{}"{}"{}}}
\DoxyCodeLine{167         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.local:}
\DoxyCodeLine{168             \textcolor{keywordflow}{return}}
\DoxyCodeLine{169 }
\DoxyCodeLine{170         print(SEPARATION\_WIDTH * \textcolor{stringliteral}{"{}-\/"{}})}
\DoxyCodeLine{171         print(\textcolor{stringliteral}{"{}Search local network for devices ..."{}})}
\DoxyCodeLine{172         print(SEPARATION\_WIDTH * \textcolor{stringliteral}{"{}-\/"{}})}
\DoxyCodeLine{173 }
\DoxyCodeLine{174         discover\_timeout\_secs: float = 2.5}
\DoxyCodeLine{175 }
\DoxyCodeLine{176         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}discover ping start"{}})}
\DoxyCodeLine{177         \textcolor{comment}{\# send a message to uid "{}all"{} which is fake but will get the}}
\DoxyCodeLine{178         \textcolor{comment}{\# identification message from the devices in the aes\_search and}}
\DoxyCodeLine{179         \textcolor{comment}{\# send msg function and we can send then a real}}
\DoxyCodeLine{180         \textcolor{comment}{\# request message to these discovered devices.}}
\DoxyCodeLine{181         await self.local.send\_message(}
\DoxyCodeLine{182             message\_queue\_tx\_local,}
\DoxyCodeLine{183             UnitId(\textcolor{stringliteral}{"{}all"{}}),}
\DoxyCodeLine{184             discover\_timeout\_secs,}
\DoxyCodeLine{185         )}
\DoxyCodeLine{186         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}discover ping end"{}})}
\DoxyCodeLine{187         \textcolor{comment}{\# if self.devices:}}
\DoxyCodeLine{188         \textcolor{comment}{\#     target\_device\_uids = set(}}
\DoxyCodeLine{189         \textcolor{comment}{\# u\_id for u\_id, v in self.devices.items())}}
\DoxyCodeLine{190         \textcolor{comment}{\# some code missing}}
\DoxyCodeLine{191 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_aca681010a08f941d9f65888e99cd6374_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_aca681010a08f941d9f65888e99cd6374_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ab04dda2165aadfb9688ff83d3e5a3bc9}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ab04dda2165aadfb9688ff83d3e5a3bc9}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!local@{local}}
\index{local@{local}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{local()}{local()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily  Local\+Connection\+Handler $\vert$ None klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+local (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{116     \textcolor{keyword}{def }\mbox{\hyperlink{namespacelocal}{local}}(self) -\/> LocalConnectionHandler | None:}
\DoxyCodeLine{117         \textcolor{keywordflow}{return} self.\_attr\_local}
\DoxyCodeLine{118 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ab04dda2165aadfb9688ff83d3e5a3bc9_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a3cdabc8aa3a95c4adda1df1949cda05d}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a3cdabc8aa3a95c4adda1df1949cda05d}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!local@{local}}
\index{local@{local}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{local()}{local()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily  None klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+local (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{Local\+Connection\+Handler $\vert$ None}]{local }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{120     \textcolor{keyword}{def }\mbox{\hyperlink{namespacelocal}{local}}(self, local: LocalConnectionHandler | \textcolor{keywordtype}{None}) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{121         self.\_attr\_local = local}
\DoxyCodeLine{122 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a3cdabc8aa3a95c4adda1df1949cda05d_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a3cdabc8aa3a95c4adda1df1949cda05d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a40aba5774804e631745f63c3c91ec049}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a40aba5774804e631745f63c3c91ec049}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!select\_device@{select\_device}}
\index{select\_device@{select\_device}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{select\_device()}{select\_device()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classstr}{str}} $\vert$ set\mbox{[}\mbox{\hyperlink{classstr}{str}}\mbox{]} klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+select\+\_\+device (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{argparse.\+Namespace}]{args,  }\item[{datetime.\+datetime     }]{send\+\_\+started\+\_\+local }\end{DoxyParamCaption})}

\begin{DoxyVerb}Interactive select device.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{222     ) -\/> str | set[str]:}
\DoxyCodeLine{223         \textcolor{stringliteral}{"{}"{}"{}Interactive select device."{}"{}"{}}}
\DoxyCodeLine{224 }
\DoxyCodeLine{225         print(SEPARATION\_WIDTH * \textcolor{stringliteral}{"{}-\/"{}})}
\DoxyCodeLine{226         \textcolor{comment}{\# devices\_working = \{}}
\DoxyCodeLine{227         \textcolor{comment}{\#     k: v for k, v in self.devices.items() if}}
\DoxyCodeLine{228         \textcolor{comment}{\# v.local.aes\_key\_confirmed}}
\DoxyCodeLine{229         \textcolor{comment}{\# \}}}
\DoxyCodeLine{230         devices\_working: dict[str, Device] = \{}
\DoxyCodeLine{231             u\_id: device}
\DoxyCodeLine{232             \textcolor{keywordflow}{for} u\_id, device \textcolor{keywordflow}{in} self.devices.items()}
\DoxyCodeLine{233             \textcolor{keywordflow}{if} (}
\DoxyCodeLine{234                 (}
\DoxyCodeLine{235                     args.type == DeviceType.LIGHTING.value}
\DoxyCodeLine{236                     \textcolor{keywordflow}{and} isinstance(device, Light)}
\DoxyCodeLine{237                 )}
\DoxyCodeLine{238                 \textcolor{keywordflow}{or} (}
\DoxyCodeLine{239                     args.type == DeviceType.CLEANER.value}
\DoxyCodeLine{240                     \textcolor{keywordflow}{and} isinstance(device, VacuumCleaner)}
\DoxyCodeLine{241                 )}
\DoxyCodeLine{242             )}
\DoxyCodeLine{243             \textcolor{keywordflow}{and} (}
\DoxyCodeLine{244                 (}
\DoxyCodeLine{245                     device.status}
\DoxyCodeLine{246                     \textcolor{keywordflow}{and} device.status.ts}
\DoxyCodeLine{247                     \textcolor{keywordflow}{and} isinstance(device.status.ts, datetime.datetime)}
\DoxyCodeLine{248                     \textcolor{keywordflow}{and} device.status.ts > send\_started\_local}
\DoxyCodeLine{249                 )}
\DoxyCodeLine{250                 \textcolor{keywordflow}{or} (}
\DoxyCodeLine{251                     (args.cloud \textcolor{keywordflow}{or} args.tryLocalThanCloud)}
\DoxyCodeLine{252                     \textcolor{keywordflow}{and} device.cloud}
\DoxyCodeLine{253                     \textcolor{keywordflow}{and} device.cloud.connected}
\DoxyCodeLine{254                 )}
\DoxyCodeLine{255             )}
\DoxyCodeLine{256         \}}
\DoxyCodeLine{257         print(}
\DoxyCodeLine{258             \textcolor{stringliteral}{"{}Found "{}}}
\DoxyCodeLine{259             + \mbox{\hyperlink{classstr}{str}}(len(devices\_working))}
\DoxyCodeLine{260             + \textcolor{stringliteral}{"{} "{}}}
\DoxyCodeLine{261             + (\textcolor{stringliteral}{"{}device"{}} \textcolor{keywordflow}{if} len(devices\_working) == 1 \textcolor{keywordflow}{else} \textcolor{stringliteral}{"{}devices"{}})}
\DoxyCodeLine{262             + \textcolor{stringliteral}{"{} with working aes keys"{}}}
\DoxyCodeLine{263             + (\textcolor{stringliteral}{"{} (dev aes key)"{}} \textcolor{keywordflow}{if} args.dev \textcolor{keywordflow}{else} \textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{264             + \textcolor{stringliteral}{"{}."{}}}
\DoxyCodeLine{265         )}
\DoxyCodeLine{266         \textcolor{keywordflow}{if} len(devices\_working) <= 0:}
\DoxyCodeLine{267             \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}no\_devices"{}}}
\DoxyCodeLine{268 }
\DoxyCodeLine{269         print(SEPARATION\_WIDTH * \textcolor{stringliteral}{"{}-\/"{}})}
\DoxyCodeLine{270         count: int = 1}
\DoxyCodeLine{271         device\_items: list[Device] = list(devices\_working.values())}
\DoxyCodeLine{272 }
\DoxyCodeLine{273         \textcolor{keywordflow}{if} device\_items:}
\DoxyCodeLine{274             print(}
\DoxyCodeLine{275                 \textcolor{stringliteral}{"{}Status attributes: ("{}}}
\DoxyCodeLine{276                 + \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a478a761c65763ffa478642d11af1eade}{get\_obj\_attrs\_as\_string}}(ResponseStatus)}
\DoxyCodeLine{277                 + \textcolor{stringliteral}{"{}) (local IP-\/Address)"{}}}
\DoxyCodeLine{278             )}
\DoxyCodeLine{279             print(\textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{280 }
\DoxyCodeLine{281         \textcolor{keywordflow}{for} device \textcolor{keywordflow}{in} device\_items:}
\DoxyCodeLine{282             name: str = f\textcolor{stringliteral}{"{}Unit ID: \{device.u\_id\}"{}}}
\DoxyCodeLine{283             \textcolor{keywordflow}{if} device.acc\_sets \textcolor{keywordflow}{and} \textcolor{stringliteral}{"{}name"{}} \textcolor{keywordflow}{in} device.acc\_sets:}
\DoxyCodeLine{284                 name = device.acc\_sets[\textcolor{stringliteral}{"{}name"{}}]}
\DoxyCodeLine{285             address: str = (}
\DoxyCodeLine{286                 \textcolor{stringliteral}{"{} (local"{}}}
\DoxyCodeLine{287                 f\textcolor{stringliteral}{"{} \{device.local\_addr['ip']\}:\{device.local\_addr['port']\})"{}}}
\DoxyCodeLine{288                 \textcolor{keywordflow}{if} device.local\_addr[\textcolor{stringliteral}{"{}ip"{}}]}
\DoxyCodeLine{289                 \textcolor{keywordflow}{else} \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{290             )}
\DoxyCodeLine{291             cloud: str = \textcolor{stringliteral}{"{} (cloud connected)"{}} \textcolor{keywordflow}{if} device.cloud.connected \textcolor{keywordflow}{else} \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{292             status: str = (}
\DoxyCodeLine{293                 f\textcolor{stringliteral}{"{} (\{device.status\})"{}} \textcolor{keywordflow}{if} device.status \textcolor{keywordflow}{else} \textcolor{stringliteral}{"{} (no status)"{}}}
\DoxyCodeLine{294             )}
\DoxyCodeLine{295             print(f\textcolor{stringliteral}{"{}\{count\}) \{name\}\{status\}\{address\}\{cloud\}"{}})}
\DoxyCodeLine{296             count = count + 1}
\DoxyCodeLine{297 }
\DoxyCodeLine{298         \textcolor{keywordflow}{if} self.devices:}
\DoxyCodeLine{299             print(\textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{300             device\_num\_s: str = input(}
\DoxyCodeLine{301                 \textcolor{stringliteral}{"{}Choose bulb number(s) (comma seperated) a"{}}}
\DoxyCodeLine{302                 \textcolor{stringliteral}{"{} (all),[1-\/9]*\{,[1-\/9]*\}*: "{}}}
\DoxyCodeLine{303             )}
\DoxyCodeLine{304             target\_device\_uids\_lcl: set[str] = set()}
\DoxyCodeLine{305             \textcolor{keywordflow}{if} device\_num\_s == \textcolor{stringliteral}{"{}a"{}}:}
\DoxyCodeLine{306                 \textcolor{keywordflow}{return} set(b.u\_id \textcolor{keywordflow}{for} b \textcolor{keywordflow}{in} device\_items)}
\DoxyCodeLine{307             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{308                 \textcolor{keywordflow}{for} bulb\_num \textcolor{keywordflow}{in} device\_num\_s.split(\textcolor{stringliteral}{"{},"{}}):}
\DoxyCodeLine{309                     bulb\_num\_nr: int = \mbox{\hyperlink{namespacecloud_a8ff77cd5353527f3ef3c4e2216d86949}{int}}(bulb\_num)}
\DoxyCodeLine{310                     \textcolor{keywordflow}{if} bulb\_num\_nr > 0 \textcolor{keywordflow}{and} bulb\_num\_nr < count:}
\DoxyCodeLine{311                         target\_device\_uids\_lcl.add(}
\DoxyCodeLine{312                             device\_items[bulb\_num\_nr -\/ 1].u\_id}
\DoxyCodeLine{313                         )}
\DoxyCodeLine{314             \textcolor{keywordflow}{return} target\_device\_uids\_lcl}
\DoxyCodeLine{315 }
\DoxyCodeLine{316         \textcolor{comment}{\# No devices found. Exit script.}}
\DoxyCodeLine{317         sys.exit(0)}
\DoxyCodeLine{318 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a40aba5774804e631745f63c3c91ec049_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a40aba5774804e631745f63c3c91ec049_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ad5c42cd8dd34ed1d6329040e164bfc2e}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ad5c42cd8dd34ed1d6329040e164bfc2e}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!send\_to\_devices@{send\_to\_devices}}
\index{send\_to\_devices@{send\_to\_devices}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{send\_to\_devices()}{send\_to\_devices()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classstr}{str}} $\vert$ bool $\vert$ int $\vert$ set klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+send\+\_\+to\+\_\+devices (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{argparse.\+Namespace}]{args,  }\item[{list\mbox{[}Any\mbox{]}}]{args\+\_\+in,  }\item[{int }]{timeout\+\_\+ms = {\ttfamily 5000},  }\item[{Callable\mbox{[}\mbox{[}\mbox{\hyperlink{classklyqa__ctl_1_1general_1_1message_1_1Message}{Message}}, \mbox{\hyperlink{classstr}{str}}\mbox{]}, Any\mbox{]} $\vert$ None }]{async\+\_\+answer\+\_\+callback = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Collect the messages for the devices to send to

Args:
    args (Argsparse): Parsed args object
    args_in (list): List of arguments parsed to the script call
    timeout_ms (int, optional): Timeout to send. Defaults to 5000.

Raises:
    Exception: Network or file errors

Returns:
    bool: True if succeeded.
\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{325     ) -\/> str | bool | int | set:}
\DoxyCodeLine{326         \textcolor{stringliteral}{"{}"{}"{}Collect the messages for the devices to send to}}
\DoxyCodeLine{327 \textcolor{stringliteral}{}}
\DoxyCodeLine{328 \textcolor{stringliteral}{        Args:}}
\DoxyCodeLine{329 \textcolor{stringliteral}{            args (Argsparse): Parsed args object}}
\DoxyCodeLine{330 \textcolor{stringliteral}{            args\_in (list): List of arguments parsed to the script call}}
\DoxyCodeLine{331 \textcolor{stringliteral}{            timeout\_ms (int, optional): Timeout to send. Defaults to 5000.}}
\DoxyCodeLine{332 \textcolor{stringliteral}{}}
\DoxyCodeLine{333 \textcolor{stringliteral}{        Raises:}}
\DoxyCodeLine{334 \textcolor{stringliteral}{            Exception: Network or file errors}}
\DoxyCodeLine{335 \textcolor{stringliteral}{}}
\DoxyCodeLine{336 \textcolor{stringliteral}{        Returns:}}
\DoxyCodeLine{337 \textcolor{stringliteral}{            bool: True if succeeded.}}
\DoxyCodeLine{338 \textcolor{stringliteral}{        "{}"{}"{}}}
\DoxyCodeLine{339         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{340             loop: asyncio.AbstractEventLoop = asyncio.get\_event\_loop()}
\DoxyCodeLine{341 }
\DoxyCodeLine{342             send\_started: datetime.datetime = datetime.datetime.now()}
\DoxyCodeLine{343 }
\DoxyCodeLine{344             add\_command\_args\_ch: dict[str, Callable[..., Any]] = \{}
\DoxyCodeLine{345                 DeviceType.LIGHTING.value: add\_command\_args\_bulb,}
\DoxyCodeLine{346                 DeviceType.CLEANER.value: add\_command\_args\_cleaner,}
\DoxyCodeLine{347             \}}
\DoxyCodeLine{348             add\_command\_args: Callable[..., Any] = add\_command\_args\_ch[}
\DoxyCodeLine{349                 args.type}
\DoxyCodeLine{350             ]}
\DoxyCodeLine{351 }
\DoxyCodeLine{352             \textcolor{keywordflow}{if} args.dev:}
\DoxyCodeLine{353                 args.local = \textcolor{keyword}{True}}
\DoxyCodeLine{354                 args.tryLocalThanCloud = \textcolor{keyword}{False}}
\DoxyCodeLine{355                 args.cloud = \textcolor{keyword}{False}}
\DoxyCodeLine{356 }
\DoxyCodeLine{357             \textcolor{keywordflow}{if} args.debug:}
\DoxyCodeLine{358                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a6e74b8cc4bae98fa55902e4b875af67e}{set\_debug\_logger}}(level=logging.DEBUG)}
\DoxyCodeLine{359 }
\DoxyCodeLine{360             \textcolor{keywordflow}{if} args.trace:}
\DoxyCodeLine{361                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a6e74b8cc4bae98fa55902e4b875af67e}{set\_debug\_logger}}(level=TRACE)}
\DoxyCodeLine{362 }
\DoxyCodeLine{363             \textcolor{keywordflow}{if} args.cloud \textcolor{keywordflow}{or} args.local:}
\DoxyCodeLine{364                 args.tryLocalThanCloud = \textcolor{keyword}{False}}
\DoxyCodeLine{365 }
\DoxyCodeLine{366             \textcolor{keywordflow}{if} args.aes \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{367                 self.ctl\_data.aes\_keys[\textcolor{stringliteral}{"{}all"{}}] = bytes.fromhex(args.aes[0])}
\DoxyCodeLine{368 }
\DoxyCodeLine{369             target\_device\_uids: set[str] = set()}
\DoxyCodeLine{370 }
\DoxyCodeLine{371             message\_queue\_tx\_local: list[Any] = []}
\DoxyCodeLine{372             message\_queue\_tx\_state\_cloud: list[Any] = []}
\DoxyCodeLine{373             message\_queue\_tx\_command\_cloud: list[Any] = []}
\DoxyCodeLine{374 }
\DoxyCodeLine{375             \textcolor{comment}{\# if args.device\_name is not None:}}
\DoxyCodeLine{376             \textcolor{comment}{\#     if not self.device\_name\_to\_uid(args, target\_device\_uids):}}
\DoxyCodeLine{377             \textcolor{comment}{\#         return False}}
\DoxyCodeLine{378 }
\DoxyCodeLine{379             \textcolor{keywordflow}{if} args.device\_unitids \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{380                 target\_device\_uids = set(}
\DoxyCodeLine{381                     map(str, set(args.device\_unitids[0].split(\textcolor{stringliteral}{"{},"{}})))}
\DoxyCodeLine{382                 )}
\DoxyCodeLine{383                 LOGGER.info(}
\DoxyCodeLine{384                     \textcolor{stringliteral}{"{}Send to device: "{}}}
\DoxyCodeLine{385                     + \textcolor{stringliteral}{"{}, "{}}.join(args.device\_unitids[0].split(\textcolor{stringliteral}{"{},"{}}))}
\DoxyCodeLine{386                 )}
\DoxyCodeLine{387 }
\DoxyCodeLine{388             \textcolor{comment}{\# if (}}
\DoxyCodeLine{389             \textcolor{comment}{\#     not args.selectDevice}}
\DoxyCodeLine{390             \textcolor{comment}{\#     and self.cloud\_backend}}
\DoxyCodeLine{391             \textcolor{comment}{\#     \# and self.backend\_connected()}}
\DoxyCodeLine{392             \textcolor{comment}{\# ):}}
\DoxyCodeLine{393             \textcolor{comment}{\#     await self.cloud\_backend.update\_device\_configs()}}
\DoxyCodeLine{394 }
\DoxyCodeLine{395             \textcolor{comment}{\# device specific commands \#}}
\DoxyCodeLine{396 }
\DoxyCodeLine{397             async \textcolor{keyword}{def }send\_to\_devices\_cb(}
\DoxyCodeLine{398                 args: argparse.Namespace,}
\DoxyCodeLine{399             ) -\/> str | bool | int | set:}
\DoxyCodeLine{400                 \textcolor{stringliteral}{"{}"{}"{}Send to devices callback for discover of devices option"{}"{}"{}}}
\DoxyCodeLine{401                 \textcolor{keywordflow}{return} await self.send\_to\_devices(}
\DoxyCodeLine{402                     args,}
\DoxyCodeLine{403                     args\_in,}
\DoxyCodeLine{404                     timeout\_ms=3500,}
\DoxyCodeLine{405                 )}
\DoxyCodeLine{406 }
\DoxyCodeLine{407             scene: list[str] = []}
\DoxyCodeLine{408             \textcolor{keywordflow}{if} args.type == DeviceType.LIGHTING.value:}
\DoxyCodeLine{409                 await add\_device\_command\_to\_queue\_light(}
\DoxyCodeLine{410                     args,}
\DoxyCodeLine{411                     args\_in,}
\DoxyCodeLine{412                     send\_to\_devices\_cb,}
\DoxyCodeLine{413                     message\_queue\_tx\_local,}
\DoxyCodeLine{414                     scene,}
\DoxyCodeLine{415                 )}
\DoxyCodeLine{416             \textcolor{keywordflow}{elif} args.type == DeviceType.CLEANER.value:}
\DoxyCodeLine{417                 await create\_device\_message\_vacuum(}
\DoxyCodeLine{418                     args,}
\DoxyCodeLine{419                     args\_in,}
\DoxyCodeLine{420                     send\_to\_devices\_cb,}
\DoxyCodeLine{421                     message\_queue\_tx\_local,}
\DoxyCodeLine{422                     message\_queue\_tx\_command\_cloud,}
\DoxyCodeLine{423                     message\_queue\_tx\_state\_cloud,}
\DoxyCodeLine{424                 )}
\DoxyCodeLine{425             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{426                 LOGGER.error(\textcolor{stringliteral}{"{}Missing device type."{}})}
\DoxyCodeLine{427                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}}
\DoxyCodeLine{428 }
\DoxyCodeLine{429             success: bool = \textcolor{keyword}{True}}
\DoxyCodeLine{430             to\_send\_device\_uids: set[str] = set()}
\DoxyCodeLine{431 }
\DoxyCodeLine{432             \textcolor{keywordflow}{if} self.local \textcolor{keywordflow}{and} (args.local \textcolor{keywordflow}{or} args.tryLocalThanCloud):}
\DoxyCodeLine{433                 \textcolor{keywordflow}{if} args.passive:}
\DoxyCodeLine{434                     \textcolor{keywordflow}{if} self.local \textcolor{keywordflow}{and} self.local.udp:}
\DoxyCodeLine{435                         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}Waiting for UDP broadcast"{}})}
\DoxyCodeLine{436                         data, address = self.local.udp.recvfrom(4096)}
\DoxyCodeLine{437                         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(}
\DoxyCodeLine{438                             \textcolor{stringliteral}{"{}\(\backslash\)n\(\backslash\)n 2. UDP server received: "{}},}
\DoxyCodeLine{439                             data.decode(\textcolor{stringliteral}{"{}utf-\/8"{}}),}
\DoxyCodeLine{440                             \textcolor{stringliteral}{"{}from"{}},}
\DoxyCodeLine{441                             address,}
\DoxyCodeLine{442                             \textcolor{stringliteral}{"{}\(\backslash\)n\(\backslash\)n"{}},}
\DoxyCodeLine{443                         )}
\DoxyCodeLine{444 }
\DoxyCodeLine{445                         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}3a. Sending UDP ack.\(\backslash\)n"{}})}
\DoxyCodeLine{446                         self.local.udp.sendto(}
\DoxyCodeLine{447                             \textcolor{stringliteral}{"{}QCX-\/ACK"{}}.encode(\textcolor{stringliteral}{"{}utf-\/8"{}}), address}
\DoxyCodeLine{448                         )}
\DoxyCodeLine{449                         time.sleep(1)}
\DoxyCodeLine{450                         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}3b. Sending UDP ack.\(\backslash\)n"{}})}
\DoxyCodeLine{451                         self.local.udp.sendto(}
\DoxyCodeLine{452                             \textcolor{stringliteral}{"{}QCX-\/ACK"{}}.encode(\textcolor{stringliteral}{"{}utf-\/8"{}}), address}
\DoxyCodeLine{453                         )}
\DoxyCodeLine{454                 \textcolor{keywordflow}{else}:}
\DoxyCodeLine{455 }
\DoxyCodeLine{456                     send\_started\_local: datetime.datetime = (}
\DoxyCodeLine{457                         datetime.datetime.now()}
\DoxyCodeLine{458                     )}
\DoxyCodeLine{459 }
\DoxyCodeLine{460                     \textcolor{keywordflow}{if} args.discover:}
\DoxyCodeLine{461                         await self.local.\mbox{\hyperlink{namespaceklyqa__ctl_1_1devices_1_1light_1_1commands_a09a73cff59e95502adefbee0333c3008}{discover\_devices}}()}
\DoxyCodeLine{462                         \textcolor{comment}{\# await self.discover\_devices(}}
\DoxyCodeLine{463                         \textcolor{comment}{\#     args, message\_queue\_tx\_local, target\_device\_uids}}
\DoxyCodeLine{464                         \textcolor{comment}{\# )}}
\DoxyCodeLine{465 }
\DoxyCodeLine{466                     to\_send\_device\_uids = target\_device\_uids.copy()}
\DoxyCodeLine{467 }
\DoxyCodeLine{468                     send\_tasks: list[asyncio.Task] = []}
\DoxyCodeLine{469                     \textcolor{keywordflow}{for} uid \textcolor{keywordflow}{in} target\_device\_uids:}
\DoxyCodeLine{470 }
\DoxyCodeLine{471                         send\_tasks.append(}
\DoxyCodeLine{472                             loop.create\_task(}
\DoxyCodeLine{473                                 self.local.send\_message(}
\DoxyCodeLine{474                                     send\_msgs=message\_queue\_tx\_local.copy(),}
\DoxyCodeLine{475                                     target\_device\_uid=UnitId(uid),}
\DoxyCodeLine{476                                     \textcolor{comment}{\# callback=async\_answer\_callback\_local,}}
\DoxyCodeLine{477                                     time\_to\_live\_secs=(timeout\_ms / 1000),}
\DoxyCodeLine{478                                 )}
\DoxyCodeLine{479                             )}
\DoxyCodeLine{480                         )}
\DoxyCodeLine{481 }
\DoxyCodeLine{482                     \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}wait for all target device uids done."{}})}
\DoxyCodeLine{483                     \textcolor{keywordflow}{for} task \textcolor{keywordflow}{in} send\_tasks:}
\DoxyCodeLine{484                         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{485                             await asyncio.wait\_for(}
\DoxyCodeLine{486                                 task, timeout=(timeout\_ms / 1000)}
\DoxyCodeLine{487                             )}
\DoxyCodeLine{488                         \textcolor{keywordflow}{except} asyncio.CancelledError:}
\DoxyCodeLine{489                             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}Timeout for send."{}})}
\DoxyCodeLine{490                         msg: Message = task.result()}
\DoxyCodeLine{491                         \textcolor{keywordflow}{if} msg.state == MessageState.SENT:}
\DoxyCodeLine{492                             to\_send\_device\_uids.remove(UnitId(msg.target\_uid))}
\DoxyCodeLine{493 }
\DoxyCodeLine{494                     \textcolor{keywordflow}{if} args.selectDevice:}
\DoxyCodeLine{495                         \textcolor{keywordflow}{return} await self.select\_device(}
\DoxyCodeLine{496                             args, send\_started\_local}
\DoxyCodeLine{497                         )}
\DoxyCodeLine{498 }
\DoxyCodeLine{499                 \textcolor{keywordflow}{if} target\_device\_uids \textcolor{keywordflow}{and} len(to\_send\_device\_uids) > 0:}
\DoxyCodeLine{500                     \textcolor{comment}{\# Error}}
\DoxyCodeLine{501                     sent\_locally\_error: str = (}
\DoxyCodeLine{502                         \textcolor{stringliteral}{"{}The commands "{}}}
\DoxyCodeLine{503                         + \mbox{\hyperlink{classstr}{str}}([f\textcolor{stringliteral}{"{}\{k\}=\{v\}"{}} \textcolor{keywordflow}{for} k, v \textcolor{keywordflow}{in} vars(args).items() \textcolor{keywordflow}{if} v])}
\DoxyCodeLine{504                         + \textcolor{stringliteral}{"{} failed to send locally to the device(s): "{}}}
\DoxyCodeLine{505                         + \textcolor{stringliteral}{"{}, "{}}.join(to\_send\_device\_uids)}
\DoxyCodeLine{506                     )}
\DoxyCodeLine{507                     \textcolor{keywordflow}{if} args.tryLocalThanCloud:}
\DoxyCodeLine{508                         LOGGER.info(sent\_locally\_error)}
\DoxyCodeLine{509                     \textcolor{keywordflow}{else}:}
\DoxyCodeLine{510                         LOGGER.error(sent\_locally\_error)}
\DoxyCodeLine{511                     success = \textcolor{keyword}{False}}
\DoxyCodeLine{512 }
\DoxyCodeLine{513             \textcolor{keywordflow}{if} self.cloud \textcolor{keywordflow}{and} (args.cloud \textcolor{keywordflow}{or} args.tryLocalThanCloud):}
\DoxyCodeLine{514                 \textcolor{keywordflow}{if} args.username \textcolor{keywordflow}{and} args.username \textcolor{keywordflow}{in} self.accounts:}
\DoxyCodeLine{515                     acc: Account = self.accounts[args.username]}
\DoxyCodeLine{516                     \textcolor{keywordflow}{for} uid \textcolor{keywordflow}{in} target\_device\_uids:}
\DoxyCodeLine{517                         acc\_dev: AccountDevice = (}
\DoxyCodeLine{518                             await acc.get\_or\_create\_device(uid)}
\DoxyCodeLine{519                         )}
\DoxyCodeLine{520                         \textcolor{keywordflow}{for} command \textcolor{keywordflow}{in} message\_queue\_tx\_local:}
\DoxyCodeLine{521                             await acc.cloud\_post\_command\_to\_dev(}
\DoxyCodeLine{522                                 acc\_dev, command}
\DoxyCodeLine{523                             )}
\DoxyCodeLine{524                 \textcolor{keywordflow}{else}:}
\DoxyCodeLine{525                     success = await self.cloud.cloud\_send(}
\DoxyCodeLine{526                         args,}
\DoxyCodeLine{527                         target\_device\_uids,}
\DoxyCodeLine{528                         to\_send\_device\_uids,}
\DoxyCodeLine{529                         timeout\_ms,}
\DoxyCodeLine{530                         message\_queue\_tx\_state\_cloud,}
\DoxyCodeLine{531                         message\_queue\_tx\_command\_cloud,}
\DoxyCodeLine{532                     )}
\DoxyCodeLine{533 }
\DoxyCodeLine{534             \textcolor{keywordflow}{if} success \textcolor{keywordflow}{and} scene:}
\DoxyCodeLine{535                 scene\_start\_args: list[str] = [}
\DoxyCodeLine{536                     args.type,}
\DoxyCodeLine{537                     \textcolor{stringliteral}{"{}-\/-\/routine\_id"{}},}
\DoxyCodeLine{538                     \textcolor{stringliteral}{"{}0"{}},}
\DoxyCodeLine{539                     \textcolor{stringliteral}{"{}-\/-\/routine\_start"{}},}
\DoxyCodeLine{540                 ]}
\DoxyCodeLine{541 }
\DoxyCodeLine{542                 orginal\_args\_parser: argparse.ArgumentParser = (}
\DoxyCodeLine{543                     \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1parameters_a38b90c6125a60eeabd89d4addab053b4}{get\_description\_parser}}()}
\DoxyCodeLine{544                 )}
\DoxyCodeLine{545                 scene\_start\_args\_parser: argparse.ArgumentParser = (}
\DoxyCodeLine{546                     \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1parameters_a38b90c6125a60eeabd89d4addab053b4}{get\_description\_parser}}()}
\DoxyCodeLine{547                 )}
\DoxyCodeLine{548 }
\DoxyCodeLine{549                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1parameters_a4d4508f84ab7a6044c74575f197f852b}{add\_config\_args}}(parser=orginal\_args\_parser)}
\DoxyCodeLine{550                 \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1parameters_a4d4508f84ab7a6044c74575f197f852b}{add\_config\_args}}(parser=scene\_start\_args\_parser)}
\DoxyCodeLine{551                 add\_command\_args(parser=scene\_start\_args\_parser)}
\DoxyCodeLine{552 }
\DoxyCodeLine{553                 (}
\DoxyCodeLine{554                     original\_config\_args\_parsed,}
\DoxyCodeLine{555                     \_,}
\DoxyCodeLine{556                 ) = orginal\_args\_parser.parse\_known\_args(args=args\_in)}
\DoxyCodeLine{557 }
\DoxyCodeLine{558                 scene\_start\_args\_parsed = scene\_start\_args\_parser.parse\_args(}
\DoxyCodeLine{559                     scene\_start\_args, namespace=original\_config\_args\_parsed}
\DoxyCodeLine{560                 )}
\DoxyCodeLine{561 }
\DoxyCodeLine{562                 async \textcolor{keyword}{def }async\_print\_answer(msg: Message, uid: str) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{563                     \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(f\textcolor{stringliteral}{"{}\{uid\}: "{}})}
\DoxyCodeLine{564                     \textcolor{keywordflow}{if} msg:}
\DoxyCodeLine{565                         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{566                             LOGGER.info(f\textcolor{stringliteral}{"{}Answer received from \{uid\}."{}})}
\DoxyCodeLine{567                             format\_answer: str = json.dumps(}
\DoxyCodeLine{568                                 json.loads(msg.answer),}
\DoxyCodeLine{569                                 sort\_keys=\textcolor{keyword}{True},}
\DoxyCodeLine{570                                 indent=4,}
\DoxyCodeLine{571                             )}
\DoxyCodeLine{572                             LOGGER.info(f\textcolor{stringliteral}{"{}\{format\_answer\}"{}})}
\DoxyCodeLine{573                         \textcolor{keywordflow}{except} json.JSONDecodeError:}
\DoxyCodeLine{574                             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_ad6b753e482e539892c57f8144cf213cb}{task\_log\_trace\_ex}}()}
\DoxyCodeLine{575                     \textcolor{keywordflow}{else}:}
\DoxyCodeLine{576                         LOGGER.error(f\textcolor{stringliteral}{"{}Error no message returned from \{uid\}."{}})}
\DoxyCodeLine{577 }
\DoxyCodeLine{578                 ret: str | bool | int | set = await self.send\_to\_devices(}
\DoxyCodeLine{579                     scene\_start\_args\_parsed,}
\DoxyCodeLine{580                     args\_in,}
\DoxyCodeLine{581                     timeout\_ms=timeout\_ms}
\DoxyCodeLine{582                     -\/ \mbox{\hyperlink{namespacecloud_a8ff77cd5353527f3ef3c4e2216d86949}{int}}(}
\DoxyCodeLine{583                         (}
\DoxyCodeLine{584                             datetime.datetime.now() -\/ send\_started}
\DoxyCodeLine{585                         ).total\_seconds()}
\DoxyCodeLine{586                     )}
\DoxyCodeLine{587                     * 1000,}
\DoxyCodeLine{588                     async\_answer\_callback=async\_print\_answer,}
\DoxyCodeLine{589                 )}
\DoxyCodeLine{590 }
\DoxyCodeLine{591                 \textcolor{keywordflow}{if} isinstance(ret, bool) \textcolor{keywordflow}{and} ret:}
\DoxyCodeLine{592                     success = \textcolor{keyword}{True}}
\DoxyCodeLine{593                 \textcolor{keywordflow}{else}:}
\DoxyCodeLine{594                     LOGGER.error(f\textcolor{stringliteral}{"{}Couldn't start scene \{scene[0]\}."{}})}
\DoxyCodeLine{595                     success = \textcolor{keyword}{False}}
\DoxyCodeLine{596 }
\DoxyCodeLine{597             \textcolor{keywordflow}{return} success}
\DoxyCodeLine{598         \textcolor{keywordflow}{except} Exception:}
\DoxyCodeLine{599             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_ad6b753e482e539892c57f8144cf213cb}{task\_log\_trace\_ex}}()}
\DoxyCodeLine{600             \textcolor{keywordflow}{return} \textcolor{keyword}{False}}
\DoxyCodeLine{601 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ad5c42cd8dd34ed1d6329040e164bfc2e_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ad5c42cd8dd34ed1d6329040e164bfc2e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a7a93bda9f242d678a4208d0962837f11}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a7a93bda9f242d678a4208d0962837f11}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!send\_to\_devices\_wrapped@{send\_to\_devices\_wrapped}}
\index{send\_to\_devices\_wrapped@{send\_to\_devices\_wrapped}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{send\_to\_devices\_wrapped()}{send\_to\_devices\_wrapped()}}
{\footnotesize\ttfamily  int klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+send\+\_\+to\+\_\+devices\+\_\+wrapped (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{argparse.\+Namespace}]{args\+\_\+parsed,  }\item[{list\mbox{[}Any\mbox{]}}]{args\+\_\+in,  }\item[{int }]{timeout\+\_\+ms = {\ttfamily 5000} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Set up broadcast port and tcp reply connection port.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{607     ) -\/> int:}
\DoxyCodeLine{608         \textcolor{stringliteral}{"{}"{}"{}Set up broadcast port and tcp reply connection port."{}"{}"{}}}
\DoxyCodeLine{609 }
\DoxyCodeLine{610         \textcolor{keywordflow}{if} args\_parsed.cloud \textcolor{keywordflow}{or} args\_parsed.local:}
\DoxyCodeLine{611             args\_parsed.tryLocalThanCloud = \textcolor{keyword}{False}}
\DoxyCodeLine{612 }
\DoxyCodeLine{613         \textcolor{keywordflow}{if} args\_parsed.debug:}
\DoxyCodeLine{614             LOGGER.setLevel(level=logging.DEBUG)}
\DoxyCodeLine{615             logging\_hdl.setLevel(level=logging.DEBUG)}
\DoxyCodeLine{616 }
\DoxyCodeLine{617         \textcolor{keywordflow}{if} args\_parsed.trace:}
\DoxyCodeLine{618             LOGGER.setLevel(TRACE)}
\DoxyCodeLine{619             logging\_hdl.setLevel(TRACE)}
\DoxyCodeLine{620 }
\DoxyCodeLine{621         \textcolor{keywordflow}{if} args\_parsed.dev:}
\DoxyCodeLine{622             self.ctl\_data.aes\_keys[\textcolor{stringliteral}{"{}dev"{}}] = AES\_KEY\_DEV}
\DoxyCodeLine{623 }
\DoxyCodeLine{624         local\_communication: bool = (}
\DoxyCodeLine{625             args\_parsed.local \textcolor{keywordflow}{or} args\_parsed.tryLocalThanCloud}
\DoxyCodeLine{626         )}
\DoxyCodeLine{627 }
\DoxyCodeLine{628         \textcolor{keywordflow}{if} local\_communication \textcolor{keywordflow}{and} self.local:}
\DoxyCodeLine{629             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} await self.local.bind\_ports():}
\DoxyCodeLine{630                 \textcolor{keywordflow}{return} 1}
\DoxyCodeLine{631 }
\DoxyCodeLine{632         exit\_ret: int = 0}
\DoxyCodeLine{633 }
\DoxyCodeLine{634         async \textcolor{keyword}{def }async\_answer\_callback(msg: Message, uid: str) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{635             \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(f\textcolor{stringliteral}{"{}\{uid\}: "{}})}
\DoxyCodeLine{636             \textcolor{keywordflow}{if} msg:}
\DoxyCodeLine{637                 \textcolor{keywordflow}{try}:}
\DoxyCodeLine{638                     LOGGER.info(f\textcolor{stringliteral}{"{}Answer received from \{uid\}."{}})}
\DoxyCodeLine{639 }
\DoxyCodeLine{640                     format\_answer: str = json.dumps(}
\DoxyCodeLine{641                         json.loads(msg.answer),}
\DoxyCodeLine{642                         sort\_keys=\textcolor{keyword}{True},}
\DoxyCodeLine{643                         indent=4,}
\DoxyCodeLine{644                     )}
\DoxyCodeLine{645                     LOGGER.info(f\textcolor{stringliteral}{"{}\{format\_answer\}"{}})}
\DoxyCodeLine{646                 \textcolor{keywordflow}{except} (json.JSONDecodeError, ValueError):}
\DoxyCodeLine{647                     \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_ad6b753e482e539892c57f8144cf213cb}{task\_log\_trace\_ex}}()}
\DoxyCodeLine{648             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{649                 LOGGER.error(f\textcolor{stringliteral}{"{}Error no message returned from \{uid\}."{}})}
\DoxyCodeLine{650 }
\DoxyCodeLine{651         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} await self.send\_to\_devices(}
\DoxyCodeLine{652             args\_parsed,}
\DoxyCodeLine{653             args\_in,}
\DoxyCodeLine{654             timeout\_ms=timeout\_ms,}
\DoxyCodeLine{655             async\_answer\_callback=async\_answer\_callback,}
\DoxyCodeLine{656         ):}
\DoxyCodeLine{657             exit\_ret = 1}
\DoxyCodeLine{658 }
\DoxyCodeLine{659         \mbox{\hyperlink{namespaceklyqa__ctl_1_1general_1_1general_a1afe30a73cc28a3b65babeeab27e36c8}{task\_log\_debug}}(\textcolor{stringliteral}{"{}Closing ports"{}})}
\DoxyCodeLine{660         \textcolor{keywordflow}{if} self.local:}
\DoxyCodeLine{661             await self.local.shutdown()}
\DoxyCodeLine{662 }
\DoxyCodeLine{663         \textcolor{keywordflow}{return} exit\_ret}
\DoxyCodeLine{664 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a7a93bda9f242d678a4208d0962837f11_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ac54c4bdc0dfa3897a09efe3655741bd0}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ac54c4bdc0dfa3897a09efe3655741bd0}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!shutdown@{shutdown}}
\index{shutdown@{shutdown}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{shutdown()}{shutdown()}}
{\footnotesize\ttfamily  None klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+shutdown (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Logout again from klyqa account.\end{DoxyVerb}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{152     async \textcolor{keyword}{def }shutdown(self) -\/> None:}
\DoxyCodeLine{153         \textcolor{stringliteral}{"{}"{}"{}Logout again from klyqa account."{}"{}"{}}}
\DoxyCodeLine{154 }
\DoxyCodeLine{155         \textcolor{keywordflow}{for} \_, acc \textcolor{keywordflow}{in} self.accounts.items():}
\DoxyCodeLine{156             await acc.shutdown()}
\DoxyCodeLine{157         \textcolor{keywordflow}{if} self.local:}
\DoxyCodeLine{158             await self.local.shutdown()}
\DoxyCodeLine{159 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ac54c4bdc0dfa3897a09efe3655741bd0_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ac54c4bdc0dfa3897a09efe3655741bd0_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a8a4103a5925e93ce5c70c841248cf98c}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a8a4103a5925e93ce5c70c841248cf98c}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!\_attr\_accounts@{\_attr\_accounts}}
\index{\_attr\_accounts@{\_attr\_accounts}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{\_attr\_accounts}{\_attr\_accounts}}
{\footnotesize\ttfamily klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+\_\+attr\+\_\+accounts\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a662a27da095d439cea492bb5723f3e66}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a662a27da095d439cea492bb5723f3e66}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!\_attr\_cloud@{\_attr\_cloud}}
\index{\_attr\_cloud@{\_attr\_cloud}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{\_attr\_cloud}{\_attr\_cloud}}
{\footnotesize\ttfamily klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+\_\+attr\+\_\+cloud\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ad01b90355173674e701cb94b6db54061}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_ad01b90355173674e701cb94b6db54061}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!\_attr\_ctl\_data@{\_attr\_ctl\_data}}
\index{\_attr\_ctl\_data@{\_attr\_ctl\_data}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{\_attr\_ctl\_data}{\_attr\_ctl\_data}}
{\footnotesize\ttfamily klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+\_\+attr\+\_\+ctl\+\_\+data\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a499e1baefc921c1f36a57e2c6ae6e745}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a499e1baefc921c1f36a57e2c6ae6e745}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!\_attr\_devices@{\_attr\_devices}}
\index{\_attr\_devices@{\_attr\_devices}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{\_attr\_devices}{\_attr\_devices}}
{\footnotesize\ttfamily klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+\_\+attr\+\_\+devices\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a287a2a6993c136f4612d37c1c61f4c3f}\label{classklyqa__ctl_1_1klyqa__ctl_1_1Client_a287a2a6993c136f4612d37c1c61f4c3f}} 
\index{klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}!\_attr\_local@{\_attr\_local}}
\index{\_attr\_local@{\_attr\_local}!klyqa\_ctl.klyqa\_ctl.Client@{klyqa\_ctl.klyqa\_ctl.Client}}
\doxysubsubsection{\texorpdfstring{\_attr\_local}{\_attr\_local}}
{\footnotesize\ttfamily klyqa\+\_\+ctl.\+klyqa\+\_\+ctl.\+Client.\+\_\+attr\+\_\+local\hspace{0.3cm}{\ttfamily [private]}}



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{klyqa__ctl_8py}{klyqa\+\_\+ctl.\+py}}\end{DoxyCompactItemize}
